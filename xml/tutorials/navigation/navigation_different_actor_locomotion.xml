<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/navigation/navigation_different_actor_locomotion.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-navigation-different-actor-locomotion"></target>
    <section ids="support-different-actor-locomotion doc-navigation-different-actor-locomotion" names="support\ different\ actor\ locomotion 支持不同角色运动 doc_navigation_different_actor_locomotion">
        <title>支持不同角色运动</title>
        <image candidates="{'*': 'tutorials/navigation/img/nav_actor_locomotion.png'}" uri="tutorials/navigation/img/nav_actor_locomotion.png"></image>
        <paragraph>要支持不同的角色运动，比如下蹲和爬行，需要和支持 <reference internal="True" refuri="navigation_different_actor_types#doc-navigation-different-actor-types"><inline classes="std std-ref">支持不同角色类型</inline></reference> 一样的地图设置。</paragraph>
        <paragraph>为蹲伏或爬行的演员烘焙具有适当高度的不同导览网格，以便他们可以找到穿过游戏世界中这些狭窄部分的路径。</paragraph>
        <paragraph>当 actor 改变运动状态时，例如站起来、开始蹲下或爬行，查询适当的地图以获取路径。</paragraph>
        <paragraph>如果回避行为也应该随着运动而改变，例如仅在站立时回避或仅避开处于相同运动状态的其他代理，则随着每次运动的改变，将参与者的回避代理切换到另一个回避图。</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
            </div>
            <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func update_path():

    if actor_standing:
        path = NavigationServer3D.map_get_path(standing_navigation_map_rid, start_position, target_position, true)
    elif actor_crouching:
        path = NavigationServer3D.map_get_path(crouched_navigation_map_rid, start_position, target_position, true)
    elif actor_crawling:
        path = NavigationServer3D.map_get_path(crawling_navigation_map_rid, start_position, target_position, true)

func change_agent_avoidance_state():

    if actor_standing:
        NavigationServer3D.agent_set_map(avoidance_agent_rid, standing_navigation_map_rid)
    elif actor_crouching:
        NavigationServer3D.agent_set_map(avoidance_agent_rid, crouched_navigation_map_rid)
    elif actor_crawling:
        NavigationServer3D.agent_set_map(avoidance_agent_rid, crawling_navigation_map_rid)</literal_block>
            </div>
        </container>
        <note>
            <paragraph>虽然可以对多个地图立即执行路径查询，但回避代理地图切换只有在下一次服务器同步后才会生效。</paragraph>
        </note>
        <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
    </section>
</document>
