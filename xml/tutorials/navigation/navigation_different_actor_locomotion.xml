<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/navigation/navigation_different_actor_locomotion.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-navigation-different-actor-locomotion"></target>
    <section ids="support-different-actor-locomotion doc-navigation-different-actor-locomotion" names="support\ different\ actor\ locomotion 支持不同角色运动 doc_navigation_different_actor_locomotion">
        <title>支持不同角色运动</title>
        <image candidates="{'*': 'tutorials/navigation/img/nav_actor_locomotion.png'}" uri="tutorials/navigation/img/nav_actor_locomotion.png"></image>
        <paragraph>要支持不同的角色运动，比如下蹲和爬行，需要和支持 <reference internal="True" refuri="navigation_different_actor_types#doc-navigation-different-actor-types"><inline classes="std std-ref">支持不同角色类型</inline></reference> 一样的地图设置。</paragraph>
        <paragraph>Bake different navigation meshes with an appropriate height for crouched
            or crawling actors so they can find paths through those narrow sections in your game world.</paragraph>
        <paragraph>When an actor changes locomotion state, e.g. stands up, starts
            crouching or crawling, query the appropriate map for a path.</paragraph>
        <paragraph>If the avoidance behavior should also change with the locomotion e.g. only avoid while standing or only avoid
            other agents in the same locomotion state, switch the actor's avoidance agent to another avoidance map with each locomotion change.</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
            </div>
            <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func update_path():

    if actor_standing:
        path = NavigationServer3D.map_get_path(standing_navigation_map_rid, start_position, target_position, true)
    elif actor_crouching:
        path = NavigationServer3D.map_get_path(crouched_navigation_map_rid, start_position, target_position, true)
    elif actor_crawling:
        path = NavigationServer3D.map_get_path(crawling_navigation_map_rid, start_position, target_position, true)

func change_agent_avoidance_state():

    if actor_standing:
        NavigationServer3D.agent_set_map(avoidance_agent_rid, standing_navigation_map_rid)
    elif actor_crouching:
        NavigationServer3D.agent_set_map(avoidance_agent_rid, crouched_navigation_map_rid)
    elif actor_crawling:
        NavigationServer3D.agent_set_map(avoidance_agent_rid, crawling_navigation_map_rid)</literal_block>
            </div>
        </container>
        <note>
            <paragraph>While a path query can be execute immediately for multiple maps, the avoidance agent map switch will only take effect after the next server synchronization.</paragraph>
        </note>
        <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
    </section>
</document>
