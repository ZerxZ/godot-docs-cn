<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/navigation/navigation_using_navigationpathqueryobjects.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-navigation-using-navigationpathqueryobjects"></target>
    <section ids="using-navigationpathqueryobjects doc-navigation-using-navigationpathqueryobjects" names="using\ navigationpathqueryobjects 使用\ navigationpathqueryobject doc_navigation_using_navigationpathqueryobjects">
        <title>使用 NavigationPathQueryObject</title>
        <paragraph><literal>NavigationPathQueryObjects</literal> 即导航路径查询对象，可以与 <literal>NavigationServer.query_path()</literal> 配合使用，对获取的导航路径进行丰富的<strong>自定义</strong>，指定包括<strong>元数据</strong>在内的各种项目。</paragraph>
        <paragraph>This requires more setup compared to obtaining a normal NavigationPath but lets you tailor
            the pathfinding and provided path data to the different needs of a project.</paragraph>
        <paragraph>NavigationPathQueryObjects consist of a pair of objects, a <literal>NavigationPathQueryParameters</literal> object holding the customization options
            for the query and a <literal>NavigationPathQueryResult</literal> that receives (regular) updates with the resulting path and meta data from the query.</paragraph>
        <paragraph>2D and 3D versions of <literal>NavigationPathQueryParameters</literal> are available as
            <reference internal="True" refuri="../../classes/class_navigationpathqueryparameters2d#class-navigationpathqueryparameters2d"><inline classes="std std-ref">NavigationPathQueryParameters2D</inline></reference> and
            <reference internal="True" refuri="../../classes/class_navigationpathqueryparameters3d#class-navigationpathqueryparameters3d"><inline classes="std std-ref">NavigationPathQueryParameters3D</inline></reference> respectively.</paragraph>
        <paragraph>2D and 3D versions of <literal>NavigationPathQueryResult</literal> are available as
            <reference internal="True" refuri="../../classes/class_navigationpathqueryresult2d#class-navigationpathqueryresult2d"><inline classes="std std-ref">NavigationPathQueryResult2D</inline></reference> and
            <reference internal="True" refuri="../../classes/class_navigationpathqueryresult3d#class-navigationpathqueryresult3d"><inline classes="std std-ref">NavigationPathQueryResult3D</inline></reference> respectively.</paragraph>
        <paragraph>Both parameters and result are used as a pair with the <literal>NavigationServer.query_path()</literal> function.</paragraph>
        <paragraph>For the available customization options and their use see the class doc of the parameters.</paragraph>
        <paragraph>While not a strict requirement, both objects are intended to be created once in advance, stored in a
            persistent variable for the agent and reused for every followup path query with updated parameters.
            This reuse avoids performance implications from frequent object creation if a project
            has a large quantity of simultaneous agents that regularly update their paths.</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
            </div>
            <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># prepare query objects
var query_parameters = NavigationPathQueryParameters2D.new()
var query_result  = NavigationPathQueryResult2D.new()

# update parameters object
query_parameters.map = get_world_2d().get_navigation_map()
query_parameters.start_position = agent2d_current_global_position
query_parameters.target_position = agent2d_target_global_position

# update result object
NavigationServer2D.query_path(query_parameters, query_result)
var path: PackedVector2Array = query_result.get_path()</literal_block>
            </div>
        </container>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
            </div>
            <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># prepare query objects
var query_parameters = NavigationPathQueryParameters3D.new()
var query_result  = NavigationPathQueryResult3D.new()

# update parameters object
query_parameters.map = get_world_3d().get_navigation_map()
query_parameters.start_position = agent3d_current_global_position
query_parameters.target_position = agent3d_target_global_position

# update result object
NavigationServer3D.query_path(query_parameters, query_result)
var path: PackedVector3Array = query_result.get_path()</literal_block>
            </div>
        </container>
        <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
    </section>
</document>
