<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/navigation/navigation_using_navigationlinks.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-navigation-using-navigationlinks"></target>
    <section ids="using-navigationlinks doc-navigation-using-navigationlinks" names="using\ navigationlinks doc_navigation_using_navigationlinks">
        <title>Using NavigationLinks</title>
        <image candidates="{'*': 'tutorials/navigation/img/nav_navmesh_links.png'}" original_uri="img/nav_navmesh_links.png" uri="tutorials/navigation/img/nav_navmesh_links.png"></image>
        <paragraph>NavigationLinks are used to connect navigation mesh polygons from <reference internal="True" refuri="../../classes/class_navigationregion2d#class-navigationregion2d"><inline classes="std std-ref">NavigationRegion2D</inline></reference>
            and <reference internal="True" refuri="../../classes/class_navigationregion3d#class-navigationregion3d"><inline classes="std std-ref">NavigationRegion3D</inline></reference> over arbitrary distances for pathfinding.</paragraph>
        <paragraph>NavigationLinks are also used to consider movement shortcuts in pathfinding available through
            interacting with gameplay objects e.g. ladders, jump pads or teleports.</paragraph>
        <paragraph>2D and 3D versions of NavigationJumplinks nodes are available as
            <reference internal="True" refuri="../../classes/class_navigationlink2d#class-navigationlink2d"><inline classes="std std-ref">NavigationLink2D</inline></reference> and
            <reference internal="True" refuri="../../classes/class_navigationlink3d#class-navigationlink3d"><inline classes="std std-ref">NavigationLink3D</inline></reference> respectively.</paragraph>
        <paragraph>Different NavigationRegions can connect their navigation meshes without the need for a NavigationLink
            as long as they have overlapping edges or edges that are within navigation map <literal>edge_connection_margin</literal>.
            As soon as the distance becomes too large, building valid connections becomes a problem - a problem that NavigationLinks can solve.</paragraph>
        <paragraph>See <reference internal="True" refuri="navigation_using_navigationregions#doc-navigation-using-navigationregions"><inline classes="std std-ref">Using NavigationRegions</inline></reference> to learn more about the use of navigation regions.
            See <reference internal="True" refuri="navigation_connecting_navmesh#doc-navigation-connecting-navmesh"><inline classes="std std-ref">Connecting navigation meshes</inline></reference> to learn more about how to connect navigation meshes.</paragraph>
        <image candidates="{'*': 'tutorials/navigation/img/nav_link_properties.png'}" original_uri="img/nav_link_properties.png" uri="tutorials/navigation/img/nav_link_properties.png"></image>
        <paragraph>NavigationLinks share many properties with NavigationRegions like <literal>navigation_layers</literal>.
            NavigationLinks add a single connection between two positions over an arbitrary distance
            compared to NavigationRegions that add a more local traversable area with a navigation mesh resource.</paragraph>
        <paragraph>NavigationLinks have a <literal>start_position</literal> and <literal>end_position</literal> and can go in both directions when <literal>bidirectional</literal> is enabled.
            When placed a navigationlink connects the navigation mesh polygons closest to its <literal>start_position</literal> and <literal>end_position</literal> within search radius for pathfinding.</paragraph>
        <paragraph>The polygon search radius can be configured globally in the ProjectSettings under <literal>navigation/2d_or_3d/default_link_connection_radius</literal>
            or set for each navigation <strong>map</strong> individually using the <literal>NavigationServer.map_set_link_connection_radius()</literal> function.</paragraph>
        <paragraph>Both <literal>start_position</literal> and <literal>end_position</literal> have debug markers in the Editor.
            The arrows indicate which direction the link can be travelled across, and the visible radius of
            a position shows the polygon search radius. All navigation mesh polygons inside are compared and
            the closest is picked for the edge connection. If no valid polygon is found within the search
            radius the navigation link gets disabled.</paragraph>
        <image candidates="{'*': 'tutorials/navigation/img/nav_link_debug_visuals.webp'}" original_uri="img/nav_link_debug_visuals.webp" uri="tutorials/navigation/img/nav_link_debug_visuals.webp"></image>
        <paragraph>The link debug visuals can be changed in the Editor <reference internal="True" refuri="../../classes/class_projectsettings#class-projectsettings"><inline classes="std std-ref">ProjectSettings</inline></reference> under <literal>debug/shapes/navigation</literal>.
            The visibility of the debug can also be controlled in the Editor 3D Viewport gizmo menu.</paragraph>
        <paragraph>A navigation link does not provide any specialized movement through the link. Instead, when
            an agent reaches the position of a link, game code needs to react (e.g. through area triggers)
            and provide means for the agent to move through the link to end up at the links other position
            (e.g. through teleport or animation). Without that an agent will attempt to move itself along
            the path of the link. You could end up with an agent walking over a bottomless pit instead of
            waiting for a moving platform, or walking through a teleporter and proceeding through a wall.</paragraph>
        <section ids="navigation-link-script-templates" names="navigation\ link\ script\ templates">
            <title>Navigation link script templates</title>
            <paragraph>The following script uses the NavigationServer to create a new navigation link.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-MkQgR0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-MkQgR0RTY3JpcHQ=" name="MkQgR0RTY3JpcHQ=" role="tab" tabindex="0">2D GDScript</button>
                    <button aria-controls="panel-0-MkQgQyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-MkQgQyM=" name="MkQgQyM=" role="tab" tabindex="-1">2D C#</button>
                    <button aria-controls="panel-0-M0QgR0RTY3JpcHQ=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-M0QgR0RTY3JpcHQ=" name="M0QgR0RTY3JpcHQ=" role="tab" tabindex="-1">3D GDScript</button>
                    <button aria-controls="panel-0-M0QgQyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-M0QgQyM=" name="M0QgQyM=" role="tab" tabindex="-1">3D C#</button>
                </div>
                <div aria-labelledby="tab-0-MkQgR0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-MkQgR0RTY3JpcHQ=" name="MkQgR0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends Node2D

var link_rid: RID
var link_start_position: Vector2
var link_end_position: Vector2

func _ready() -&gt; void:
    link_rid = NavigationServer2D.link_create()

    var link_owner_id: int = get_instance_id()
    var link_enter_cost: float = 1.0
    var link_travel_cost: float = 1.0
    var link_navigation_layers: int = 1
    var link_bidirectional: bool = true

    NavigationServer2D.link_set_owner_id(link_rid, link_owner_id)
    NavigationServer2D.link_set_enter_cost(link_rid, link_enter_cost)
    NavigationServer2D.link_set_travel_cost(link_rid, link_travel_cost)
    NavigationServer2D.link_set_navigation_layers(link_rid, link_navigation_layers)
    NavigationServer2D.link_set_bidirectional(link_rid, link_bidirectional)

    # Enable the link and set it to the default navigation map.
    NavigationServer2D.link_set_enabled(link_rid, true)
    NavigationServer2D.link_set_map(link_rid, get_world_2d().get_navigation_map())

    # Move the 2 link positions to their intended global positions.
    NavigationServer2D.link_set_start_position(link_rid, link_start_position)
    NavigationServer2D.link_set_end_position(link_rid, link_end_position)</literal_block>
                </div>
                <div aria-labelledby="tab-0-MkQgQyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-MkQgQyM=" name="MkQgQyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class MyNode2D : Node2D
{
    private Rid _linkRid;
    private Vector2 _linkStartPosition;
    private Vector2 _linkEndPosition;

    public override void _Ready()
    {
        _linkRid = NavigationServer2D.LinkCreate();

        ulong linkOwnerId = GetInstanceId();
        float linkEnterCost = 1.0f;
        float linkTravelCost = 1.0f;
        uint linkNavigationLayers = 1;
        bool linkBidirectional = true;

        NavigationServer2D.LinkSetOwnerId(_linkRid, linkOwnerId);
        NavigationServer2D.LinkSetEnterCost(_linkRid, linkEnterCost);
        NavigationServer2D.LinkSetTravelCost(_linkRid, linkTravelCost);
        NavigationServer2D.LinkSetNavigationLayers(_linkRid, linkNavigationLayers);
        NavigationServer2D.LinkSetBidirectional(_linkRid, linkBidirectional);

        // Enable the link and set it to the default navigation map.
        NavigationServer2D.LinkSetEnabled(_linkRid, true);
        NavigationServer2D.LinkSetMap(_linkRid, GetWorld2D().NavigationMap);

        // Move the 2 link positions to their intended global positions.
        NavigationServer2D.LinkSetStartPosition(_linkRid, _linkStartPosition);
        NavigationServer2D.LinkSetEndPosition(_linkRid, _linkEndPosition);
    }
}</literal_block>
                </div>
                <div aria-labelledby="tab-0-M0QgR0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-M0QgR0RTY3JpcHQ=" name="M0QgR0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends Node3D

var link_rid: RID
var link_start_position: Vector3
var link_end_position: Vector3

func _ready() -&gt; void:
    link_rid = NavigationServer3D.link_create()

    var link_owner_id: int = get_instance_id()
    var link_enter_cost: float = 1.0
    var link_travel_cost: float = 1.0
    var link_navigation_layers: int = 1
    var link_bidirectional: bool = true

    NavigationServer3D.link_set_owner_id(link_rid, link_owner_id)
    NavigationServer3D.link_set_enter_cost(link_rid, link_enter_cost)
    NavigationServer3D.link_set_travel_cost(link_rid, link_travel_cost)
    NavigationServer3D.link_set_navigation_layers(link_rid, link_navigation_layers)
    NavigationServer3D.link_set_bidirectional(link_rid, link_bidirectional)

    # Enable the link and set it to the default navigation map.
    NavigationServer3D.link_set_enabled(link_rid, true)
    NavigationServer3D.link_set_map(link_rid, get_world_3d().get_navigation_map())

    # Move the 2 link positions to their intended global positions.
    NavigationServer3D.link_set_start_position(link_rid, link_start_position)
    NavigationServer3D.link_set_end_position(link_rid, link_end_position)</literal_block>
                </div>
                <div aria-labelledby="tab-0-M0QgQyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-M0QgQyM=" name="M0QgQyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class MyNode3D : Node3D
{
    private Rid _linkRid;
    private Vector3 _linkStartPosition;
    private Vector3 _linkEndPosition;

    public override void _Ready()
    {
        _linkRid = NavigationServer3D.LinkCreate();

        ulong linkOwnerId = GetInstanceId();
        float linkEnterCost = 1.0f;
        float linkTravelCost = 1.0f;
        uint linkNavigationLayers = 1;
        bool linkBidirectional = true;

        NavigationServer3D.LinkSetOwnerId(_linkRid, linkOwnerId);
        NavigationServer3D.LinkSetEnterCost(_linkRid, linkEnterCost);
        NavigationServer3D.LinkSetTravelCost(_linkRid, linkTravelCost);
        NavigationServer3D.LinkSetNavigationLayers(_linkRid, linkNavigationLayers);
        NavigationServer3D.LinkSetBidirectional(_linkRid, linkBidirectional);

        // Enable the link and set it to the default navigation map.
        NavigationServer3D.LinkSetEnabled(_linkRid, true);
        NavigationServer3D.LinkSetMap(_linkRid, GetWorld3D().NavigationMap);

        // Move the 2 link positions to their intended global positions.
        NavigationServer3D.LinkSetStartPosition(_linkRid, _linkStartPosition);
        NavigationServer3D.LinkSetEndPosition(_linkRid, _linkEndPosition);
    }
}</literal_block>
                </div>
            </container>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
