<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/navigation/navigation_using_navigationlinks.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-navigation-using-navigationlinks"></target>
    <section ids="using-navigationlinks doc-navigation-using-navigationlinks" names="using\ navigationlinks 使用\ navigationlink doc_navigation_using_navigationlinks">
        <title>使用 NavigationLink</title>
        <image candidates="{'*': 'tutorials/navigation/img/nav_navmesh_links.png'}" uri="tutorials/navigation/img/nav_navmesh_links.png"></image>
        <paragraph>NavigationLink 即导航链接，可以将相隔任意距离的导航网格多边形连接起来参与寻路，多边形来自 <reference internal="True" refuri="../../classes/class_navigationregion2d#class-navigationregion2d"><inline classes="std std-ref">NavigationRegion2D</inline></reference> 和 <reference internal="True" refuri="../../classes/class_navigationregion3d#class-navigationregion3d"><inline classes="std std-ref">NavigationRegion3D</inline></reference>。</paragraph>
        <paragraph>NavigationLink 也可以用来实现寻路过程中需要与游戏中的对象交互才能使用的捷径，例如梯子、跳板、传送门等。</paragraph>
        <paragraph>2D and 3D versions of NavigationJumplinks nodes are available as
            <reference internal="True" refuri="../../classes/class_navigationlink2d#class-navigationlink2d"><inline classes="std std-ref">NavigationLink2D</inline></reference> and
            <reference internal="True" refuri="../../classes/class_navigationlink3d#class-navigationlink3d"><inline classes="std std-ref">NavigationLink3D</inline></reference> respectively.</paragraph>
        <paragraph>Different NavigationRegions can connect their navigation meshes without the need for a NavigationLink
            as long as they are within navigation map <literal>edge_connection_margin</literal> and have compatible <literal>navigation_layers</literal>.
            As soon as the distance becomes too large, building valid connections becomes a problem - a problem that NavigationLinks can solve.</paragraph>
        <paragraph>See <reference internal="True" refuri="navigation_using_navigationregions#doc-navigation-using-navigationregions"><inline classes="std std-ref">使用导航区块（NavigationRegion）</inline></reference> to learn more about the use of navigation regions.
            See <reference internal="True" refuri="navigation_connecting_navmesh#doc-navigation-connecting-navmesh"><inline classes="std std-ref">连接导航网格</inline></reference> to learn more about how to connect navigation meshes.</paragraph>
        <image candidates="{'*': 'tutorials/navigation/img/nav_link_properties.png'}" uri="tutorials/navigation/img/nav_link_properties.png"></image>
        <paragraph>NavigationLinks share many properties with NavigationRegions like <literal>navigation_layers</literal>.
            NavigationLinks add a single connection between two positions over an arbitrary distance
            compared to NavigationRegions that add a more local traversable area with a navigation mesh resource.</paragraph>
        <paragraph>NavigationLinks have a <literal>start_position</literal> and <literal>end_position</literal> and can go in both directions when <literal>bidirectional</literal> is enabled.
            When placed a navigationlink connects the navigation mesh polygons closest to its <literal>start_position</literal> and <literal>end_position</literal> within search radius for pathfinding.</paragraph>
        <paragraph>The polygon search radius can be configured globally in the ProjectSettings under <literal>navigation/2d_or_3d/default_link_connection_radius</literal>
            or set for each navigation <strong>map</strong> individually using the <literal>NavigationServer.map_set_link_connection_radius()</literal> function.</paragraph>
        <paragraph>Both <literal>start_position</literal> and <literal>end_position</literal> have debug markers in the Editor.
            The visible radius of a position shows the polygon search radius.
            All navigation mesh polygons inside are compared and the closest is picked for the edge connection.
            If no valid polygon is found within the search radius the navigation link gets disabled.</paragraph>
        <image candidates="{'*': 'tutorials/navigation/img/nav_link_debug_visuals.png'}" uri="tutorials/navigation/img/nav_link_debug_visuals.png"></image>
        <paragraph>The link debug visuals can be changed in the Editor <reference internal="True" refuri="../../classes/class_projectsettings#class-projectsettings"><inline classes="std std-ref">ProjectSettings</inline></reference> under <literal>debug/shapes/navigation</literal>.
            The visibility of the debug can also be controlled in the Editor 3D Viewport gizmo menu.</paragraph>
        <note>
            <paragraph>NavigationLinks do not move agents between the two link positions by themselves.</paragraph>
        </note>
        <paragraph>A navigation link does not provide any automated movement through the link. Instead, when
            an agent reaches the position of a link, game code needs to react (e.g. through area triggers) and provide means for the agent
            to move through the link to end up at the links other position (e.g. through teleport or animation) to continue along the path.</paragraph>
        <section ids="navigation-link-script-templates" names="navigation\ link\ script\ templates">
            <title>Navigation link script templates</title>
            <paragraph>The following script uses the NavigationServer to create a new navigation link.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-MkQgR0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-MkQgR0RTY3JpcHQ=" name="MkQgR0RTY3JpcHQ=" role="tab" tabindex="0">2D GDScript</button>
                    <button aria-controls="panel-0-M0QgR0RTY3JpcHQ=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-M0QgR0RTY3JpcHQ=" name="M0QgR0RTY3JpcHQ=" role="tab" tabindex="-1">3D GDScript</button>
                </div>
                <div aria-labelledby="tab-0-MkQgR0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-MkQgR0RTY3JpcHQ=" name="MkQgR0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends Node2D

var link_rid: RID
var link_start_position: Vector2
var link_end_position: Vector2

func _ready() -&gt; void:
    link_rid = NavigationServer2D.link_create()

    var link_owner_id: int = get_instance_id()
    var link_enter_cost: float = 1.0
    var link_travel_cost: float = 1.0
    var link_navigation_layers: int = 1
    var link_bidirectional: bool = true

    NavigationServer2D.link_set_owner_id(link_rid, link_owner_id)
    NavigationServer2D.link_set_enter_cost(link_rid, link_enter_cost)
    NavigationServer2D.link_set_travel_cost(link_rid, link_travel_cost)
    NavigationServer2D.link_set_navigation_layers(link_rid, link_navigation_layers)
    NavigationServer2D.link_set_bidirectional(link_rid, link_bidirectional)

    # Enable the link and set it to the default navigation map.
    NavigationServer2D.link_set_enabled(link_rid, true)
    NavigationServer2D.link_set_map(link_rid, get_world_2d().get_navigation_map())

    # Move the 2 link positions to their intended global positions.
    NavigationServer2D.link_set_start_position(link_rid, link_start_position)
    NavigationServer2D.link_set_end_position(link_rid, link_end_position)</literal_block>
                </div>
                <div aria-labelledby="tab-0-M0QgR0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-M0QgR0RTY3JpcHQ=" name="M0QgR0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends Node3D

var link_rid: RID
var link_start_position: Vector3
var link_end_position: Vector3

func _ready() -&gt; void:
    link_rid = NavigationServer3D.link_create()

    var link_owner_id: int = get_instance_id()
    var link_enter_cost: float = 1.0
    var link_travel_cost: float = 1.0
    var link_navigation_layers: int = 1
    var link_bidirectional: bool = true

    NavigationServer3D.link_set_owner_id(link_rid, link_owner_id)
    NavigationServer3D.link_set_enter_cost(link_rid, link_enter_cost)
    NavigationServer3D.link_set_travel_cost(link_rid, link_travel_cost)
    NavigationServer3D.link_set_navigation_layers(link_rid, link_navigation_layers)
    NavigationServer3D.link_set_bidirectional(link_rid, link_bidirectional)

    # Enable the link and set it to the default navigation map.
    NavigationServer3D.link_set_enabled(link_rid, true)
    NavigationServer3D.link_set_map(link_rid, get_world_3d().get_navigation_map())

    # Move the 2 link positions to their intended global positions.
    NavigationServer3D.link_set_start_position(link_rid, link_start_position)
    NavigationServer3D.link_set_end_position(link_rid, link_end_position)</literal_block>
                </div>
            </container>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
