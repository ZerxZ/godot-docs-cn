<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/math/random_number_generation.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-random-number-generation"></target>
    <section ids="random-number-generation doc-random-number-generation" names="random\ number\ generation doc_random_number_generation">
        <title>Random number generation</title>
        <paragraph>Many games rely on randomness to implement core game mechanics. This page
            guides you through common types of randomness and how to implement them in
            Godot.</paragraph>
        <paragraph>After giving you a brief overview of useful functions that generate random
            numbers, you will learn how to get random elements from arrays, dictionaries,
            and how to use a noise generator in GDScript. Lastly, we'll take a look at
            cryptographically secure random number generation and how it differs from
            typical random number generation.</paragraph>
        <note>
            <paragraph>Computers cannot generate "true" random numbers. Instead, they rely on
                <reference name="pseudorandom number generators" refuri="https://en.wikipedia.org/wiki/Pseudorandom_number_generator">pseudorandom number generators</reference> (PRNGs).</paragraph>
            <paragraph>Godot internally uses the <reference name="PCG Family" refuri="https://www.pcg-random.org/">PCG Family</reference>
                of pseudorandom number generators.</paragraph>
        </note>
        <section ids="global-scope-versus-randomnumbergenerator-class" names="global\ scope\ versus\ randomnumbergenerator\ class">
            <title>Global scope versus RandomNumberGenerator class</title>
            <paragraph>Godot exposes two ways to generate random numbers: via <emphasis>global scope</emphasis> methods or
                using the <reference internal="True" refuri="../../classes/class_randomnumbergenerator#class-randomnumbergenerator"><inline classes="std std-ref">RandomNumberGenerator</inline></reference> class.</paragraph>
            <paragraph>Global scope methods are easier to set up, but they don't offer as much control.</paragraph>
            <paragraph>RandomNumberGenerator requires more code to use, but allows creating
                multiple instances, each with their own seed and state.</paragraph>
            <paragraph>This tutorial uses global scope methods, except when the method only exists in
                the RandomNumberGenerator class.</paragraph>
        </section>
        <section ids="the-randomize-method" names="the\ randomize()\ method">
            <title>The randomize() method</title>
            <note>
                <paragraph>Since Godot 4.0, the random seed is automatically set to a random value when
                    the project starts. This means you don't need to call <literal>randomize()</literal> in
                    <literal>_ready()</literal> anymore to ensure that results are random across project runs.
                    However, you can still use <literal>randomize()</literal> if you want to use a specific
                    seed number, or generate it using a different method.</paragraph>
            </note>
            <paragraph>In global scope, you can find a <reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randomize"><inline classes="std std-ref">randomize()</inline></reference> method. <strong>This method should be called only
                    once when your project starts to initialize the random seed.</strong> Calling it
                multiple times is unnecessary and may impact performance negatively.</paragraph>
            <paragraph>Putting it in your main scene script's <literal>_ready()</literal> method is a good choice:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    randomize()</literal_block>
                </div>
                <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Ready()
{
    GD.Randomize();
}</literal_block>
                </div>
            </container>
            <paragraph>You can also set a fixed random seed instead using <reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-seed"><inline classes="std std-ref">seed()</inline></reference>. Doing so will give you <emphasis>deterministic</emphasis> results
                across runs:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    seed(12345)
    # To use a string as a seed, you can hash it to a number.
    seed("Hello world".hash())</literal_block>
                </div>
                <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Ready()
{
    GD.Seed(12345);
    // To use a string as a seed, you can hash it to a number.
    GD.Seed("Hello world".Hash());
}</literal_block>
                </div>
            </container>
            <paragraph>When using the RandomNumberGenerator class, you should call <literal>randomize()</literal> on
                the instance since it has its own seed:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var random = RandomNumberGenerator.new()
random.randomize()</literal_block>
                </div>
                <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">var random = new RandomNumberGenerator();
random.Randomize();</literal_block>
                </div>
            </container>
        </section>
        <section ids="getting-a-random-number" names="getting\ a\ random\ number">
            <title>Getting a random number</title>
            <paragraph>Let's look at some of the most commonly used functions and methods to generate
                random numbers in Godot.</paragraph>
            <paragraph>The function <reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randi"><inline classes="std std-ref">randi()</inline></reference> returns a random
                number between <literal>0</literal> and <literal>2^32 - 1</literal>. Since the maximum value is huge, you most
                likely want to use the modulo operator (<literal>%</literal>) to bound the result between 0 and
                the denominator:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-3-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-3-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-3-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># Prints a random integer between 0 and 49.
print(randi() % 50)

# Prints a random integer between 10 and 60.
print(randi() % 51 + 10)</literal_block>
                </div>
                <div aria-labelledby="tab-3-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-3-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Prints a random integer between 0 and 49.
GD.Print(GD.Randi() % 50);

// Prints a random integer between 10 and 60.
GD.Print(GD.Randi() % 51 + 10);</literal_block>
                </div>
            </container>
            <paragraph><reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randf"><inline classes="std std-ref">randf()</inline></reference> returns a random floating-point
                number between 0 and 1. This is useful to implement a
                <reference internal="True" refid="doc-random-number-generation-weighted-random-probability"><inline classes="std std-ref">Weighted random probability</inline></reference> system, among
                other things.</paragraph>
            <paragraph><reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randfn"><inline classes="std std-ref">randfn()</inline></reference> returns a random
                floating-point number following a <reference name="normal distribution" refuri="https://en.wikipedia.org/wiki/Normal_distribution">normal distribution</reference>. This means the returned
                value is more likely to be around the mean (0.0 by default),
                varying by the deviation (1.0 by default):</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-4-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-4-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-4-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># Prints a random floating-point number from a normal distribution with a mean 0.0 and deviation 1.0.
print(randfn(0.0, 1.0))</literal_block>
                </div>
                <div aria-labelledby="tab-4-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-4-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Prints a random floating-point number from a normal distribution with a mean 0.0 and deviation 1.0.
GD.Print(GD.Randfn(0.0, 1.0));</literal_block>
                </div>
            </container>
            <paragraph><reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randf-range"><inline classes="std std-ref">randf_range()</inline></reference> takes two arguments
                <literal>from</literal> and <literal>to</literal>, and returns a random floating-point number between <literal>from</literal>
                and <literal>to</literal>:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-5-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-5-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-5-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-5-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-5-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-5-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># Prints a random floating-point number between -4 and 6.5.
print(randf_range(-4, 6.5))</literal_block>
                </div>
                <div aria-labelledby="tab-5-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-5-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Prints a random floating-point number between -4 and 6.5.
GD.Print(GD.RandRange(-4.0, 6.5));</literal_block>
                </div>
            </container>
            <paragraph><reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randi-range"><inline classes="std std-ref">randi_range()</inline></reference> takes two arguments <literal>from</literal>
                and <literal>to</literal>, and returns a random integer between <literal>from</literal> and <literal>to</literal>:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-6-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-6-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-6-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-6-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-6-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-6-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># Prints a random integer between -10 and 10.
print(randi_range(-10, 10))</literal_block>
                </div>
                <div aria-labelledby="tab-6-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-6-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Prints a random integer number between -10 and 10.
GD.Print(GD.RandRange(-10, 10));</literal_block>
                </div>
            </container>
        </section>
        <section ids="get-a-random-array-element" names="get\ a\ random\ array\ element">
            <title>Get a random array element</title>
            <paragraph>We can use random integer generation to get a random element from an array,
                or use the <reference internal="True" refuri="../../classes/class_array#class-array-method-pick-random"><inline classes="std std-ref">Array.pick_random</inline></reference> method
                to do it for us:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-7-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-7-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-7-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-7-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-7-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-7-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var _fruits = ["apple", "orange", "pear", "banana"]

func _ready():
    for i in range(100):
        # Pick 100 fruits randomly.
        print(get_fruit())

    for i in range(100):
        # Pick 100 fruits randomly, this time using the `Array.pick_random()`
        # helper method. This has the same behavior as `get_fruit()`.
        print(_fruits.pick_random())

func get_fruit():
    var random_fruit = _fruits[randi() % _fruits.size()]
    # Returns "apple", "orange", "pear", or "banana" every time the code runs.
    # We may get the same fruit multiple times in a row.
    return random_fruit</literal_block>
                </div>
                <div aria-labelledby="tab-7-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-7-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Use Godot's Array type instead of a BCL type so we can use `PickRandom()` on it.
private Godot.Collections.Array&lt;string&gt; _fruits = ["apple", "orange", "pear", "banana"];

public override void _Ready()
{
    for (int i = 0; i &lt; 100; i++)
    {
        // Pick 100 fruits randomly.
        GD.Print(GetFruit());
    }

    for (int i = 0; i &lt; 100; i++)
    {
        // Pick 100 fruits randomly, this time using the `Array.PickRandom()`
        // helper method. This has the same behavior as `GetFruit()`.
        GD.Print(_fruits.PickRandom());
    }
}

public string GetFruit()
{
    string randomFruit = _fruits[GD.Randi() % _fruits.Size()];
    // Returns "apple", "orange", "pear", or "banana" every time the code runs.
    // We may get the same fruit multiple times in a row.
    return randomFruit;
}</literal_block>
                </div>
            </container>
            <paragraph>To prevent the same fruit from being picked more than once in a row, we can add
                more logic to the above method. In this case, we can't use
                <reference internal="True" refuri="../../classes/class_array#class-array-method-pick-random"><inline classes="std std-ref">Array.pick_random</inline></reference> since it lacks a way to
                prevent repetition:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-8-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-8-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-8-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-8-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-8-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-8-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var _fruits = ["apple", "orange", "pear", "banana"]
var _last_fruit = ""


func _ready():
    # Pick 100 fruits randomly.
    for i in range(100):
        print(get_fruit())


func get_fruit():
    var random_fruit = _fruits[randi() % _fruits.size()]
    while random_fruit == _last_fruit:
        # The last fruit was picked. Try again until we get a different fruit.
        random_fruit = _fruits[randi() % _fruits.size()]

    # Note: if the random element to pick is passed by reference,
    # such as an array or dictionary,
    # use `_last_fruit = random_fruit.duplicate()` instead.
    _last_fruit = random_fruit

    # Returns "apple", "orange", "pear", or "banana" every time the code runs.
    # The function will never return the same fruit more than once in a row.
    return random_fruit</literal_block>
                </div>
                <div aria-labelledby="tab-8-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-8-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private string[] _fruits = ["apple", "orange", "pear", "banana"];
private string _lastFruit = "";

public override void _Ready()
{
    for (int i = 0; i &lt; 100; i++)
    {
        // Pick 100 fruits randomly.
        GD.Print(GetFruit());
    }
}

public string GetFruit()
{
    string randomFruit = _fruits[GD.Randi() % _fruits.Length];
    while (randomFruit == _lastFruit)
    {
        // The last fruit was picked. Try again until we get a different fruit.
        randomFruit = _fruits[GD.Randi() % _fruits.Length];
    }

    _lastFruit = randomFruit;

    // Returns "apple", "orange", "pear", or "banana" every time the code runs.
    // The function will never return the same fruit more than once in a row.
    return randomFruit;
}</literal_block>
                </div>
            </container>
            <paragraph>This approach can be useful to make random number generation feel less
                repetitive. Still, it doesn't prevent results from "ping-ponging" between a
                limited set of values. To prevent this, use the <reference internal="True" refid="doc-random-number-generation-shuffle-bags"><inline classes="std std-ref">shuffle bag</inline></reference> pattern instead.</paragraph>
        </section>
        <section ids="get-a-random-dictionary-value" names="get\ a\ random\ dictionary\ value">
            <title>Get a random dictionary value</title>
            <paragraph>We can apply similar logic from arrays to dictionaries as well:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-9-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-9-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-9-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-9-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-9-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-9-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var _metals = {
    "copper": {"quantity": 50, "price": 50},
    "silver": {"quantity": 20, "price": 150},
    "gold": {"quantity": 3, "price": 500},
}


func _ready():
    for i in range(20):
        print(get_metal())


func get_metal():
    var random_metal = _metals.values()[randi() % metals.size()]
    # Returns a random metal value dictionary every time the code runs.
    # The same metal may be selected multiple times in succession.
    return random_metal</literal_block>
                </div>
                <div aria-labelledby="tab-9-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-9-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private Godot.Collections.Dictionary&lt;string, Godot.Collections.Dictionary&lt;string, int&gt;&gt; _metals = new()
{
    {"copper", new Godot.Collections.Dictionary&lt;string, int&gt;{{"quantity", 50}, {"price", 50}}},
    {"silver", new Godot.Collections.Dictionary&lt;string, int&gt;{{"quantity", 20}, {"price", 150}}},
    {"gold", new Godot.Collections.Dictionary&lt;string, int&gt;{{"quantity", 3}, {"price", 500}}},
};

public override void _Ready()
{
    for (int i = 0; i &lt; 20; i++)
    {
        GD.Print(GetMetal());
    }
}

public Godot.Collections.Dictionary&lt;string, int&gt; GetMetal()
{
    var (_, randomMetal) = _metals.ElementAt((int)(GD.Randi() % _metals.Count));
    // Returns a random metal value dictionary every time the code runs.
    // The same metal may be selected multiple times in succession.
    return randomMetal;
}</literal_block>
                </div>
            </container>
            <target refid="doc-random-number-generation-weighted-random-probability"></target>
        </section>
        <section ids="weighted-random-probability doc-random-number-generation-weighted-random-probability" names="weighted\ random\ probability doc_random_number_generation_weighted_random_probability">
            <title>Weighted random probability</title>
            <paragraph>The <reference internal="True" refuri="../../classes/class_@globalscope#class-globalscope-method-randf"><inline classes="std std-ref">randf()</inline></reference> method returns a
                floating-point number between 0.0 and 1.0. We can use this to create a
                "weighted" probability where different outcomes have different likelihoods:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-10-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-10-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-10-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-10-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-10-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-10-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    for i in range(100):
        print(get_item_rarity())


func get_item_rarity():
    var random_float = randf()

    if random_float &lt; 0.8:
        # 80% chance of being returned.
        return "Common"
    elif random_float &lt; 0.95:
        # 15% chance of being returned.
        return "Uncommon"
    else:
        # 5% chance of being returned.
        return "Rare"</literal_block>
                </div>
                <div aria-labelledby="tab-10-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-10-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Ready()
{
    for (int i = 0; i &lt; 100; i++)
    {
        GD.Print(GetItemRarity());
    }
}

public string GetItemRarity()
{
    float randomFloat = GD.Randf();

    if (randomFloat &lt; 0.8f)
    {
        // 80% chance of being returned.
        return "Common";
    }
    else if (randomFloat &lt; 0.95f)
    {
        // 15% chance of being returned.
        return "Uncommon";
    }
    else
    {
        // 5% chance of being returned.
        return "Rare";
    }
}</literal_block>
                </div>
            </container>
            <paragraph>You can also get a weighted random <emphasis>index</emphasis> using the
                <reference internal="True" refuri="../../classes/class_randomnumbergenerator#class-randomnumbergenerator-method-rand-weighted"><inline classes="std std-ref">rand_weighted()</inline></reference> method
                on a RandomNumberGenerator instance. This returns a random integer
                between 0 and the size of the array that is passed as a parameter. Each value in the
                array is a floating-point number that represents the <emphasis>relative</emphasis> likelihood that it
                will be returned as an index. A higher value means the value is more likely to be
                returned as an index, while a value of <literal>0</literal> means it will never be returned as an index.</paragraph>
            <paragraph>For example, if <literal>[0.5, 1, 1, 2]</literal> is passed as a parameter, then the method is twice
                as likely to return <literal>3</literal> (the index of the value <literal>2</literal>) and twice as unlikely to return
                <literal>0</literal> (the index of the value <literal>0.5</literal>) compared to the indices <literal>1</literal> and <literal>2</literal>.</paragraph>
            <paragraph>Since the returned value matches the array's size, it can be used as an index to
                get a value from another array as follows:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-11-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-11-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-11-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-11-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-11-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-11-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve"># Prints a random element using the weighted index that is returned by `rand_weighted()`.
# Here, "apple" will be returned twice as rarely as "orange" and "pear".
# "banana" is twice as common as "orange" and "pear", and four times as common as "apple".
var fruits = ["apple", "orange", "pear", "banana"]
var probabilities = [0.5, 1, 1, 2];

var random = RandomNumberGenerator.new()
print(fruits[random.rand_weighted(probabilities)])</literal_block>
                </div>
                <div aria-labelledby="tab-11-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-11-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Prints a random element using the weighted index that is returned by `RandWeighted()`.
// Here, "apple" will be returned twice as rarely as "orange" and "pear".
// "banana" is twice as common as "orange" and "pear", and four times as common as "apple".
string[] fruits = ["apple", "orange", "pear", "banana"];
float[] probabilities = [0.5f, 1, 1, 2];

var random = new RandomNumberGenerator();
GD.Print(fruits[random.RandWeighted(probabilities)]);</literal_block>
                </div>
            </container>
            <target refid="doc-random-number-generation-shuffle-bags"></target>
        </section>
        <section ids="better-randomness-using-shuffle-bags doc-random-number-generation-shuffle-bags" names='"better"\ randomness\ using\ shuffle\ bags doc_random_number_generation_shuffle_bags'>
            <title>"Better" randomness using shuffle bags</title>
            <paragraph>Taking the same example as above, we would like to pick fruits at random.
                However, relying on random number generation every time a fruit is selected can
                lead to a less <emphasis>uniform</emphasis> distribution. If the player is lucky (or unlucky), they
                could get the same fruit three or more times in a row.</paragraph>
            <paragraph>You can accomplish this using the <emphasis>shuffle bag</emphasis> pattern. It works by removing an
                element from the array after choosing it. After multiple selections, the array
                ends up empty. When that happens, you reinitialize it to its default value:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-12-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-12-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-12-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-12-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-12-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-12-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var _fruits = ["apple", "orange", "pear", "banana"]
# A copy of the fruits array so we can restore the original value into `fruits`.
var _fruits_full = []


func _ready():
    _fruits_full = _fruits.duplicate()
    _fruits.shuffle()

    for i in 100:
        print(get_fruit())


func get_fruit():
    if _fruits.is_empty():
        # Fill the fruits array again and shuffle it.
        _fruits = _fruits_full.duplicate()
        _fruits.shuffle()

    # Get a random fruit, since we shuffled the array,
    # and remove it from the `_fruits` array.
    var random_fruit = _fruits.pop_front()
    # Returns "apple", "orange", "pear", or "banana" every time the code runs, removing it from the array.
    # When all fruit are removed, it refills the array.
    return random_fruit</literal_block>
                </div>
                <div aria-labelledby="tab-12-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-12-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private Godot.Collections.Array&lt;string&gt; _fruits = ["apple", "orange", "pear", "banana"];
// A copy of the fruits array so we can restore the original value into `fruits`.
private Godot.Collections.Array&lt;string&gt; _fruitsFull;

public override void _Ready()
{
    _fruitsFull = _fruits.Duplicate();
    _fruits.Shuffle();

    for (int i = 0; i &lt; 100; i++)
    {
        GD.Print(GetFruit());
    }
}

public string GetFruit()
{
    if(_fruits.Count == 0)
    {
        // Fill the fruits array again and shuffle it.
        _fruits = _fruitsFull.Duplicate();
        _fruits.Shuffle();
    }

    // Get a random fruit, since we shuffled the array,
    string randomFruit = _fruits[0];
    // and remove it from the `_fruits` array.
    _fruits.RemoveAt(0);
    // Returns "apple", "orange", "pear", or "banana" every time the code runs, removing it from the array.
    // When all fruit are removed, it refills the array.
    return randomFruit;
}</literal_block>
                </div>
            </container>
            <paragraph>When running the above code, there is a chance to get the same fruit twice in a
                row. Once we picked a fruit, it will no longer be a possible return value unless
                the array is now empty. When the array is empty, we reset it back to its default
                value, making it possible to have the same fruit again, but only once.</paragraph>
        </section>
        <section ids="random-noise" names="random\ noise">
            <title>Random noise</title>
            <paragraph>The random number generation shown above can show its limits when you need a
                value that <emphasis>slowly</emphasis> changes depending on the input. The input can be a position,
                time, or anything else.</paragraph>
            <paragraph>To achieve this, you can use random <emphasis>noise</emphasis> functions. Noise functions are
                especially popular in procedural generation to generate realistic-looking
                terrain. Godot provides <reference internal="True" refuri="../../classes/class_fastnoiselite#class-fastnoiselite"><inline classes="std std-ref">FastNoiseLite</inline></reference> for this, which supports
                1D, 2D and 3D noise. Here's an example with 1D noise:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-13-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-13-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-13-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-13-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-13-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-13-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var _noise = FastNoiseLite.new()

func _ready():
    # Configure the FastNoiseLite instance.
    _noise.noise_type = FastNoiseLite.NoiseType.TYPE_SIMPLEX_SMOOTH
    _noise.seed = randi()
    _noise.fractal_octaves = 4
    _noise.frequency = 1.0 / 20.0

    for i in 100:
        # Prints a slowly-changing series of floating-point numbers
        # between -1.0 and 1.0.
        print(_noise.get_noise_1d(i))</literal_block>
                </div>
                <div aria-labelledby="tab-13-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-13-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private FastNoiseLite _noise = new FastNoiseLite();

public override void _Ready()
{
    // Configure the FastNoiseLite instance.
    _noise.NoiseType = FastNoiseLite.NoiseTypeEnum.SimplexSmooth;
    _noise.Seed = (int)GD.Randi();
    _noise.FractalOctaves = 4;
    _noise.Frequency = 1.0f / 20.0f;

    for (int i = 0; i &lt; 100; i++)
    {
        GD.Print(_noise.GetNoise1D(i));
    }
}</literal_block>
                </div>
            </container>
        </section>
        <section ids="cryptographically-secure-pseudorandom-number-generation" names="cryptographically\ secure\ pseudorandom\ number\ generation">
            <title>Cryptographically secure pseudorandom number generation</title>
            <paragraph>So far, the approaches mentioned above are <strong>not</strong> suitable for
                <emphasis>cryptographically secure</emphasis> pseudorandom number generation (CSPRNG). This is fine
                for games, but this is not sufficient for scenarios where encryption,
                authentication or signing is involved.</paragraph>
            <paragraph>Godot offers a <reference internal="True" refuri="../../classes/class_crypto#class-crypto"><inline classes="std std-ref">Crypto</inline></reference> class for this. This class can perform
                asymmetric key encryption/decryption, signing/verification, while also
                generating cryptographically secure random bytes, RSA keys, HMAC digests, and
                self-signed <reference internal="True" refuri="../../classes/class_x509certificate#class-x509certificate"><inline classes="std std-ref">X509Certificate</inline></reference>s.</paragraph>
            <paragraph>The downside of <abbreviation explanation="Cryptographically secure pseudorandom number generation">CSPRNG</abbreviation>
                is that it's much slower than standard pseudorandom number generation. Its API
                is also less convenient to use. As a result,
                <abbreviation explanation="Cryptographically secure pseudorandom number generation">CSPRNG</abbreviation>
                should be avoided for gameplay elements.</paragraph>
            <paragraph>Example of using the Crypto class to generate 2 random integers between <literal>0</literal>
                and <literal>2^32 - 1</literal> (inclusive):</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">var crypto := Crypto.new()
# Request as many bytes as you need, but try to minimize the amount
# of separate requests to improve performance.
# Each 32-bit integer requires 4 bytes, so we request 8 bytes.
var byte_array := crypto.generate_random_bytes(8)

# Use the ``decode_u32()`` method from PackedByteArray to decode a 32-bit unsigned integer
# from the beginning of `byte_array`. This method doesn't modify `byte_array`.
var random_int_1 := byte_array.decode_u32(0)
# Do the same as above, but with an offset of 4 bytes since we've already decoded
# the first 4 bytes previously.
var random_int_2 := byte_array.decode_u32(4)

prints("Random integers:", random_int_1, random_int_2)</literal_block>
            <seealso>
                <paragraph>See <reference internal="True" refuri="../../classes/class_packedbytearray#class-packedbytearray"><inline classes="std std-ref">PackedByteArray</inline></reference>'s documentation for other methods you can
                    use to decode the generated bytes into various types of data, such as
                    integers or floats.</paragraph>
            </seealso>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
