<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/2d/particle_systems_2d.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-particle-systems-2d"></target>
    <section ids="d-particle-systems doc-particle-systems-2d" names="2d\ particle\ systems doc_particle_systems_2d">
        <title>2D particle systems</title>
        <section ids="intro" names="intro">
            <title>Intro</title>
            <paragraph>Particle systems are used to simulate complex physical effects,
                such as sparks, fire, magic particles, smoke, mist, etc.</paragraph>
            <paragraph>The idea is that a "particle" is emitted at a fixed interval and with a
                fixed lifetime. During its lifetime, every particle will have the same
                base behavior. What makes each particle different from the rest and provides a more
                organic look is the "randomness" associated with each parameter. In
                essence, creating a particle system means setting base physics
                parameters and then adding randomness to them.</paragraph>
            <section ids="particle-nodes" names="particle\ nodes">
                <title>Particle nodes</title>
                <paragraph>Godot provides two different nodes for 2D particles, <reference internal="True" refuri="../../classes/class_gpuparticles2d#class-gpuparticles2d"><inline classes="std std-ref">GPUParticles2D</inline></reference>
                    and <reference internal="True" refuri="../../classes/class_cpuparticles2d#class-cpuparticles2d"><inline classes="std std-ref">CPUParticles2D</inline></reference>. GPUParticles2D is more advanced and uses the
                    GPU to process particle effects. CPUParticles2D is a CPU-driven option with
                    near-feature parity with GPUParticles2D, but lower performance when using large
                    amounts of particles. On the other hand, CPUParticles2D may perform better on
                    low-end systems or in GPU-bottlenecked situations.</paragraph>
                <paragraph>While GPUParticles2D is configured via a <reference internal="True" refuri="../../classes/class_particleprocessmaterial#class-particleprocessmaterial"><inline classes="std std-ref">ParticleProcessMaterial</inline></reference>
                    (and optionally with a custom shader), the matching options are provided via
                    node properties in CPUParticles2D (with the exception of the trail settings).</paragraph>
                <paragraph>Going forward there are no plans to add new features to CPUParticles2D, though
                    pull requests to add features already in GPUParticles2D will be accepted. For
                    that reason we recommend using GPUParticles2D unless you have an explicit reason
                    not to.</paragraph>
                <paragraph>You can convert a CPUParticles2D node into a GPUParticles2D node by clicking on
                    the node in the scene tree, selecting the 2D workspace, and selecting
                    <strong>CPUParticles2D &gt; Convert to GPUParticles2D</strong> in the toolbar.</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/particles_convert.webp'}" original_uri="img/particles_convert.webp" uri="tutorials/2d/img/particles_convert.webp"></image>
                <paragraph>It is also possible to convert a GPUParticles2D node to a CPUParticles2D node,
                    however there may be issues if you use GPU-only features.</paragraph>
                <paragraph>The rest of this tutorial is going to use the GPUParticles2D node. First, add a GPUParticles2D
                    node to your scene. After creating that node you will notice that only a white dot was created,
                    and that there is a warning icon next to your GPUParticles2D node in the scene dock. This
                    is because the node needs a ParticleProcessMaterial to function.</paragraph>
            </section>
            <section ids="particleprocessmaterial" names="particleprocessmaterial">
                <title>ParticleProcessMaterial</title>
                <paragraph>To add a process material to your particles node, go to <literal>Process Material</literal> in
                    your inspector panel. Click on the box next to <literal>Material</literal>, and from the dropdown
                    menu select <literal>New ParticleProcessMaterial</literal>.</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/particles_material.webp'}" original_uri="img/particles_material.webp" uri="tutorials/2d/img/particles_material.webp"></image>
                <paragraph>Your GPUParticles2D node should now be emitting
                    white points downward.</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/particles1.png'}" original_uri="img/particles1.png" uri="tutorials/2d/img/particles1.png"></image>
            </section>
            <section ids="texture" names="texture">
                <title>Texture</title>
                <paragraph>A particle system can use a single texture or an animation <emphasis>flipbook</emphasis>. A
                    flipbook is a texture that contains several frames of animation that can be
                    played back, or chosen at random during emission. This is equivalent to a
                    spritesheet for particles.</paragraph>
                <paragraph>The texture is set via the <strong>Texture</strong> property:</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/particles2.webp'}" original_uri="img/particles2.webp" uri="tutorials/2d/img/particles2.webp"></image>
                <target refid="doc-particle-systems-2d-using-flipbook"></target>
                <section ids="using-an-animation-flipbook doc-particle-systems-2d-using-flipbook" names="using\ an\ animation\ flipbook doc_particle_systems_2d_using_flipbook">
                    <title>Using an animation flipbook</title>
                    <paragraph>Particle flipbooks are suited to reproduce complex effects such as smoke, fire,
                        explosions. They can also be used to introduce random texture variation, by
                        making every particle use a different texture. You can find existing particle
                        flipbook images online, or pre-render them using external tools such as <reference name="Blender" refuri="https://www.blender.org/">Blender</reference> or <reference name="EmberGen" refuri="https://jangafx.com/software/embergen/">EmberGen</reference>.</paragraph>
                    <figure align="center" ids="id1">
                        <image alt="Example of a particle system that uses a flipbook texture" candidates="{'*': 'tutorials/2d/img/particles_flipbook_result.webp'}" original_uri="img/particles_flipbook_result.webp" uri="tutorials/2d/img/particles_flipbook_result.webp"></image>
                        <caption>Example of a particle system that uses a flipbook texture</caption>
                    </figure>
                    <paragraph>Using an animation flipbook requires additional configuration compared to a
                        single texture. For demonstration purposes, we'll use this texture with 5
                        columns and 7 rows (right-click and choose <strong>Save asâ€¦</strong>):</paragraph>
                    <figure align="center" ids="id2">
                        <image alt="Particle flipbook texture example" candidates="{'*': 'tutorials/2d/img/particles_flipbook_example.webp'}" original_uri="img/particles_flipbook_example.webp" uri="tutorials/2d/img/particles_flipbook_example.webp" width="240"></image>
                        <caption>Credit: <reference name="JoesAlotofthings" refuri="https://opengameart.org/content/alot-of-particles-indispersal-special-effect-alotofparticles30">JoesAlotofthings</reference>
                            (CC BY 4.0)</caption>
                    </figure>
                    <paragraph>To use an animation flipbook, you must create a new CanvasItemMaterial in the
                        Material section of the GPUParticles2D (or CPUParticles2D) node:</paragraph>
                    <figure align="center" ids="id3">
                        <image alt="Creating a CanvasItemMaterial at the bottom of the particles node inspector" candidates="{'*': 'tutorials/2d/img/particles_flipbook_create_canvasitemmaterial.webp'}" original_uri="img/particles_flipbook_create_canvasitemmaterial.webp" uri="tutorials/2d/img/particles_flipbook_create_canvasitemmaterial.webp"></image>
                        <caption>Creating a CanvasItemMaterial at the bottom of the particles node inspector</caption>
                    </figure>
                    <paragraph>In this CanvasItemMaterial, enable <strong>Particle Animation</strong> and set <strong>H Frames</strong> and <strong>V Frames</strong>
                        to the number of columns and rows present in your flipbook texture:</paragraph>
                    <figure align="center" ids="id4">
                        <image alt="Configuring the CanvasItemMaterial for the example flipbook texture" candidates="{'*': 'tutorials/2d/img/particles_flipbook_configure_canvasitemmaterial.webp'}" original_uri="img/particles_flipbook_configure_canvasitemmaterial.webp" uri="tutorials/2d/img/particles_flipbook_configure_canvasitemmaterial.webp"></image>
                        <caption>Configuring the CanvasItemMaterial for the example flipbook texture</caption>
                    </figure>
                    <paragraph>Once this is done, the <reference internal="True" refuri="particle_process_material_2d#doc-particle-systems-2d-animation"><inline classes="std std-ref">Animation section</inline></reference>
                        in ParticleProcessMaterial (for GPUParticles2D) or in the CPUParticles2D inspector
                        will be effective.</paragraph>
                    <tip>
                        <paragraph>If your flipbook texture has a black background instead of a transparent
                            background, you will also need to set the blend mode to <strong>Add</strong> instead of
                            <strong>Mix</strong> for correct display. Alternatively, you can modify the texture to
                            have a transparent background in an image editor. In <reference name="GIMP" refuri="https://gimp.org">GIMP</reference>,
                            this can be done using the <strong>Color &gt; Color to Alpha</strong> menu.</paragraph>
                    </tip>
                </section>
            </section>
        </section>
        <section ids="time-parameters" names="time\ parameters">
            <title>Time parameters</title>
            <section ids="lifetime" names="lifetime">
                <title>Lifetime</title>
                <paragraph>The time in seconds that every particle will stay alive. When lifetime
                    ends, a new particle is created to replace it.</paragraph>
                <paragraph>Lifetime: 0.5</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/paranim14.gif'}" original_uri="img/paranim14.gif" uri="tutorials/2d/img/paranim14.gif"></image>
                <paragraph>Lifetime: 4.0</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/paranim15.gif'}" original_uri="img/paranim15.gif" uri="tutorials/2d/img/paranim15.gif"></image>
            </section>
            <section ids="one-shot" names="one\ shot">
                <title>One Shot</title>
                <paragraph>When enabled, a GPUParticles2D node will emit all of its particles once
                    and then never again.</paragraph>
            </section>
            <section ids="preprocess" names="preprocess">
                <title>Preprocess</title>
                <paragraph>Particle systems begin with zero particles emitted, then start emitting.
                    This can be an inconvenience when loading a scene and systems like
                    a torch, mist, etc. begin emitting the moment you enter. Preprocess is
                    used to let the system process a given number of seconds before it is
                    actually drawn the first time.</paragraph>
            </section>
            <section ids="speed-scale" names="speed\ scale">
                <title>Speed Scale</title>
                <paragraph>The speed scale has a default value of <literal>1</literal> and is used to adjust the
                    speed of a particle system. Lowering the value will make the particles
                    slower while increasing the value will make the particles much faster.</paragraph>
            </section>
            <section ids="explosiveness" names="explosiveness">
                <title>Explosiveness</title>
                <paragraph>If lifetime is <literal>1</literal> and there are 10 particles, it means a particle
                    will be emitted every 0.1 seconds. The explosiveness parameter changes
                    this, and forces particles to be emitted all together. Ranges are:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>0: Emit particles at regular intervals (default value).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>1: Emit all particles simultaneously.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>Values in the middle are also allowed. This feature is useful for
                    creating explosions or sudden bursts of particles:</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/paranim18.gif'}" original_uri="img/paranim18.gif" uri="tutorials/2d/img/paranim18.gif"></image>
            </section>
            <section ids="randomness" names="randomness">
                <title>Randomness</title>
                <paragraph>All physics parameters can be randomized. Random values range from <literal>0</literal> to
                    <literal>1</literal>. The formula to randomize a parameter is:</paragraph>
                <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">initial_value = param_value + param_value * randomness</literal_block>
            </section>
            <section ids="fixed-fps" names="fixed\ fps">
                <title>Fixed FPS</title>
                <paragraph>This setting can be used to set the particle system to render at a fixed
                    FPS. For instance, changing the value to <literal>2</literal> will make the particles render
                    at 2 frames per second. Note this does not slow down the particle system itself.</paragraph>
                <note>
                    <paragraph>Godot 4.3 does not currently support physics interpolation for 2D particles.
                        As a workaround, disable physics interpolation for the particles node by setting
                        <strong>Node &gt; Physics Interpolation &gt; Mode</strong> at the bottom of the inspector.</paragraph>
                </note>
            </section>
            <section ids="fract-delta" names="fract\ delta">
                <title>Fract Delta</title>
                <paragraph>Setting Fract Delta to <literal>true</literal> results in fractional delta calculation,
                    which has a smoother particles display effect.
                    This increased smoothness stems from higher accuracy.
                    The difference is more noticeable in systems with high randomness or fast-moving particles.
                    It helps maintain the visual consistency of the particle system,
                    making sure that each particle's motion aligns with its actual lifespan.
                    Without it, particles might appear to jump or move more than they should in a single frame
                    if they are emitted at a point within the frame.
                    The greater accuracy has a performance tradeoff,
                    particularly in systems with a higher amount of particles.</paragraph>
            </section>
        </section>
        <section ids="drawing-parameters" names="drawing\ parameters">
            <title>Drawing parameters</title>
            <section ids="visibility-rect" names="visibility\ rect">
                <title>Visibility Rect</title>
                <paragraph>The visibility rectangle controls the visibility of the particles on screen. If this rectangle is outside of the viewport, the engine will not render the particles on screen.</paragraph>
                <paragraph>The rectangle's <literal>W</literal> and <literal>H</literal> properties respectively control its Width and its Height.
                    The <literal>X</literal> and <literal>Y</literal> properties control the position of the upper-left
                    corner of the rectangle, relative to the particle emitter.</paragraph>
                <paragraph>You can have Godot generate a Visibility Rect automatically using the toolbar above the 2d view. To do so, select the GPUParticles2D node and Click <literal>Particles &gt; Generate Visibility Rect</literal>. Godot will simulate the Particles2D node emitting particles for a few seconds and set the rectangle to fit the surface the particles take.</paragraph>
                <paragraph>You can control the emit duration with the <literal>Generation Time (sec)</literal> option. The maximum value is 25 seconds. If you need more time for your particles to move around, you can temporarily change the <literal>preprocess</literal> duration on the Particles2D node.</paragraph>
            </section>
            <section ids="local-coords" names="local\ coords">
                <title>Local Coords</title>
                <paragraph>By default this option is on, and it means that the space that particles
                    are emitted to is relative to the node. If the node is moved, all
                    particles are moved with it:</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/paranim20.gif'}" original_uri="img/paranim20.gif" uri="tutorials/2d/img/paranim20.gif"></image>
                <paragraph>If disabled, particles will emit to global space, meaning that if the
                    node is moved, already emitted particles are not affected:</paragraph>
                <image candidates="{'*': 'tutorials/2d/img/paranim21.gif'}" original_uri="img/paranim21.gif" uri="tutorials/2d/img/paranim21.gif"></image>
            </section>
            <section ids="draw-order" names="draw\ order">
                <title>Draw Order</title>
                <paragraph>This controls the order in which individual particles are drawn. <literal>Index</literal>
                    means particles are drawn according to their emission order (default).
                    <literal>Lifetime</literal> means they are drawn in order of remaining lifetime.</paragraph>
            </section>
        </section>
        <section ids="particle-process-material-settings" names="particle\ process\ material\ settings">
            <title>Particle Process Material Settings</title>
            <paragraph>For information on the settings in the ParticleProcessMaterial see <reference internal="True" refuri="particle_process_material_2d#doc-particle-process-material-2d"><inline classes="std std-ref">this page</inline></reference>.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
