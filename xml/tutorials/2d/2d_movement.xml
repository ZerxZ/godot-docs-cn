<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/2d/2d_movement.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-2d-movement"></target>
    <section ids="d-movement-overview doc-2d-movement" names="2d\ movement\ overview doc_2d_movement">
        <title>2D movement overview</title>
        <section ids="introduction" names="introduction">
            <title>Introduction</title>
            <paragraph>Every beginner has been there: "How do I move my character?" Depending on the
                style of game you're making, you may have special requirements, but in general
                the movement in most 2D games is based on a small number of designs.</paragraph>
            <paragraph>We'll use <reference internal="True" refuri="../../classes/class_characterbody2d#class-characterbody2d"><inline classes="std std-ref">CharacterBody2D</inline></reference> for these examples,
                but the principles will apply to other node types (Area2D, RigidBody2D) as well.</paragraph>
            <target refid="doc-2d-movement-setup"></target>
        </section>
        <section ids="setup doc-2d-movement-setup" names="setup doc_2d_movement_setup">
            <title>Setup</title>
            <paragraph>Each example below uses the same scene setup. Start with a <literal>CharacterBody2D</literal> with two
                children: <literal>Sprite2D</literal> and <literal>CollisionShape2D</literal>. You can use the Godot icon ("icon.png")
                for the Sprite2D's texture or use any other 2D image you have.</paragraph>
            <paragraph>Open <literal>Project -&gt; Project Settings</literal> and select the "Input Map" tab. Add the following
                input actions (see <reference internal="True" refuri="../inputs/inputevent#doc-inputevent"><inline classes="std std-ref">InputEvent</inline></reference> for details):</paragraph>
            <image candidates="{'*': 'tutorials/2d/img/movement_inputs.webp'}" original_uri="img/movement_inputs.webp" uri="tutorials/2d/img/movement_inputs.webp"></image>
        </section>
        <section ids="way-movement" names="8-way\ movement">
            <title>8-way movement</title>
            <paragraph>In this scenario, you want the user to press the four directional keys (up/left/down/right
                or W/A/S/D) and move in the selected direction. The name "8-way movement" comes from the
                fact that the player can move diagonally by pressing two keys at the same time.</paragraph>
            <video_node align="default" alt="8-way movement" autoplay="True" caption="" controls="True" controlslist="" figwidth="" height="" klass="" loop="True" muted="True" playsinline="False" poster="" preload="auto" sources="['tutorials/2d/video/movement_8way.webm',\ 'video/webm',\ False]" width="100%">
            </video_node>
            <paragraph>Add a script to the character body and add the following code:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends CharacterBody2D

@export var speed = 400

func get_input():
    var input_direction = Input.get_vector("left", "right", "up", "down")
    velocity = input_direction * speed

func _physics_process(delta):
    get_input()
    move_and_slide()</literal_block>
                </div>
                <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class Movement : CharacterBody2D
{
    [Export]
    public int Speed { get; set; } = 400;

    public void GetInput()
    {

        Vector2 inputDirection = Input.GetVector("left", "right", "up", "down");
        Velocity = inputDirection * Speed;
    }

    public override void _PhysicsProcess(double delta)
    {
        GetInput();
        MoveAndSlide();
    }
}</literal_block>
                </div>
            </container>
            <paragraph>In the <literal>get_input()</literal> function, we use <reference internal="True" refuri="../../classes/class_input#class-input"><inline classes="std std-ref">Input</inline></reference> <literal>get_vector()</literal> to check for the
                four key events and sum return a direction vector.</paragraph>
            <paragraph>We can then set our velocity by multiplying this direction vector, which has a
                length of <literal>1</literal>, by our desired speed.</paragraph>
            <tip>
                <paragraph>If you've never used vector math before, or need a refresher,
                    you can see an explanation of vector usage in Godot at <reference internal="True" refuri="../math/vector_math#doc-vector-math"><inline classes="std std-ref">Vector math</inline></reference>.</paragraph>
            </tip>
            <note>
                <paragraph>If the code above does nothing when you press the keys, double-check that
                    you've set up input actions correctly as described in the
                    <reference internal="True" refid="doc-2d-movement-setup"><inline classes="std std-ref">Setup</inline></reference> part of this tutorial.</paragraph>
            </note>
        </section>
        <section ids="rotation-movement" names="rotation\ +\ movement">
            <title>Rotation + movement</title>
            <paragraph>This type of movement is sometimes called "Asteroids-style" because it resembles
                how that classic arcade game worked. Pressing left/right rotates the character,
                while up/down moves it forward or backward in whatever direction it's facing.</paragraph>
            <video_node align="default" alt="Rotation + movement" autoplay="True" caption="" controls="True" controlslist="" figwidth="" height="" klass="" loop="True" muted="True" playsinline="False" poster="" preload="auto" sources="['tutorials/2d/video/movement_rotate_keyboard.webm',\ 'video/webm',\ False]" width="100%">
            </video_node>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends CharacterBody2D

@export var speed = 400
@export var rotation_speed = 1.5

var rotation_direction = 0

func get_input():
    rotation_direction = Input.get_axis("left", "right")
    velocity = transform.x * Input.get_axis("down", "up") * speed

func _physics_process(delta):
    get_input()
    rotation += rotation_direction * rotation_speed * delta
    move_and_slide()</literal_block>
                </div>
                <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class Movement : CharacterBody2D
{
    [Export]
    public int Speed { get; set; } = 400;

    [Export]
    public float RotationSpeed { get; set; } = 1.5f;

    private float _rotationDirection;

    public void GetInput()
    {
        _rotationDirection = Input.GetAxis("left", "right");
        Velocity = Transform.X * Input.GetAxis("down", "up") * Speed;
    }

    public override void _PhysicsProcess(double delta)
    {
        GetInput();
        Rotation += _rotationDirection * RotationSpeed * (float)delta;
        MoveAndSlide();
    }
}</literal_block>
                </div>
            </container>
            <paragraph>Here we've added two variables to track our rotation direction and speed.
                The rotation is applied directly to the body's <literal>rotation</literal> property.</paragraph>
            <paragraph>To set the velocity, we use the body's <literal>transform.x</literal> which is a vector pointing
                in the body's "forward" direction, and multiply that by the speed.</paragraph>
        </section>
        <section ids="rotation-movement-mouse" names="rotation\ +\ movement\ (mouse)">
            <title>Rotation + movement (mouse)</title>
            <paragraph>This style of movement is a variation of the previous one. This time, the direction
                is set by the mouse position instead of the keyboard. The character will always
                "look at" the mouse pointer. The forward/back inputs remain the same, however.</paragraph>
            <video_node align="default" alt="Rotation + movement (mouse)" autoplay="True" caption="" controls="True" controlslist="" figwidth="" height="" klass="" loop="True" muted="True" playsinline="False" poster="" preload="auto" sources="['tutorials/2d/video/movement_rotate_mouse.webm',\ 'video/webm',\ False]" width="100%">
            </video_node>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends CharacterBody2D

@export var speed = 400

func get_input():
    look_at(get_global_mouse_position())
    velocity = transform.x * Input.get_axis("down", "up") * speed

func _physics_process(delta):
    get_input()
    move_and_slide()</literal_block>
                </div>
                <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class Movement : CharacterBody2D
{
    [Export]
    public int Speed { get; set; } = 400;

    public void GetInput()
    {
        LookAt(GetGlobalMousePosition());
        Velocity = Transform.X * Input.GetAxis("down", "up") * Speed;
    }

    public override void _PhysicsProcess(double delta)
    {
        GetInput();
        MoveAndSlide();
    }
}</literal_block>
                </div>
            </container>
            <paragraph>Here we're using the <reference internal="True" refuri="../../classes/class_node2d#class-node2d"><inline classes="std std-ref">Node2D</inline></reference> <literal>look_at()</literal> method to
                point the player towards the mouse's position. Without this function, you
                could get the same effect by setting the angle like this:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-3-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-3-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-3-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">rotation = get_global_mouse_position().angle_to_point(position)</literal_block>
                </div>
                <div aria-labelledby="tab-3-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-3-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">var rotation = GetGlobalMousePosition().AngleToPoint(Position);</literal_block>
                </div>
            </container>
        </section>
        <section ids="click-and-move" names="click-and-move">
            <title>Click-and-move</title>
            <paragraph>This last example uses only the mouse to control the character. Clicking
                on the screen will cause the player to move to the target location.</paragraph>
            <video_node align="default" alt="Click-and-move" autoplay="True" caption="" controls="True" controlslist="" figwidth="" height="" klass="" loop="True" muted="True" playsinline="False" poster="" preload="auto" sources="['tutorials/2d/video/movement_click.webm',\ 'video/webm',\ False]" width="100%">
            </video_node>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-4-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-4-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-4-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends CharacterBody2D

@export var speed = 400

var target = position

func _input(event):
    # Use is_action_pressed to only accept single taps as input instead of mouse drags.
    if event.is_action_pressed(&amp;"click"):
        target = get_global_mouse_position()

func _physics_process(delta):
    velocity = position.direction_to(target) * speed
    # look_at(target)
    if position.distance_to(target) &gt; 10:
        move_and_slide()</literal_block>
                </div>
                <div aria-labelledby="tab-4-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-4-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class Movement : CharacterBody2D
{
    [Export]
    public int Speed { get; set; } = 400;

    private Vector2 _target;

    public override void _Input(InputEvent @event)
    {
        // Use IsActionPressed to only accept single taps as input instead of mouse drags.
        if (@event.IsActionPressed("click"))
        {
            _target = GetGlobalMousePosition();
        }
    }

    public override void _PhysicsProcess(double delta)
    {
        Velocity = Position.DirectionTo(_target) * Speed;
        // LookAt(_target);
        if (Position.DistanceTo(_target) &gt; 10)
        {
            MoveAndSlide();
        }
    }
}</literal_block>
                </div>
            </container>
            <paragraph>Note the <literal>distance_to()</literal> check we make prior to movement. Without this test,
                the body would "jitter" upon reaching the target position, as it moves
                slightly past the position and tries to move back, only to move too far and
                repeat.</paragraph>
            <paragraph>Uncommenting the <literal>look_at()</literal> line will also turn the body to point in its
                direction of motion if you prefer.</paragraph>
            <tip>
                <paragraph>This technique can also be used as the basis of a "following" character.
                    The <literal>target</literal> position can be that of any object you want to move to.</paragraph>
            </tip>
        </section>
        <section ids="summary" names="summary">
            <title>Summary</title>
            <paragraph>You may find these code samples useful as starting points for your own projects.
                Feel free to use them and experiment with them to see what you can make.</paragraph>
            <paragraph>You can download this sample project here:
                <reference name="2d_movement_starter.zip" refuri="https://github.com/godotengine/godot-docs-project-starters/releases/download/latest-4.x/2d_movement_starter.zip">2d_movement_starter.zip</reference><target ids="d-movement-starter-zip" names="2d_movement_starter.zip" refuri="https://github.com/godotengine/godot-docs-project-starters/releases/download/latest-4.x/2d_movement_starter.zip"></target></paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
