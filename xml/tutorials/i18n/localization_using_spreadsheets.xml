<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/i18n/localization_using_spreadsheets.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-localization-using-spreadsheets"></target>
    <section ids="localization-using-spreadsheets doc-localization-using-spreadsheets" names="localization\ using\ spreadsheets doc_localization_using_spreadsheets">
        <title>Localization using spreadsheets</title>
        <paragraph>Spreadsheets are one of the most common formats for localizing games.
            In Godot, spreadsheets are supported through the CSV format. This
            guide explains how to work with CSVs.</paragraph>
        <paragraph>The CSV files <strong>must</strong> be saved with UTF-8 encoding
            without a <reference name="byte order mark" refuri="https://en.wikipedia.org/wiki/Byte_order_mark">byte order mark</reference>.</paragraph>
        <warning>
            <paragraph>By default, Microsoft Excel will always save CSV files with ANSI encoding
                rather than UTF-8. There is no built-in way to do this, but there are
                workarounds as described
                <reference name="here" refuri="https://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding">here</reference>.</paragraph>
            <paragraph>We recommend using <reference name="LibreOffice" refuri="https://www.libreoffice.org/">LibreOffice</reference> or Google Sheets instead.</paragraph>
        </warning>
        <section ids="formatting" names="formatting">
            <title>Formatting</title>
            <paragraph>CSV files must be formatted as follows:</paragraph>
            <table>
                <tgroup cols="4">
                    <colspec colwidth="8"></colspec>
                    <colspec colwidth="10"></colspec>
                    <colspec colwidth="10"></colspec>
                    <colspec colwidth="10"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>keys</paragraph>
                            </entry>
                            <entry>
                                <paragraph>&lt;lang1&gt;</paragraph>
                            </entry>
                            <entry>
                                <paragraph>&lt;lang2&gt;</paragraph>
                            </entry>
                            <entry>
                                <paragraph>&lt;langN&gt;</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>KEY1</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>KEY2</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>KEYN</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                            <entry>
                                <paragraph>string</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <paragraph>The "lang" tags must represent a language, which must be one of the <reference internal="True" refuri="locales#doc-locales"><inline classes="std std-ref">valid
                        locales</inline></reference> supported by the engine, or they must start with an underscore (<literal>_</literal>),
                which means the related column is served as comment and won't be imported.
                The <literal>KEY</literal> tags must be unique and represent a string universally. By convention, these are
                usually in uppercase to differentiate them from other strings. These keys will be replaced at
                runtime by the matching translated string. Note that the case is important:
                <literal>KEY1</literal> and <literal>Key1</literal> will be different keys.
                The top-left cell is ignored and can be left empty or having any content.
                Here's an example:</paragraph>
            <table>
                <tgroup cols="4">
                    <colspec colwidth="7"></colspec>
                    <colspec colwidth="23"></colspec>
                    <colspec colwidth="24"></colspec>
                    <colspec colwidth="30"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>keys</paragraph>
                            </entry>
                            <entry>
                                <paragraph>en</paragraph>
                            </entry>
                            <entry>
                                <paragraph>es</paragraph>
                            </entry>
                            <entry>
                                <paragraph>ja</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>GREET</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Hello, friend!</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Hola, amigo!</paragraph>
                            </entry>
                            <entry>
                                <paragraph>こんにちは</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>ASK</paragraph>
                            </entry>
                            <entry>
                                <paragraph>How are you?</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Cómo está?</paragraph>
                            </entry>
                            <entry>
                                <paragraph>元気ですか</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>BYE</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Goodbye</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Adiós</paragraph>
                            </entry>
                            <entry>
                                <paragraph>さようなら</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>QUOTE</paragraph>
                            </entry>
                            <entry>
                                <paragraph>"Hello" said the man.</paragraph>
                            </entry>
                            <entry>
                                <paragraph>"Hola" dijo el hombre.</paragraph>
                            </entry>
                            <entry>
                                <paragraph>「こんにちは」男は言いました</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <paragraph>The same example is shown below as a comma-separated plain text file,
                which should be the result of editing the above in a spreadsheet.
                When editing the plain text version, be sure to enclose with double
                quotes any message that contains commas, line breaks or double quotes,
                so that commas are not parsed as delimiters, line breaks don't create new
                entries and double quotes are not parsed as enclosing characters. Be sure
                to escape any double quotes a message may contain by preceding them with
                another double quote. Alternatively, you can select another delimiter than
                comma in the import options.</paragraph>
            <literal_block force="False" highlight_args="{}" language="none" linenos="False" xml:space="preserve">keys,en,es,ja
GREET,"Hello, friend!","Hola, amigo!",こんにちは
ASK,How are you?,Cómo está?,元気ですか
BYE,Goodbye,Adiós,さようなら
QUOTE,"""Hello"" said the man.","""Hola"" dijo el hombre.",「こんにちは」男は言いました</literal_block>
            <section ids="specifying-plural-forms" names="specifying\ plural\ forms">
                <title>Specifying plural forms</title>
                <paragraph>Since Godot 4.6, it is possible to specify
                    <reference internal="True" refuri="internationalizing_games#doc-internationalizing-games-pluralization"><inline classes="std std-ref">plural forms</inline></reference> in CSV files.</paragraph>
                <paragraph>This is done by adding a column named <literal>?plural</literal> anywhere in the table
                    (except on the first column, which is reserved for translation keys).
                    By convention, it's recommended to place it on the second column.
                    Note that in the example below, the key column is the one that contains English
                    localization.</paragraph>
                <literal_block force="False" highlight_args="{}" language="none" linenos="False" xml:space="preserve">en,?plural,fr,ru,ja,zh
?pluralrule,,nplurals=2; plural=(n &gt;= 2);,,
There is %d apple,There are %d apples,Il y a %d pomme,Есть %d яблоко,リンゴが%d個あります,那里有%d个苹果
,,Il y a %d pommes,Есть %d яблока,,
,,,Есть %d яблок,,</literal_block>
                <note>
                    <paragraph>Automatic Control translation is not supported when using plural forms. You must
                        translate the string manually using <reference internal="True" refuri="../../classes/class_object#class-object-method-tr-n"><inline classes="std std-ref">tr_n()</inline></reference>.</paragraph>
                </note>
            </section>
            <section ids="specifying-translation-contexts" names="specifying\ translation\ contexts">
                <title>Specifying translation contexts</title>
                <paragraph>Since Godot 4.6, it is possible to specify
                    <reference internal="True" refuri="internationalizing_games#doc-internationalizing-games-translation-contexts"><inline classes="std std-ref">translation contexts</inline></reference>
                    in CSV files. This can be used to disambiguate identical source strings that
                    have different meanings. While this is generally not needed when using translation
                    keys <literal>LIKE_THIS</literal>, it's useful when using plain English text as translation keys.</paragraph>
                <paragraph>This is done by adding a column named <literal>?context</literal> column anywhere in the table
                    (except on the first column, which is reserved for translation keys).
                    By convention, it's recommended to place it on the second column, or after
                    <literal>?plural</literal> if it's also used. Note that in the example below, the key column
                    is the one that contains English localization.</paragraph>
                <literal_block force="False" highlight_args="{}" language="none" linenos="False" xml:space="preserve">en,?context,fr,ru,ja,zh
Letter,Alphabet,Lettre,Буква,字母,字母
Letter,Message,Courrier,Письмо,手紙,信件</literal_block>
                <note>
                    <paragraph>Automatic Control translation is not supported when using context. You must
                        translate the string manually using <reference internal="True" refuri="../../classes/class_object#class-object-method-tr"><inline classes="std std-ref">tr()</inline></reference>
                        or <reference internal="True" refuri="../../classes/class_object#class-object-method-tr-n"><inline classes="std std-ref">tr_n()</inline></reference>.</paragraph>
                </note>
            </section>
        </section>
        <section ids="csv-importer" names="csv\ importer">
            <title>CSV importer</title>
            <paragraph>Godot will treat CSV files as translations by default. It will import them
                and generate one or more compressed translation resource files next to it.</paragraph>
            <paragraph>Importing will also add the translation to the list of
                translations to load when the game runs, specified in project.godot (or the
                project settings). Godot allows loading and removing translations at
                runtime as well.</paragraph>
            <paragraph>Select the <literal>.csv</literal> file and access the <inline classes="role-ui">Import</inline> dock to define import
                options. You can toggle the compression of the imported translations, and
                select the delimiter to use when parsing the CSV file.</paragraph>
            <image candidates="{'*': 'tutorials/i18n/img/import_csv.webp'}" original_uri="img/import_csv.webp" uri="tutorials/i18n/img/import_csv.webp"></image>
            <paragraph>Be sure to click <inline classes="role-button role-ui">Reimport</inline> after any change to these options.</paragraph>
        </section>
        <section ids="loading-the-csv-file-as-a-translation" names="loading\ the\ csv\ file\ as\ a\ translation">
            <title>Loading the CSV file as a translation</title>
            <paragraph>Once a CSV file is imported, it is <strong>not</strong> automatically registered as a translation
                source for the project. Remember to follow the steps described in
                <reference internal="True" refuri="internationalizing_games#doc-internationalizing-games-configuring-imported-translation"><inline classes="std std-ref">Configuring the imported translation</inline></reference> so that the
                translation is actually used when running the project.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
