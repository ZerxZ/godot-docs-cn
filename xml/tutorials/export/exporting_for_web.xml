<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/export/exporting_for_web.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-exporting-for-web"></target>
    <section ids="exporting-for-the-web doc-exporting-for-web" names="exporting\ for\ the\ web 为\ web\ 导出 doc_exporting_for_web">
        <title>为 Web 导出</title>
        <seealso>
            <paragraph>这个页面描述的是如何将 Godot 项目导出到 HTML。如果你想要找的是从源码编译编辑器或导出模板二进制文件，请阅读 <reference internal="True" refuri="../../contributing/development/compiling/compiling_for_web#doc-compiling-for-web"><inline classes="std std-ref">为 Web 平台编译</inline></reference>。</paragraph>
        </seealso>
        <paragraph>HTML5 export allows publishing games made in Godot Engine to the browser.
            This requires support for <reference name="WebAssembly" refuri="https://webassembly.org/">WebAssembly</reference>, <reference name="WebGL" refuri="https://www.khronos.org/webgl/">WebGL</reference> and
            <reference name="SharedArrayBuffer" refuri="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer">SharedArrayBuffer</reference><target ids="sharedarraybuffer" names="sharedarraybuffer" refuri="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer"></target>
            in the user's browser.</paragraph>
        <attention>
            <paragraph>Projects written in C# using Godot 4 currently cannot be exported to the
                web. To use C# on web platforms, use Godot 3 instead.</paragraph>
        </attention>
        <tip>
            <paragraph>Use the browser-integrated developer console, usually opened
                with <literal classes="kbd">F12</literal> (<literal classes="kbd">Cmd + Option + I</literal> on macOS), to view
                <strong>debug information</strong> like JavaScript, engine, and WebGL errors.</paragraph>
        </tip>
        <attention>
            <paragraph>Godot 4's HTML5 exports currently cannot run on macOS and iOS due to upstream bugs
                with SharedArrayBuffer and WebGL 2.0. We recommend using
                <reference internal="True" refuri="exporting_for_macos#doc-exporting-for-macos"><inline classes="std std-ref">macOS</inline></reference> and <reference internal="True" refuri="exporting_for_ios#doc-exporting-for-ios"><inline classes="std std-ref">iOS</inline></reference>
                native export functionality instead, as it will also result in better performance.</paragraph>
            <paragraph>Godot 3's HTML5 exports are more compatible with various browsers in
                general, especially when using the GLES2 rendering backend (which only
                requires WebGL 1.0).</paragraph>
        </attention>
        <section ids="webgl-version" names="webgl\ version webgl\ 版本">
            <title>WebGL 版本</title>
            <paragraph>Godot 4.0 and later can only target WebGL 2.0 (using the Compatibility rendering
                method). There is no stable way to run Vulkan applications on the web yet.</paragraph>
            <paragraph>See <reference name="Can I use WebGL 2.0" refuri="https://caniuse.com/webgl2">Can I use WebGL 2.0</reference> for a list of browser
                versions supporting WebGL 2.0. Note that Safari has several issues with WebGL
                2.0 support that other browsers don't have, so we recommend using a
                Chromium-based browser or Firefox if possible.</paragraph>
            <target refid="doc-javascript-export-options"></target>
        </section>
        <section ids="export-options doc-javascript-export-options" names="export\ options 导出选项 doc_javascript_export_options">
            <title>导出选项</title>
            <paragraph>如果可以使用可运行的Web导出模板, 则编辑器中的 <emphasis>停止场景</emphasis> 和 <emphasis>播放编辑的场景</emphasis> 按钮之间会出现一个按钮, 可以在默认浏览器中快速打开游戏进行测试.</paragraph>
            <paragraph>If you plan to use <reference internal="True" refuri="../assets_pipeline/importing_images#doc-importing-images"><inline classes="std std-ref">VRAM compression</inline></reference> make sure that
                <strong>Vram Texture Compression</strong> is enabled for the targeted platforms (enabling
                both <strong>For Desktop</strong> and <strong>For Mobile</strong> will result in a bigger, but more
                compatible export).</paragraph>
            <paragraph>如果给出了 <strong>自定义HTML Shell</strong> 文件的路径, 则将使用它来代替默认的HTML页面. 请参阅 <reference internal="True" refuri="../platform/web/customizing_html5_shell#doc-customizing-html5-shell"><inline classes="std std-ref">导出自定义 HTML 页面</inline></reference>.</paragraph>
            <paragraph><strong>Head Include</strong> 被附加到生成的HTML页面的 <literal>&lt;head&gt;</literal> 元素中. 例如, 这允许加载webfonts和第三方JavaScript APIs, 包括CSS或运行JavaScript代码.</paragraph>
            <important>
                <paragraph>每个项目必须生成他们自己的HTML文件。在导出时，几个文本占位符会在生成的HTML文件中被替换，专门用于给定的导出选项。任何对该HTML文件的直接修改都会在以后的导出中丢失。要自定义生成的文件，请使用** 自定义HTML shell**选 项。</paragraph>
            </important>
        </section>
        <section ids="limitations" names="limitations 限制">
            <title>限制</title>
            <paragraph>出于安全和隐私的原因, 许多在本机平台上轻松工作的功能在Web平台上更加复杂. 以下列出了将Godot游戏移植到Web时应注意的限制.</paragraph>
            <target refid="doc-javascript-secure-contexts"></target>
            <important ids="doc-javascript-secure-contexts" names="doc_javascript_secure_contexts">
                <paragraph>浏览器供应商正在使越来越多的功能只在 <reference name="安全上下文" refuri="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts">安全上下文</reference><target ids="id1" names="安全上下文" refuri="https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts"></target> 中可用，这意味着这些功能只有在通过安全的HTTPS连接提供网页时才可用（localhost通常不受这种要求影响）。</paragraph>
            </important>
            <section ids="using-cookies-for-data-persistence" names="using\ cookies\ for\ data\ persistence 使用\ cookie\ 进行数据持久化">
                <title>使用 cookie 进行数据持久化</title>
                <paragraph>如果需要持久化 <literal>user://</literal> 文件系统, 用户必须 <strong>允许cookie</strong> (特别是IndexedDB). 当玩 <literal>iframe</literal> 中呈现的游戏时, 还必须启用 <strong>第三方</strong> cookie. 隐身/隐私浏览模式也会防止持久性.</paragraph>
                <paragraph>方法 <literal>OS.is_userfs_persistent()</literal> 可用于检查 <literal>user://</literal> 文件系统是否持久, 但在某些情况下会误报.</paragraph>
            </section>
            <section ids="background-processing" names="background\ processing 后台处理">
                <title>后台处理</title>
                <paragraph>这个标签页不再是用户浏览器的活动标签页时，项目就会被浏览器暂停。也就是说不会运行 <literal>_process()</literal>、<literal>_physics_process()</literal> 等函数，除非用户重新激活了这个标签页（切换到这个标签页）。如果用户在标签页外停留了过长的时间，就可能造成网络游戏的掉线。</paragraph>
                <paragraph>这一限制不适用于丢失焦点的浏览器<emphasis>窗口</emphasis>。因此，对于用户而言，变通方法是让项目运行在一个单独的<emphasis>窗口</emphasis>中，而不是标签页。</paragraph>
            </section>
            <section ids="full-screen-and-mouse-capture" names="full\ screen\ and\ mouse\ capture 全屏和鼠标捕获">
                <title>全屏和鼠标捕获</title>
                <paragraph>浏览器不允许任意 <strong>进入全屏</strong> . ** 捕获光标** 也是如此. 相反, 这些操作必须作为对JavaScript输入事件的响应而发生. 在Godot中, 这意味着从按下的输入事件, 例如 <literal>_input</literal> 或 <literal>_unhandled_input</literal>, 回调中进入全屏. 查询 <reference internal="True" refuri="../../classes/class_input#class-input"><inline classes="std std-ref">Input</inline></reference> 单例是不够的, 相关的输入事件当前必须是活动的.</paragraph>
                <paragraph>出于同样的原因, 除非从有效的输入事件处理程序中启动引擎, 否则全屏项目设置将不起作用. 这需要 <reference internal="True" refuri="../platform/web/customizing_html5_shell#doc-customizing-html5-shell"><inline classes="std std-ref">定制HTML 页面</inline></reference>.</paragraph>
            </section>
            <section ids="audio" names="audio 音频">
                <title>音频</title>
                <paragraph>Some browsers restrict autoplay for audio on websites. The easiest way around this limitation is to request the
                    player to click, tap or press a key/button to enable audio, for instance when displaying a splash screen at the start of your game.</paragraph>
                <seealso>
                    <paragraph>Google提供了有关其 <reference name="网络音频自动播放政策" refuri="https://sites.google.com/a/chromium.org/dev/audio-video/autoplay">网络音频自动播放政策</reference> 的其他信息.</paragraph>
                    <paragraph>Apple's Safari team also posted additional information about their <reference name="Auto-Play Policy Changes for macOS" refuri="https://webkit.org/blog/7734/auto-play-policy-changes-for-macos/">Auto-Play Policy Changes for macOS</reference>.</paragraph>
                </seealso>
                <warning>
                    <paragraph>访问麦克风需要<reference internal="True" refid="doc-javascript-secure-contexts"><inline classes="std std-ref">安全上下文</inline></reference>。</paragraph>
                </warning>
            </section>
            <section ids="networking" names="networking 网络">
                <title>网络</title>
                <paragraph>由于缺乏浏览器的支持，低级别的网络没有实现。</paragraph>
                <paragraph>目前，只有 <reference internal="True" refuri="../networking/http_client_class#doc-http-client-class"><inline classes="std std-ref">HTTP client</inline></reference>, <reference internal="True" refuri="../networking/http_request_class#doc-http-request-class"><inline classes="std std-ref">HTTP requests</inline></reference>, <reference internal="True" refuri="../networking/websocket#doc-websocket"><inline classes="std std-ref">WebSocket (client)</inline></reference> 和 <reference internal="True" refuri="../networking/webrtc#doc-webrtc"><inline classes="std std-ref">WebRTC</inline></reference> 被支持。</paragraph>
                <paragraph>HTTP类在HTML5平台上也有若干限制:</paragraph>
                <block_quote>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>无法访问或更改 <literal>StreamPeer</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph><literal>Threaded/Blocking</literal> 模式不可用</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>每帧不能进行多次, 因此循环中的轮询将冻结</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>没有分块响应</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>无法禁用主机验证</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>遵循 <reference name="同源政策" refuri="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">同源政策</reference></paragraph>
                        </list_item>
                    </bullet_list>
                </block_quote>
            </section>
            <section ids="clipboard" names="clipboard 剪贴板">
                <title>剪贴板</title>
                <paragraph>在引擎和操作系统之间同步剪贴板需要浏览器 <reference name="剪贴板 API" refuri="https://developer.mozilla.org/en-US/docs/Web/API/Clipboard_API">剪贴板 API</reference> ，此外，由于该 API 的异步性，从 GDScript 访问时可能不可靠。</paragraph>
                <warning>
                    <paragraph>需要<reference internal="True" refid="doc-javascript-secure-contexts"><inline classes="std std-ref">安全上下文</inline></reference>。</paragraph>
                </warning>
            </section>
            <section ids="gamepads" names="gamepads 游戏手柄">
                <title>游戏手柄</title>
                <paragraph>按下游戏手柄上面的任一按钮之后，这个游戏手柄才能被检测到。根据浏览器、操作系统、游戏手柄三者的组合不同，游戏手柄的映射可能有误，可惜由于隐私方面的考虑， <reference name="游戏手柄 API" refuri="https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API">游戏手柄 API</reference> 并没有提供可靠的方法来检测游戏手柄的信息，因而无法根据模型、供应商、操作系统来进行重新映射。</paragraph>
                <warning>
                    <paragraph>需要<reference internal="True" refid="doc-javascript-secure-contexts"><inline classes="std std-ref">安全上下文</inline></reference>。</paragraph>
                </warning>
            </section>
            <section ids="boot-splash-is-not-displayed" names="boot\ splash\ is\ not\ displayed 启动画面不显示">
                <title>启动画面不显示</title>
                <paragraph>默认的 HTML 页面在加载时不显示启动画面。然而，该图像会被导出为 PNG 文件，因此可以通过 <reference internal="True" refuri="../platform/web/customizing_html5_shell#doc-customizing-html5-shell"><inline classes="std std-ref">自定义 HTML 页面</inline></reference> 来显示。</paragraph>
                <target refid="doc-exporting-for-web-serving-the-files"></target>
            </section>
        </section>
        <section ids="serving-the-files doc-exporting-for-web-serving-the-files" names="serving\ the\ files 提供文件 doc_exporting_for_web_serving_the_files">
            <title>提供文件</title>
            <paragraph>导出为Web生成多个要从Web服务器提供的文件, 包括用于演示的默认HTML页面. 可以使用自定义HTML文件, 请参阅 <reference internal="True" refuri="../platform/web/customizing_html5_shell#doc-customizing-html5-shell"><inline classes="std std-ref">导出自定义 HTML 页面</inline></reference> .</paragraph>
            <warning>
                <paragraph>To ensure low audio latency and the ability to use <reference internal="True" refuri="../../classes/class_thread#class-thread"><inline classes="std std-ref">Thread</inline></reference> in web exports,
                    Godot 4 web exports always use
                    <reference name="SharedArrayBuffer" refuri="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer">SharedArrayBuffer</reference>.
                    This requires a <reference internal="True" refid="doc-javascript-secure-contexts"><inline classes="std std-ref">secure context</inline></reference>,
                    while also requiring the following CORS headers to be set when serving the files:</paragraph>
                <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">Cross-Origin-Opener-Policy: same-origin
Cross-Origin-Embedder-Policy: require-corp</literal_block>
                <paragraph>如果 Web 服务器不是你的，或者你无法添加响应报头，请使用 <reference name="coi-serviceworker" refuri="https://github.com/gzuidhof/coi-serviceworker">coi-serviceworker</reference> 作为变通方案。</paragraph>
                <paragraph>客户端收不到必要的响应报头，<strong>项目就不会运行</strong>。</paragraph>
            </warning>
            <paragraph>生成的 <literal>.html</literal> 文件可以在 Apache 服务器中用作 <literal>DirectoryIndex</literal>，文件名可以随便修改，比如可以改成 <literal>index.html</literal>。默认情况下不会用到这个名称。</paragraph>
            <paragraph>The HTML page draws the game at maximum size within the browser window.
                This way, it can be inserted into an <literal>&lt;iframe&gt;</literal> with the game's size, as is
                common on most web game hosting sites.</paragraph>
            <paragraph>其他导出的文件在 <literal>.html</literal> 文件旁边, 按原样提供, 名称不变. <literal>.wasm</literal> 文件是实现引擎的二进制WebAssembly模块. <literal>.pck</literal> 文件是包含你的游戏的Godot主包. <literal>.js</literal> 文件包含启动代码, <literal>.html</literal> 文件使用它来访问引擎. <literal>.png</literal> 文件包含启动画面图像. 默认HTML页面中未使用它, 但 <reference internal="True" refuri="../platform/web/customizing_html5_shell#doc-customizing-html5-shell"><inline classes="std std-ref">自定义HTML 页面</inline></reference> 中包含了它.</paragraph>
            <paragraph><literal>.pck</literal> 文件是二进制文件, 通常与MIME类型 <literal_emphasis classes="mimetype">application/octet-stream</literal_emphasis> 一起分发. <literal>.wasm</literal> 文件以 <literal_emphasis classes="mimetype">application/wasm</literal_emphasis> 分发.</paragraph>
            <warning>
                <paragraph>分发WebAssembly模块(<literal>.wasm</literal>)时, 使用一个 <literal_emphasis classes="mimetype">application/wasm</literal_emphasis> 以外的MIME类型, 可能会阻止某些启动优化.</paragraph>
            </warning>
            <paragraph>建议使用服务器端压缩来分发文件，特别是 <literal>.pck</literal> 和 <literal>.wasm</literal> 文件，因为这种文件通常很大。WebAssembly 模块的压缩做得特别好，使用 gzip 压缩最多能够缩小到原始大小的四分之一左右。如果 Web 服务器支持的话，请考虑使用 Brotli 预压缩，能够进一步节省文件大小。</paragraph>
            <paragraph><strong>提供即时压缩的主机:</strong> GitHub Pages (gzip)</paragraph>
            <paragraph><strong>不提供即时压缩的主机:</strong> itch.io, GitLab 页面 ( <reference name="支持手动gzip预压缩" refuri="https://webd97.de/post/gitlab-pages-compression/">支持手动gzip预压缩</reference> )</paragraph>
            <tip>
                <paragraph>Godot 的仓库中包含了一个<reference name="用来运行本地 Web 服务器的 Python 脚本" refuri="https://raw.githubusercontent.com/godotengine/godot/master/platform/web/serve.py">用来运行本地 Web 服务器的 Python 脚本</reference>。这个脚本原本是用于测试 Web 编辑器的，但也可以用来测试导出后的项目。</paragraph>
                <paragraph>将链接中的文件保存为 <literal>serve.py</literal> 文件，将这个文件移动到包含导出后项目的 <literal>index.html</literal> 的文件夹中，然后在该文件夹中打开命令提示符，执行以下命令：</paragraph>
                <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve"># You may need to replace `python` with `python3` on some platforms.
python serve.py --root .</literal_block>
                <paragraph>On Windows, you can open a command prompt in the current folder by holding
                    <literal classes="kbd">Shift</literal> and right-clicking on empty space in Windows Explorer, then
                    choosing <strong>Open PowerShell window here</strong>.</paragraph>
                <paragraph>This will serve the contents of the current folder and open the default web
                    browser automatically.</paragraph>
                <paragraph>Note that for production use cases, this Python-based web server should not
                    be used. Instead, you should use an established web server such as Apache or
                    nginx.</paragraph>
            </tip>
            <target refid="doc-javascript-eval"></target>
        </section>
        <section ids="calling-javascript-from-script doc-javascript-eval" names="calling\ javascript\ from\ script 从脚本调用\ javascript doc_javascript_eval">
            <title>从脚本调用 JavaScript</title>
            <paragraph>In web builds, the <literal>JavaScriptBridge</literal> singleton is implemented. It offers a single
                method called <literal>eval</literal> that works similarly to the JavaScript function of the
                same name. It takes a string as an argument and executes it as JavaScript code.
                This allows interacting with the browser in ways not possible with script
                languages integrated into Godot.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func my_func():
    JavaScriptBridge.eval("alert('Calling JavaScript per GDScript!');")</literal_block>
                </div>
                <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private void MyFunc()
{
    JavaScriptBridge.Eval("alert('Calling JavaScript per C#!');")
}</literal_block>
                </div>
            </container>
            <paragraph>最后一个JavaScript语句的值转换为GDScript值，并在某些情况下由 <literal>eval()</literal> 返回:</paragraph>
            <block_quote>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph>JavaScript <literal>number</literal> 会以 <reference internal="True" refuri="../../classes/class_float#class-float"><inline classes="std std-ref">float</inline></reference> 返回</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>JavaScript <literal>boolean</literal> 会以 <reference internal="True" refuri="../../classes/class_bool#class-bool"><inline classes="std std-ref">bool</inline></reference> 返回</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>JavaScript <literal>string</literal> 会以 <reference internal="True" refuri="../../classes/class_string#class-string"><inline classes="std std-ref">String</inline></reference> 返回</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>JavaScript <literal>RellBuffer</literal> ， <literal>TypedArray</literal> 和 <literal>DataView</literal> 会以 <inline classes="xref std std-ref">class_PoolByteArray</inline> 返回</paragraph>
                    </list_item>
                </bullet_list>
            </block_quote>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func my_func2():
    var js_return = JavaScriptBridge.eval("var myNumber = 1; myNumber + 2;")
    print(js_return) # prints '3.0'</literal_block>
                </div>
                <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private void MyFunc2()
{
    var jsReturn = JavaScriptBridge.Eval("var myNumber = 1; myNumber + 2;");
    GD.Print(jsReturn); // prints '3.0'
}</literal_block>
                </div>
            </container>
            <paragraph>任何其他JavaScript值都返回为 <literal>null</literal> .</paragraph>
            <paragraph>HTML5 export templates may be <reference internal="True" refuri="../../contributing/development/compiling/compiling_for_web#doc-compiling-for-web"><inline classes="std std-ref">built</inline></reference> without
                support for the singleton to improve security. With such templates, and on
                platforms other than HTML5, calling <literal>JavaScriptBridge.eval</literal> will also return
                <literal>null</literal>. The availability of the singleton can be checked with the
                <literal>web</literal> <reference internal="True" refuri="feature_tags#doc-feature-tags"><inline classes="std std-ref">feature tag</inline></reference>:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func my_func3():
    if OS.has_feature('web'):
        JavaScriptBridge.eval("""
            console.log('The JavaScriptBridge singleton is available')
        """)
    else:
        print("The JavaScriptBridge singleton is NOT available")</literal_block>
                </div>
                <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private void MyFunc3()
{
    if (OS.HasFeature("web"))
    {
        JavaScriptBridge.Eval("console.log('The JavaScriptBridge singleton is available')");
    }
    else
    {
        GD.Print("The JavaScriptBridge singleton is NOT available");
    }
}</literal_block>
                </div>
            </container>
            <tip>
                <paragraph>GDScript中的多行字符串由3双引号 <literal>"""</literal> 包围, 如同上文中的 <literal>my_func3()</literal> 那样, 有助于保证JavaScript代码的可读性.</paragraph>
            </tip>
            <paragraph>The <literal>eval</literal> method also accepts a second, optional Boolean argument, which
                specifies whether to execute the code in the global execution context,
                defaulting to <literal>false</literal> to prevent polluting the global namespace:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-3-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-3-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-3-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func my_func4():
    # execute in global execution context,
    # thus adding a new JavaScript global variable `SomeGlobal`
    JavaScriptBridge.eval("var SomeGlobal = {};", true)</literal_block>
                </div>
                <div aria-labelledby="tab-3-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-3-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private void MyFunc4()
{
    // execute in global execution context,
    // thus adding a new JavaScript global variable `SomeGlobal`
    JavaScriptBridge.Eval("var SomeGlobal = {};", true);
}</literal_block>
                </div>
            </container>
        </section>
        <section ids="environment-variables" names="environment\ variables 环境变量">
            <title>环境变量</title>
            <paragraph>你可以使用以下环境变量在编辑器外部设置导出选项。在导出过程中，这些值会覆盖你在导出菜单中设置的值。</paragraph>
            <table ids="id1">
                <title>HTML5 导出环境变量</title>
                <tgroup cols="2">
                    <colspec colwidth="50"></colspec>
                    <colspec colwidth="50"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>导出选项</paragraph>
                            </entry>
                            <entry>
                                <paragraph>环境变量</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>加密 / 密钥</paragraph>
                            </entry>
                            <entry>
                                <paragraph><literal>GODOT_SCRIPT_ENCRYPTION_KEY</literal></paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
