<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/export/running_on_macos.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-running-on-macos"></target>
    <section ids="running-godot-apps-on-macos doc-running-on-macos" names="running\ godot\ apps\ on\ macos 在\ macos\ 上运行\ godot\ 应用 doc_running_on_macos">
        <title>在 macOS 上运行 Godot 应用</title>
        <seealso>
            <paragraph>这个页面描述的是在 macOS 上运行 Godot 项目。如果你还没有导出项目，请先阅读 <reference internal="True" refuri="exporting_for_macos#doc-exporting-for-macos"><inline classes="std std-ref">为 macOS 导出</inline></reference>。</paragraph>
        </seealso>
        <paragraph>默认情况下，macOS 只会运行签名并公证后的应用程序。</paragraph>
        <note>
            <paragraph>当从下载文件夹运行应用程序或仍处于隔离状态时，Gatekeeper将执行*路径随机化[path randomization]*作为安全措施。这就中断了应用程序对相对路径的访问，而应用程序依赖于相对路径来工作。要解决此问题，请将应用程序移动到“mayoto/Applications”文件夹。</paragraph>
            <paragraph>通常，macOS应用程序应该避免依赖来自应用程序文件夹的相对路径。</paragraph>
        </note>
        <paragraph>根据 macOS 应用签名和分发方法的不同，可能出现下列情况：</paragraph>
        <section ids="app-is-signed-notarized-and-distributed-via-app-store" names="app\ is\ signed,\ notarized\ and\ distributed\ via\ app\ store app\ 已签名并公证，通过\ app\ store\ 分发">
            <title>App 已签名并公证，通过 App Store 分发</title>
            <note>
                <paragraph>App 开发者需要加入 Apple 开发者计划，然后在导出时配置签名和公证选项，最后将 App 上传到 App Store。</paragraph>
            </note>
            <paragraph>App 应该是可以开箱即用的，无需额外的用户交互。</paragraph>
        </section>
        <section ids="app-is-signed-notarized-and-distributed-outside-app-store" names="app\ is\ signed,\ notarized\ and\ distributed\ outside\ app\ store app\ 已签名并公证，在\ app\ store\ 外分发">
            <title>App 已签名并公证，在 App Store 外分发</title>
            <note>
                <paragraph>App 开发者需要加入 Apple 开发者计划，然后在导出时配置签名和公证选项，最后将 App 以“.DMG”或“.ZIP”归档文件的形式分发。</paragraph>
            </note>
            <paragraph>首次运行该 App 时，会出现如下对话框：</paragraph>
            <image candidates="{'*': 'tutorials/export/img/signed_and_notarized_0.png'}" uri="tutorials/export/img/signed_and_notarized_0.png"></image>
            <paragraph>单击 <literal>打开</literal> 启动应用。</paragraph>
            <paragraph>如果你看到了如下的警告对话框，那么你的 Mac 是被设置成了只允许来自 App Store 的应用。</paragraph>
            <image candidates="{'*': 'tutorials/export/img/signed_and_notarized_1.png'}" uri="tutorials/export/img/signed_and_notarized_1.png"></image>
            <paragraph>要允许第三方程序，请打开 <literal>系统设置</literal>，点击 <literal>安全性与隐私</literal>，然后点击 <literal>通用</literal>，解锁设置，然后选择 <literal>App Store 和被认可的开发者</literal>。</paragraph>
            <image candidates="{'*': 'tutorials/export/img/sys_pref_0.png'}" uri="tutorials/export/img/sys_pref_0.png"></image>
        </section>
        <section ids="app-is-signed-including-ad-hoc-signatures-but-not-notarized" names="app\ is\ signed\ (including\ ad-hoc\ signatures)\ but\ not\ notarized 应用已签名（包括\ ad-hoc\ 签名）但未公证">
            <title>应用已签名（包括 Ad-hoc 签名）但未公证</title>
            <note>
                <paragraph>应用开发者使用了自签名证书或 Ad-hoc 签名（Godot 导出项目的默认行为）。</paragraph>
            </note>
            <paragraph>首次运行该 App 时，会出现如下对话框：</paragraph>
            <image candidates="{'*': 'tutorials/export/img/signed_0.png'}" uri="tutorials/export/img/signed_0.png"></image>
            <paragraph>要运行此应用，你可以临时覆盖 Gatekeeper：</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>可以打开 <literal>系统设置</literal>，点击 <literal>安全性与隐私</literal>，然后点击 <literal>通用</literal>，然后点击 <literal>仍然打开</literal>。</paragraph>
                    <image candidates="{'*': 'tutorials/export/img/sys_pref_1.png'}" uri="tutorials/export/img/sys_pref_1.png"></image>
                </list_item>
                <list_item>
                    <paragraph>也可以在访达窗口中右键单击（Control-单击）应用图标，选择菜单中的 <literal>打开</literal>。</paragraph>
                    <image candidates="{'*': 'tutorials/export/img/signed_1.png'}" uri="tutorials/export/img/signed_1.png"></image>
                </list_item>
                <list_item>
                    <paragraph>然后在确认对话框中单击 <literal>打开</literal>。</paragraph>
                    <image candidates="{'*': 'tutorials/export/img/signed_2.png'}" uri="tutorials/export/img/signed_2.png"></image>
                </list_item>
                <list_item>
                    <paragraph>如出现提示就输入密码。</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>另一种选择是完全禁用Gatekeeper。请注意，这确实降低了你的计算机的安全性，允许你运行任何软件，你想要的。为此，运行'sudo spctl-master-disable'in the Terminal，输入你的密码，然后**Anywhere**选项将可用：</paragraph>
            <block_quote>
                <image candidates="{'*': 'tutorials/export/img/macos_allow_from_anywhere.png'}" uri="tutorials/export/img/macos_allow_from_anywhere.png"></image>
            </block_quote>
            <paragraph>请注意，Gatekeeper将在macOS更新时重新启用自己。</paragraph>
        </section>
        <section ids="app-is-not-signed-executable-is-linker-signed" names="app\ is\ not\ signed,\ executable\ is\ linker-signed app\ 未签名，可执行文件由链接器签名">
            <title>App 未签名，可执行文件由链接器签名</title>
            <note>
                <paragraph>App 使用官方导出模板构建，但未签名。</paragraph>
            </note>
            <paragraph>首次运行该 App 时，会出现如下对话框：</paragraph>
            <image candidates="{'*': 'tutorials/export/img/linker_signed_1.png'}" uri="tutorials/export/img/linker_signed_1.png"></image>
            <paragraph>要运行这个 App，你应该手动移除“隔离”（quarantine）扩展文件属性：</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>打开 <literal>Terminal.app</literal>（按 <literal classes="kbd">Cmd + 空格</literal> 并输入 <literal>Terminal</literal>）。</paragraph>
                </list_item>
                <list_item>
                    <paragraph>切换到包含目标应用程序的文件夹。</paragraph>
                    <paragraph>使用 <literal>cd 到_App_文件夹的路径</literal> 命令，例如在 <literal>Downloads</literal> 文件夹中的话就是 <literal>cd ~/Downloads/</literal>。</paragraph>
                </list_item>
                <list_item>
                    <paragraph>执行命令 <literal>xattr -dr com.apple.quarantine "未签名游戏.app"</literal>（包括引号和“.app”扩展名）。</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="neither-app-nor-executable-is-signed-relevant-for-apple-silicon-macs-only" names="neither\ app\ nor\ executable\ is\ signed\ (relevant\ for\ apple\ silicon\ macs\ only) app\ 和可执行文件都没有签名（仅适用于\ apple\ slilicon\ 的\ mac）">
            <title>App 和可执行文件都没有签名（仅适用于 Apple Slilicon 的 mac）</title>
            <note>
                <paragraph>App 使用自定义导出模板构建，使用 OSXCross 编译，完全没有签名。</paragraph>
            </note>
            <paragraph>首次运行该 App 时，会出现如下对话框：</paragraph>
            <image candidates="{'*': 'tutorials/export/img/unsigned_1.png'}" uri="tutorials/export/img/unsigned_1.png"></image>
            <paragraph>要运行这个 App，你可以自己进行 Ad-hoc 签名：</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>从 App Store 安装 <literal>Xcode</literal>，运行并确认安装命令行工具。</paragraph>
                </list_item>
                <list_item>
                    <paragraph>打开 <literal>Terminal.app</literal>（按 <literal classes="kbd">Cmd + 空格</literal> 并输入 <literal>Terminal</literal>）。</paragraph>
                </list_item>
                <list_item>
                    <paragraph>切换到包含目标应用程序的文件夹。</paragraph>
                    <paragraph>使用 <literal>cd 到_App_文件夹的路径</literal> 命令，例如在 <literal>Downloads</literal> 文件夹中的话就是 <literal>cd ~/Downloads/</literal>。</paragraph>
                </list_item>
                <list_item>
                    <paragraph>运行以下命令：</paragraph>
                    <paragraph><literal>xattr -dr com.apple.quarantine "未签名游戏.app"</literal>（包括引号和“.app”扩展名）。</paragraph>
                    <paragraph><literal>codesign -s - --force --deep "未签名游戏.app"</literal>（包括引号和“.app”扩展名）。</paragraph>
                </list_item>
            </bullet_list>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
