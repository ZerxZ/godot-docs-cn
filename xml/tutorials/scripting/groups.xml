<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/scripting/groups.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-groups"></target>
    <section ids="groups doc-groups" names="groups 分组 doc_groups">
        <title>分组</title>
        <paragraph>Godot 中的分组与其他软件中的标签类似。你可以将节点加入若干个分组之中，然后在代码中通过 SceneTree 来：</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>获取某个分组中的节点列表。</paragraph>
            </list_item>
            <list_item>
                <paragraph>对分组中的所有节点调用方法。</paragraph>
            </list_item>
            <list_item>
                <paragraph>向分组中的所有节点发送通知。</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>这个功能可以用来组织大型场景、解耦代码。</paragraph>
        <section ids="managing-groups" names="managing\ groups 管理分组">
            <title>管理分组</title>
            <paragraph>将节点添加到一个新的分组名称中即可创建分组，同样，将所有节点移出某个给定的分组即可移除分组。</paragraph>
            <paragraph>为分组添加/移除节点有两种方法：</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>编辑器模式下，可以使用编辑器的“节点”面板。</paragraph>
                </list_item>
                <list_item>
                    <paragraph>运行模式下，调用 <reference internal="True" refuri="../../classes/class_node#class-node-method-add-to-group"><inline classes="std std-ref">Node.add_to_group()</inline></reference> 或 <reference internal="True" refuri="../../classes/class_node#class-node-method-remove-from-group"><inline classes="std std-ref">Node.remove_from_group()</inline></reference>方法。</paragraph>
                </list_item>
            </bullet_list>
            <section ids="using-the-node-dock" names="using\ the\ node\ dock 使用节点面板">
                <title>使用节点面板</title>
                <paragraph>可以使用“节点”停靠面板中的“分组”选项卡，将当前场景中的节点加进分组中。</paragraph>
                <image candidates="{'*': 'tutorials/scripting/img/groups_node_tab.webp'}" uri="tutorials/scripting/img/groups_node_tab.webp"></image>
                <paragraph>在“场景”面板中选中若干个节点，在输入框中填写分组名称，然后单击“添加”。</paragraph>
                <image candidates="{'*': 'tutorials/scripting/img/groups_add_node_to_group.webp'}" uri="tutorials/scripting/img/groups_add_node_to_group.webp"></image>
                <paragraph>现在你就会看到出现了分组。</paragraph>
                <image candidates="{'*': 'tutorials/scripting/img/groups_node_after_adding.webp'}" uri="tutorials/scripting/img/groups_node_after_adding.webp"></image>
                <paragraph>在复杂的项目中，你可能会用到许多包含大量节点的分组或者大型场景，这时可以使用“分组编辑器”窗口来为分组添加或删除节点。该窗口可以通过点击“管理分组”按钮打开。</paragraph>
                <image candidates="{'*': 'tutorials/scripting/img/groups_manage_groups_button.webp'}" uri="tutorials/scripting/img/groups_manage_groups_button.webp"></image>
                <paragraph>点击后就会出现“分组编辑器”窗口。以下截图自一个复杂项目，用于展示这个工具的用途。</paragraph>
                <image candidates="{'*': 'tutorials/scripting/img/groups_group_editor_window.webp'}" uri="tutorials/scripting/img/groups_group_editor_window.webp"></image>
                <paragraph>该窗口包含三列内容：</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>当前场景中节点所用到的分组列表。</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>不在当前选中的分组中的节点列表。</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>在分组中的节点列表。</paragraph>
                    </list_item>
                </enumerated_list>
                <paragraph>底部的输入框可以用来添加新的分组，或者过滤第二列、第三列中的节点。</paragraph>
                <note>
                    <paragraph>灰色的节点名称表示该节点是从别的场景加入该分组的，无法在这里进行编辑，这种情况一般发生在实例化的场景上。</paragraph>
                </note>
            </section>
            <section ids="using-code" names="using\ code 使用代码">
                <title>使用代码</title>
                <paragraph>你也可以通过脚本来管理分组。以下代码会在脚本所附加的节点进入场景树时，将其加入 <literal>guards</literal>（守卫）分组。</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    add_to_group("guards")</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Ready()
{
    base._Ready();

    AddToGroup("guards");
}</literal_block>
                    </div>
                </container>
                <paragraph>想象一下你正在制作一个潜入类游戏，敌人发现玩家后，希望所有守卫和机器人都进入警觉状态。</paragraph>
                <paragraph>下面的例子中，我们使用 <literal>SceneTree.call_group()</literal> 来通知所有敌人：玩家被发现了。</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _on_player_spotted():
    get_tree().call_group("guards", "enter_alert_mode")</literal_block>
                    </div>
                    <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public void _OnPlayerDiscovered()
{
    GetTree().CallGroup("guards", "enter_alert_mode");
}</literal_block>
                    </div>
                </container>
                <paragraph>以上代码会对 <literal>gurads</literal> 分组中的所有成员节点调用 <literal>enter_alter_mode</literal> 函数。</paragraph>
                <paragraph>要获取由 <literal>guards</literal> 分组中的所有节点所构成的数组，请调用 <reference internal="True" refuri="../../classes/class_scenetree#class-scenetree-method-get-nodes-in-group"><inline classes="std std-ref">SceneTree.get_nodes_in_group()</inline></reference>：</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var guards = get_tree().get_nodes_in_group("guards")</literal_block>
                    </div>
                    <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">var guards = GetTree().GetNodesInGroup("guards");</literal_block>
                    </div>
                </container>
                <paragraph><reference internal="True" refuri="../../classes/class_scenetree#class-scenetree"><inline classes="std std-ref">SceneTree</inline></reference> 类提供了许多有用的方法，例如与场景、场景节点层次结构及节点编组交互，还可以使你可以轻松切换场景或重新加载场景、退出游戏或暂停和恢复运行游戏。不仅如此，该类还提供了一些有用的信号。</paragraph>
                <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
            </section>
        </section>
    </section>
</document>
