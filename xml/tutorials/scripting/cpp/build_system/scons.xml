<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/scripting/cpp/build_system/scons.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-godot-cpp-build-system"></target>
    <section ids="main-build-system-working-with-scons doc-godot-cpp-build-system" names="main\ build\ system:\ working\ with\ scons doc_godot_cpp_build_system">
        <title>Main build system: Working with SCons</title>
        <seealso>
            <paragraph>This page documents how to compile godot-cpp. If you're looking to compile Godot instead, see
                <reference internal="True" refuri="../../../../engine_details/development/compiling/introduction_to_the_buildsystem#doc-introduction-to-the-buildsystem"><inline classes="std std-ref">Introduction to the buildsystem</inline></reference>.</paragraph>
        </seealso>
        <paragraph><reference name="godot-cpp" refuri="https://github.com/godotengine/godot-cpp">godot-cpp</reference> uses <reference name="SCons" refuri="https://scons.org">SCons</reference> as its main build system.
            It is modeled after <reference internal="True" refuri="../../../../engine_details/development/compiling/index#doc-compiling-index"><inline classes="std std-ref">Godot's build system</inline></reference>, and some commands available there are also
            available in godot-cpp projects.</paragraph>
        <section ids="getting-started" names="getting\ started">
            <title>Getting started</title>
            <paragraph>To build a godot-cpp project, it is generally sufficient to install <reference name="SCons" refuri="https://scons.org">SCons</reference>, and simply run it
                in the project directory:</paragraph>
            <block_quote>
                <paragraph>scons</paragraph>
            </block_quote>
            <paragraph>You may want to learn about available options:</paragraph>
            <block_quote>
                <paragraph>scons --help</paragraph>
            </block_quote>
            <paragraph>To cleanly re-build your project, add <literal>--clean</literal> to your build command:</paragraph>
            <block_quote>
                <paragraph>scons --clean</paragraph>
            </block_quote>
            <paragraph>You can find more information about common SCons arguments and build patterns in the
                <reference name="SCons User Guide" refuri="https://scons.org/doc/latest/HTML/scons-user/index.html">SCons User Guide</reference>. Additional commands may be added by
                individual godot-cpp projects, so consult their specific documentation for more information on those.</paragraph>
        </section>
        <section ids="configuring-an-ide" names="configuring\ an\ ide">
            <title>Configuring an IDE</title>
            <paragraph>Most IDEs can use a <literal>compile_commands.json</literal> file to understand a C++ project. You can generate it with godot-cpp using
                the following command:</paragraph>
            <literal_block force="False" highlight_args="{}" language="shell" linenos="False" xml:space="preserve"># Generate compile_commands.json while compiling.
scons compiledb=yes

# Generate compile_commands.json without compiling.
scons compiledb=yes compile_commands.json</literal_block>
            <paragraph>For more information, please check out the <reference internal="True" refuri="../../../../engine_details/development/configuring_an_ide/index#doc-configuring-an-ide"><inline classes="std std-ref">IDE configuration guides</inline></reference>.
                Although written for Godot engine contributors, they are largely applicable to godot-cpp projects as well.</paragraph>
        </section>
        <section ids="loading-your-gdextension-in-godot" names="loading\ your\ gdextension\ in\ godot">
            <title>Loading your GDExtension in Godot</title>
            <paragraph>Godot loads GDExtensions by finding <reference internal="True" refuri="../../gdextension/gdextension_file#doc-gdextension-file"><inline classes="std std-ref">.gdextension</inline></reference> files in the project directory.
                <literal>.gdextension</literal> files are used to select and load a binary compatible with the current computer / operating system.</paragraph>
            <paragraph>The <reference name="godot-cpp-template" refuri="https://github.com/godotengine/godot-cpp-template">godot-cpp-template</reference>, as well as the
                <reference internal="True" refuri="../gdextension_cpp_example#doc-godot-cpp-getting-started"><inline classes="std std-ref">Getting Started section</inline></reference>, provide example <literal>.gdextension</literal> files for GDExtensions
                that are widely compatible to many different systems.</paragraph>
        </section>
        <section ids="building-for-multiple-platforms" names="building\ for\ multiple\ platforms">
            <title>Building for multiple platforms</title>
            <paragraph>GDExtensions are expected to run on many different systems, each with separate binaries and build configurations.
                If you are planning to publish your GDExtension, we recommend you provide binaries for all configurations that are
                mentioned in the <reference name="godot-cpp-template" refuri="https://github.com/godotengine/godot-cpp-template">godot-cpp-template</reference>
                <reference name=".gdextension file" refuri="https://github.com/godotengine/godot-cpp-template/blob/main/demo/bin/example.gdextension">.gdextension file</reference>.</paragraph>
            <paragraph>There are two popular ways by which cross platform builds can be achieved:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Cross-platform build tools</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Continuous Integration (CI)</paragraph>
                </list_item>
            </bullet_list>
            <paragraph><reference name="godot-cpp-template" refuri="https://github.com/godotengine/godot-cpp-template">godot-cpp-template</reference> contains an
                <reference name="example setup" refuri="https://github.com/godotengine/godot-cpp-template/tree/main/.github/workflows">example setup</reference>
                for a GitHub based CI workflow.</paragraph>
        </section>
        <section ids="using-a-custom-api-file" names="using\ a\ custom\ api\ file">
            <title>Using a custom API file</title>
            <paragraph>Every branch of godot-cpp comes with an API file (<literal>extension_api.json</literal>) appropriate for
                the respective Godot version (e.g. the <literal>4.3</literal> branch comes with the API file compatible
                with Godot version <literal>4.3</literal> and later).</paragraph>
            <paragraph>However, you may want to use a custom <literal>extension_api.json</literal>, for example:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>If you want to use the latest APIs from Godot <literal>master</literal>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>If you <reference internal="True" refuri="../../../../engine_details/development/compiling/index#doc-compiling-index"><inline classes="std std-ref">build Godot yourself</inline></reference> with different options than the official builds (e.g. <literal>disable_3d=yes</literal> or <literal>precision=double</literal>).</paragraph>
                </list_item>
                <list_item>
                    <paragraph>If you want to use APIs exposed by custom modules.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>To use a custom API file, you first have to generate it from the appropriate Godot
                executable:</paragraph>
            <literal_block force="False" highlight_args="{}" language="shell" linenos="False" xml:space="preserve">godot --dump-extension-api</literal_block>
            <paragraph>The resulting <literal>extension_api.json</literal> file will be created in the executable's
                directory. To use it, you can add <literal>custom_api_file</literal> to your build command:</paragraph>
            <literal_block force="False" highlight_args="{}" language="shell" linenos="False" xml:space="preserve">scons platform=&lt;platform&gt; custom_api_file=&lt;PATH_TO_FILE&gt;</literal_block>
            <paragraph>Alternatively, you can add it as the default API file to your project by adding
                the following line to your SConstruct file:</paragraph>
            <literal_block force="False" highlight_args="{}" language="python" linenos="False" xml:space="preserve">localEnv["custom_api_file"] = "extension_api.json"</literal_block>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
