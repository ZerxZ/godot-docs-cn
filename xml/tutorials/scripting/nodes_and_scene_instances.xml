<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/scripting/nodes_and_scene_instances.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-nodes-and-scene-instances"></target>
    <section ids="nodes-and-scene-instances doc-nodes-and-scene-instances" names="nodes\ and\ scene\ instances doc_nodes_and_scene_instances">
        <title>Nodes and scene instances</title>
        <paragraph>This guide explains how to get nodes, create nodes, add them as a child, and
            instantiate scenes from code.</paragraph>
        <seealso>
            <paragraph>Check the <reference internal="True" refuri="../../getting_started/step_by_step/instancing#doc-instancing"><inline classes="std std-ref">Creating instances</inline></reference> tutorial to learn about Godot's approach to scene instancing.</paragraph>
        </seealso>
        <section ids="getting-nodes" names="getting\ nodes">
            <title>Getting nodes</title>
            <paragraph>You can get a reference to a node by calling the <reference internal="True" refuri="../../classes/class_node#class-node-method-get-node"><inline classes="std std-ref">Node.get_node()</inline></reference> method. For this to work, the child node must be
                present in the scene tree. Getting it in the parent node's <literal>_ready()</literal> function
                guarantees that.</paragraph>
            <paragraph>If, for example,  you have a scene tree like this, and you want to get a reference to the
                Sprite2D and Camera2D nodes to access them in your script.</paragraph>
            <image candidates="{'*': 'tutorials/scripting/img/nodes_and_scene_instances_player_scene_example.webp'}" original_uri="img/nodes_and_scene_instances_player_scene_example.webp" uri="tutorials/scripting/img/nodes_and_scene_instances_player_scene_example.webp"></image>
            <paragraph>To do so, you can use the following code.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var sprite2d
var camera2d

func _ready():
    sprite2d = get_node("Sprite2D")
    camera2d = get_node("Camera2D")</literal_block>
                </div>
                <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private Sprite2D _sprite2D;
private Camera2D _camera2D;

public override void _Ready()
{
    base._Ready();

    _sprite2D = GetNode&lt;Sprite2D&gt;("Sprite2D");
    _camera2D = GetNode&lt;Camera2D&gt;("Camera2D");
}</literal_block>
                </div>
            </container>
            <paragraph>Note that you get nodes using their name, not their type. Above, "Sprite2D" and
                "Camera2D" are the nodes' names in the scene.</paragraph>
            <image candidates="{'*': 'tutorials/scripting/img/nodes_and_scene_instances_sprite_node.webp'}" original_uri="img/nodes_and_scene_instances_sprite_node.webp" uri="tutorials/scripting/img/nodes_and_scene_instances_sprite_node.webp"></image>
            <paragraph>If you rename the Sprite2D node as Skin in the Scene dock, you have to change the
                line that gets the node to <literal>get_node("Skin")</literal> in the script.</paragraph>
            <image candidates="{'*': 'tutorials/scripting/img/nodes_and_scene_instances_sprite_node_renamed.webp'}" original_uri="img/nodes_and_scene_instances_sprite_node_renamed.webp" uri="tutorials/scripting/img/nodes_and_scene_instances_sprite_node_renamed.webp"></image>
        </section>
        <section ids="node-paths" names="node\ paths">
            <title>Node paths</title>
            <paragraph>When getting a reference to a node, you're not limited to getting a direct child. The <literal>get_node()</literal> function
                supports paths, a bit like when working with a file browser. Add a slash to
                separate nodes.</paragraph>
            <paragraph>Take the following example scene, with the script attached to the UserInterface
                node.</paragraph>
            <image candidates="{'*': 'tutorials/scripting/img/nodes_and_scene_instances_ui_scene_example.webp'}" original_uri="img/nodes_and_scene_instances_ui_scene_example.webp" uri="tutorials/scripting/img/nodes_and_scene_instances_ui_scene_example.webp"></image>
            <paragraph>To get the AnimationPlayer node, you would use the following code.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var animation_player

func _ready():
    animation_player = get_node("ShieldBar/AnimationPlayer")</literal_block>
                </div>
                <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private AnimationPlayer _animationPlayer;

public override void _Ready()
{
    base._Ready();

    _animationPlayer = GetNode&lt;AnimationPlayer&gt;("ShieldBar/AnimationPlayer");
}</literal_block>
                </div>
            </container>
            <note>
                <paragraph>As with file paths, you can use ".." to get a parent node. The best
                    practice is to avoid doing that though not to break encapsulation.
                    You can also start the path with a forward
                    slash to make it absolute, in which case your topmost node would be
                    "/root", the application's predefined root viewport.</paragraph>
            </note>
            <section ids="syntactic-sugar" names="syntactic\ sugar">
                <title>Syntactic sugar</title>
                <paragraph>You can use two shorthands to shorten your code in GDScript. Firstly, putting the
                    <literal>@onready</literal> annotation before a member variable makes it initialize right before
                    the <literal>_ready()</literal> callback.</paragraph>
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">@onready var sprite2d = get_node("Sprite2D")</literal_block>
                <paragraph>There is also a short notation for <literal>get_node()</literal>: the dollar sign, "$". You
                    place it before the name or path of the node you want to get.</paragraph>
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">@onready var sprite2d = $Sprite2D
@onready var animation_player = $ShieldBar/AnimationPlayer</literal_block>
            </section>
        </section>
        <section ids="creating-nodes" names="creating\ nodes">
            <title>Creating nodes</title>
            <paragraph>To create a node from code, call its <literal>new()</literal> method like for any other
                class-based datatype.</paragraph>
            <paragraph>You can store the newly created node's reference in a variable and call
                <literal>add_child()</literal> to add it as a child of the node to which you attached the
                script.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var sprite2d

func _ready():
    var sprite2d = Sprite2D.new() # Create a new Sprite2D.
    add_child(sprite2d) # Add it as a child of this node.</literal_block>
                </div>
                <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">private Sprite2D _sprite2D;

public override void _Ready()
{
    base._Ready();

    _sprite2D = new Sprite2D(); // Create a new Sprite2D.
    AddChild(_sprite2D); // Add it as a child of this node.
}</literal_block>
                </div>
            </container>
            <paragraph>To delete a node and free it from memory, you can call its <literal>queue_free()</literal>
                method. Doing so queues the node for deletion at the end of the current frame
                after it has finished processing. At that point, the engine removes the node from
                the scene and frees the object in memory.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-3-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-3-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-3-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">sprite2d.queue_free()</literal_block>
                </div>
                <div aria-labelledby="tab-3-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-3-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">_sprite2D.QueueFree();</literal_block>
                </div>
            </container>
            <paragraph>Before calling <literal>sprite2d.queue_free()</literal>, the remote scene tree looks like this.</paragraph>
            <image candidates="{'*': 'tutorials/scripting/img/nodes_and_scene_instances_remote_tree_with_sprite.webp'}" original_uri="img/nodes_and_scene_instances_remote_tree_with_sprite.webp" uri="tutorials/scripting/img/nodes_and_scene_instances_remote_tree_with_sprite.webp"></image>
            <paragraph>After the engine freed the node, the remote scene tree doesn't display the
                sprite anymore.</paragraph>
            <image candidates="{'*': 'tutorials/scripting/img/nodes_and_scene_instances_remote_tree_no_sprite.webp'}" original_uri="img/nodes_and_scene_instances_remote_tree_no_sprite.webp" uri="tutorials/scripting/img/nodes_and_scene_instances_remote_tree_no_sprite.webp"></image>
            <paragraph>You can alternatively call <literal>free()</literal> to immediately destroy the node. You
                should do this with care as any reference to it will instantly become <literal>null</literal>.
                We recommend using <literal>queue_free()</literal> unless you know what you're doing.</paragraph>
            <paragraph>When you free a node, it also frees all its children. Thanks to this, to delete
                an entire branch of the scene tree, you only have to free the topmost parent
                node.</paragraph>
        </section>
        <section ids="instancing-scenes" names="instancing\ scenes">
            <title>Instancing scenes</title>
            <paragraph>Scenes are templates from which you can create as many reproductions as you'd
                like. This operation is called instancing, and doing it from code happens in two
                steps:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Loading the scene from the local drive.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Creating an instance of the loaded <reference internal="True" refuri="../../classes/class_packedscene#class-packedscene"><inline classes="std std-ref">PackedScene</inline></reference>
                        resource.</paragraph>
                </list_item>
            </enumerated_list>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-4-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-4-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-4-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var scene = load("res://my_scene.tscn")</literal_block>
                </div>
                <div aria-labelledby="tab-4-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-4-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">var scene = GD.Load&lt;PackedScene&gt;("res://MyScene.tscn");</literal_block>
                </div>
            </container>
            <paragraph>Preloading the scene can improve the user's experience as the load operation
                happens when the compiler reads the script and not at runtime. This feature is
                only available with GDScript.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-5-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-5-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                </div>
                <div aria-labelledby="tab-5-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-5-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var scene = preload("res://my_scene.tscn")</literal_block>
                </div>
            </container>
            <paragraph>At that point, <literal>scene</literal> is a packed scene resource, not a node. To create the
                actual node, you need to call <reference internal="True" refuri="../../classes/class_packedscene#class-packedscene-method-instantiate"><inline classes="std std-ref">PackedScene.instantiate()</inline></reference>. It returns a tree of nodes that you can use
                as a child of your current node.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-6-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-6-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-6-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-6-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-6-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-6-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">var instance = scene.instantiate()
add_child(instance)</literal_block>
                </div>
                <div aria-labelledby="tab-6-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-6-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">var instance = scene.Instantiate();
AddChild(instance);</literal_block>
                </div>
            </container>
            <paragraph>The advantage of this two-step process is you can keep a packed scene loaded and
                create new instances on the fly. For example, to quickly instance several
                enemies or bullets.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
