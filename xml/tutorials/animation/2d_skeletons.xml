<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/animation/2d_skeletons.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-2d-skeletons"></target>
    <section ids="d-skeletons doc-2d-skeletons" names="2d\ skeletons doc_2d_skeletons">
        <title>2D skeletons</title>
        <section ids="introduction" names="introduction">
            <title>Introduction</title>
            <paragraph>When working with 3D, skeletal deforms are common for characters and creatures
                and most 3D modeling applications support it. For 2D, as this function is not
                used as often, it's difficult to find mainstream software aimed for this.</paragraph>
            <paragraph>One option is to create animations in third-party software such as Spine or
                Dragonbones. This functionality is also supported built-in.</paragraph>
            <paragraph>Why would you want to do skeletal animations directly in Godot? The answer is
                that there are many advantages to it:</paragraph>
            <bullet_list bullet="*">
                <list_item>
                    <paragraph>Better integration with the engine, so less hassle importing and editing from
                        an external tool.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Ability to control particle systems, shaders, sounds, call scripts, colors,
                        transparency, etc. in animations.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The built-in skeletal system in Godot is very efficient and designed for
                        performance.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>The following tutorial will, then, explain 2D skeletal deformations.</paragraph>
        </section>
        <section ids="setup" names="setup">
            <title>Setup</title>
            <seealso>
                <paragraph>Before starting, we recommend you to go through the
                    <reference internal="True" refuri="cutout_animation#doc-cutout-animation"><inline classes="std std-ref">Cutout animation</inline></reference> tutorial to gain a general understanding of
                    animating within Godot.</paragraph>
            </seealso>
            <paragraph>For this tutorial, we will be using a single image to construct our character.
                Download it from <download_reference filename="411d24b75fb71e4ae65083a28435826d/gBot_pieces.png" refdoc="tutorials/animation/2d_skeletons" refdomain="" refexplicit="True" reftarget="img/gBot_pieces.png" reftype="download" refwarn="False"><literal classes="xref download">gBot_pieces.png</literal></download_reference> or save the
                image below.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/gBot_pieces.png'}" original_uri="img/gBot_pieces.png" uri="tutorials/animation/img/gBot_pieces.png"></image>
            <paragraph>It is also advised to download the final character image
                <download_reference filename="7c9bde383c09d42382be303c12eb4b10/gBot_complete.png" refdoc="tutorials/animation/2d_skeletons" refdomain="" refexplicit="True" reftarget="img/gBot_complete.png" reftype="download" refwarn="False"><literal classes="xref download">gBot_complete.png</literal></download_reference> to have a good reference
                for putting the different pieces together.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/gBot_complete.png'}" original_uri="img/gBot_complete.png" uri="tutorials/animation/img/gBot_complete.png"></image>
        </section>
        <section ids="creating-the-polygons" names="creating\ the\ polygons">
            <title>Creating the polygons</title>
            <paragraph>Create a new scene for your model (if it's going to be an animated character,
                you may want to use a <literal>CharacterBody2D</literal>). For ease of use, an empty 2D node is
                created as a root for the polygons.</paragraph>
            <paragraph>Begin with a <literal>Polygon2D</literal> node. There is no need to place it anywhere in the
                scene for now, so simply create it like this:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d1.png'}" original_uri="img/skel2d1.png" uri="tutorials/animation/img/skel2d1.png"></image>
            <paragraph>Select it and assign the texture with the character pieces you have downloaded
                before:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d2.png'}" original_uri="img/skel2d2.png" uri="tutorials/animation/img/skel2d2.png"></image>
            <paragraph>Drawing a polygon directly is not advised. Instead, open the "UV" dialog for the
                polygon:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d3.png'}" original_uri="img/skel2d3.png" uri="tutorials/animation/img/skel2d3.png"></image>
            <paragraph>Head over to the <emphasis>Points</emphasis> mode, select the pencil and draw a polygon around the
                desired piece:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d4.png'}" original_uri="img/skel2d4.png" uri="tutorials/animation/img/skel2d4.png"></image>
            <paragraph>Duplicate the polygon node and give it a proper name. Then, enter the "UV"
                dialog again and replace the old polygon with another one in the new desired
                piece.</paragraph>
            <paragraph>When you duplicate nodes and the next piece has a similar shape, you can edit
                the previous polygon instead of drawing a new one.</paragraph>
            <paragraph>After moving the polygon, remember to update the UV by selecting
                <strong>Edit &gt; Copy Polygon to UV</strong> in the Polygon 2D UV Editor.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d5.png'}" original_uri="img/skel2d5.png" uri="tutorials/animation/img/skel2d5.png"></image>
            <paragraph>Keep doing this until you mapped all pieces.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d6.png'}" original_uri="img/skel2d6.png" uri="tutorials/animation/img/skel2d6.png"></image>
            <paragraph>You will notice that pieces for nodes appear in the same layout as they do in
                the original texture. This is because by default, when you draw a polygon, the
                UV and points are the same.</paragraph>
            <paragraph>Rearrange the pieces and build the character. This should be pretty quick. There
                is no need to change pivots, so don't bother making sure rotation pivots for
                each piece are right; you can leave them be for now.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d7.png'}" original_uri="img/skel2d7.png" uri="tutorials/animation/img/skel2d7.png"></image>
            <paragraph>Ah, the visual order of the pieces is not correct yet, as some are covering
                wrong pieces. Rearrange the order of the nodes to fix this:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d8.png'}" original_uri="img/skel2d8.png" uri="tutorials/animation/img/skel2d8.png"></image>
            <paragraph>And there you go! It was definitely much easier than in the cutout tutorial.</paragraph>
        </section>
        <section ids="creating-the-skeleton" names="creating\ the\ skeleton">
            <title>Creating the skeleton</title>
            <paragraph>Create a <literal>Skeleton2D</literal> node as a child of the root node. This will be the base
                of our skeleton:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d9.png'}" original_uri="img/skel2d9.png" uri="tutorials/animation/img/skel2d9.png"></image>
            <paragraph>Create a <literal>Bone2D</literal> node as a child of the skeleton. Put it on the hip (usually
                skeletons start here). The bone will be pointing to the right, but you can
                ignore this for now.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d10.png'}" original_uri="img/skel2d10.png" uri="tutorials/animation/img/skel2d10.png"></image>
            <paragraph>Keep creating bones in hierarchy and naming them accordingly.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d11.png'}" original_uri="img/skel2d11.png" uri="tutorials/animation/img/skel2d11.png"></image>
            <paragraph>At the end of this chain, there will be a <emphasis>jaw</emphasis> node. It is, again, very short
                and pointing to the right. This is normal for bones without children. The length
                of <emphasis>tip</emphasis> bones can be changed with a property in the inspector:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d12.png'}" original_uri="img/skel2d12.png" uri="tutorials/animation/img/skel2d12.png"></image>
            <paragraph>In this case, we don't need to rotate the bone (coincidentally the jaw points
                right in the sprite), but in case you need to, feel free to do it. Again, this
                is only really needed for tip bones as nodes with children don't usually need a
                length or a specific rotation.</paragraph>
            <paragraph>Keep going and build the whole skeleton:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d13.png'}" original_uri="img/skel2d13.png" uri="tutorials/animation/img/skel2d13.png"></image>
            <paragraph>You will notice that all bones raise a warning about a missing rest pose. A rest
                pose is the default pose for a skeleton, you can come back to it anytime you want
                (which is very handy for animating). To set one click on the <emphasis>skeleton</emphasis> node in
                the scene tree, then click on the <inline classes="role-button role-ui">Skeleton2D</inline> button in the toolbar, and select
                <literal>Overwrite Rest Pose</literal> from the dropdown menu.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d14.webp'}" original_uri="img/skel2d14.webp" uri="tutorials/animation/img/skel2d14.webp"></image>
            <paragraph>The warnings will go away. If you modify the skeleton (add/remove bones) you
                will need to set the rest pose again.</paragraph>
        </section>
        <section ids="deforming-the-polygons" names="deforming\ the\ polygons">
            <title>Deforming the polygons</title>
            <paragraph>Select the previously created polygons and assign the skeleton node to their
                <literal>Skeleton</literal> property. This will ensure that they can eventually be deformed by
                it.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d15.png'}" original_uri="img/skel2d15.png" uri="tutorials/animation/img/skel2d15.png"></image>
            <paragraph>Click the property highlighted above and select the skeleton node:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d16.png'}" original_uri="img/skel2d16.png" uri="tutorials/animation/img/skel2d16.png"></image>
            <paragraph>Again, open the UV editor for the polygon and go to the <emphasis>Bones</emphasis> section.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d17.png'}" original_uri="img/skel2d17.png" uri="tutorials/animation/img/skel2d17.png"></image>
            <paragraph>You will not be able to paint weights yet. For this you need to synchronize the
                list of bones from the skeleton with the polygon. This step is done only once
                and manually (unless you modify the skeleton by adding/removing/renaming bones).
                It ensures that your rigging information is kept in the polygon, even if a
                skeleton node is accidentally lost or the skeleton modified. Push the "Sync
                Bones to Polygon" button to sync the list.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d18.png'}" original_uri="img/skel2d18.png" uri="tutorials/animation/img/skel2d18.png"></image>
            <paragraph>The list of bones will automatically appear. By default, your polygon has no
                weight assigned to any of them. Select the bones you want to assign weight to
                and paint them:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d19.png'}" original_uri="img/skel2d19.png" uri="tutorials/animation/img/skel2d19.png"></image>
            <paragraph>Points in white have a full weight assigned, while points in black are not
                influenced by the bone. If the same point is painted white for multiple bones,
                the influence will be distributed amongst them (so usually there is not that
                much need to use shades in-between unless you want to polish the bending
                effect).</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d20.gif'}" original_uri="img/skel2d20.gif" uri="tutorials/animation/img/skel2d20.gif"></image>
            <paragraph>After painting the weights, animating the bones (NOT the polygons!) will have
                the desired effect of modifying and bending the polygons accordingly. As you
                only need to animate bones in this approach, work becomes much easier!</paragraph>
            <paragraph>But it's not all roses. Trying to animate bones that bend the polygon will often
                yield unexpected results:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d21.gif'}" original_uri="img/skel2d21.gif" uri="tutorials/animation/img/skel2d21.gif"></image>
            <paragraph>This happens because Godot generates internal triangles that connect the points
                when drawing the polygon. They don't always bend the way you would expect. To
                solve this, you need to set hints in the geometry to clarify how you expect it
                to deform.</paragraph>
        </section>
        <section ids="internal-vertices" names="internal\ vertices">
            <title>Internal vertices</title>
            <paragraph>Open the UV menu for each bone again and go to the <emphasis>Points</emphasis> section. Add some
                internal vertices in the regions where you expect the geometry to bend:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d22.png'}" original_uri="img/skel2d22.png" uri="tutorials/animation/img/skel2d22.png"></image>
            <paragraph>Now, go to the <emphasis>Polygon</emphasis> section and redraw your own polygons with more detail.
                Imagine that, as your polygons bend, you need to make sure they deform the least
                possible, so experiment a bit to find the right setup.</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d23.png'}" original_uri="img/skel2d23.png" uri="tutorials/animation/img/skel2d23.png"></image>
            <paragraph>Once you start drawing, the original polygon will disappear and you will be free
                to create your own:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d24.png'}" original_uri="img/skel2d24.png" uri="tutorials/animation/img/skel2d24.png"></image>
            <paragraph>This amount of detail is usually fine, though you may want to have more
                fine-grained control over where triangles go. Experiment by yourself until you
                get the results you like.</paragraph>
            <paragraph><strong>Note:</strong> Don't forget that your newly added internal vertices also need weight
                painting! Go to the <emphasis>Bones</emphasis> section again to assign them to the right bones.</paragraph>
            <paragraph>Once you are all set, you will get much better results:</paragraph>
            <image candidates="{'*': 'tutorials/animation/img/skel2d25.gif'}" original_uri="img/skel2d25.gif" uri="tutorials/animation/img/skel2d25.gif"></image>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
