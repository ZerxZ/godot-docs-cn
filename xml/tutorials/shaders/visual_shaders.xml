<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/shaders/visual_shaders.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-visual-shaders"></target>
    <section ids="using-visualshaders doc-visual-shaders" names="using\ visualshaders doc_visual_shaders">
        <title>Using VisualShaders</title>
        <paragraph>VisualShaders are the visual alternative for creating shaders.</paragraph>
        <paragraph>As shaders are inherently linked to visuals, the graph-based approach with
            previews of textures, materials, etc. offers a lot of additional convenience
            compared to purely script-based shaders. On the other hand, VisualShaders do not
            expose all features of the shader script and using both in parallel might be
            necessary for specific effects.</paragraph>
        <note>
            <paragraph>If you are not familiar with shaders, start by reading
                <reference internal="True" refuri="introduction_to_shaders#doc-introduction-to-shaders"><inline classes="std std-ref">Introduction to shaders</inline></reference>.</paragraph>
        </note>
        <section ids="creating-a-visualshader" names="creating\ a\ visualshader">
            <title>Creating a VisualShader</title>
            <paragraph>VisualShaders can be created in any <reference internal="True" refuri="../../classes/class_shadermaterial#class-shadermaterial"><inline classes="std std-ref">ShaderMaterial</inline></reference>. To begin using
                VisualShaders, create a new <literal>ShaderMaterial</literal> in an object of your choice.</paragraph>
            <image candidates="{'*': 'tutorials/shaders/img/shader_material_create_mesh.webp'}" original_uri="img/shader_material_create_mesh.webp" uri="tutorials/shaders/img/shader_material_create_mesh.webp"></image>
            <paragraph>Then assign a <reference internal="True" refuri="../../classes/class_shader#class-shader"><inline classes="std std-ref">Shader</inline></reference> resource to the <literal>Shader</literal> property.</paragraph>
            <image candidates="{'*': 'tutorials/shaders/img/visual_shader_create.webp'}" original_uri="img/visual_shader_create.webp" uri="tutorials/shaders/img/visual_shader_create.webp"></image>
            <paragraph>Click on the new <literal>Shader</literal> resource and the Create Shader dialog will
                open automatically. Change the Type option to <reference internal="True" refuri="../../classes/class_visualshader#class-visualshader"><inline classes="std std-ref">VisualShader</inline></reference>
                in the dropdown, then give it a name.</paragraph>
            <image candidates="{'*': 'tutorials/shaders/img/visual_shader_create2.webp'}" original_uri="img/visual_shader_create2.webp" uri="tutorials/shaders/img/visual_shader_create2.webp"></image>
            <paragraph>Click on the visual shader you just created to open the Shader Editor.
                The layout of the Shader Editor comprises four parts, a file list on
                the left, the upper toolbar, the graph itself, and a material preview
                on the right that can be toggled off</paragraph>
            <image candidates="{'*': 'tutorials/shaders/img/visual_shader_editor2.webp'}" original_uri="img/visual_shader_editor2.webp" uri="tutorials/shaders/img/visual_shader_editor2.webp"></image>
            <paragraph>From left to right in the toolbar:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>The arrow can be used to toggle the files panel's visibility.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The <literal>File</literal> button opens a dropdown menu for saving, loading, and creating
                        files.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The <literal>Add Node</literal> button displays a popup menu to let you add nodes to the
                        shader graph.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The drop-down menu is the shader type: Vertex, Fragment and Light. Like for
                        script shaders, it defines what built-in nodes will be available.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The following buttons and number input control the zooming level, grid
                        snapping and distance between grid lines (in pixels).</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The toggle controls if the graph minimap in the bottom right of the editor
                        is visible or not.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The automatically arrange selected nodes button will try to organize any
                        nodes you have selected as efficiently and cleanly as possible.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The Manage Varyings button opens a dropdown that lets you add or remove a
                        varying.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The show generated code button shows shader code corresponding to your graph.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The toggle turns the material preview on or off.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The <literal>Online Docs</literal> button opens this documentation page in your web browser.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The last button allows you to put the shader editor in its own window,
                        separate from the rest of the editor.</paragraph>
                </list_item>
            </bullet_list>
            <note>
                <paragraph>Although VisualShaders do not require coding, they share the same logic with
                    script shaders. It is advised to learn the basics of both to have a good
                    understanding of the shading pipeline.</paragraph>
                <paragraph>The visual shader graph is converted to a script shader behind the scene,
                    and you can see this code by pressing the last button in the toolbar. This
                    can be convenient to understand what a given node does and how to reproduce
                    it in scripts.</paragraph>
            </note>
        </section>
        <section ids="using-the-visual-shader-editor" names="using\ the\ visual\ shader\ editor">
            <title>Using the Visual Shader Editor</title>
            <paragraph>By default, every new <literal>VisualShader</literal> will have an output node. Every node
                connection ends at one of the output node's sockets. A node is the basic unit to
                create your shader. To add a new node, click on the <literal>Add Node</literal> button on the
                upper left corner or right click on any empty location in the graph, and a menu
                will pop up.</paragraph>
            <image candidates="{'*': 'tutorials/shaders/img/vs_popup.webp'}" original_uri="img/vs_popup.webp" uri="tutorials/shaders/img/vs_popup.webp"></image>
            <paragraph>This popup has the following properties:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>If you right-click on the graph, this menu will be called at the cursor
                        position and the created node, in that case, will also be placed under that
                        position; otherwise, it will be created at the graph's center.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>It can be resized horizontally and vertically allowing more content to be
                        shown. Size transform and tree content position are saved between the calls,
                        so if you suddenly closed the popup you can easily restore its previous state.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>The <literal>Expand All</literal> and <literal>Collapse All</literal> options in the drop-down option menu
                        can be used to easily list the available nodes.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>You can also drag and drop nodes from the popup onto the graph.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>While the popup has nodes sorted in categories, it can seem overwhelming at
                first. Try to add some of the nodes, plug them in the output socket and observe
                what happens.</paragraph>
            <paragraph>When connecting any <literal>scalar</literal> output to a <literal>vector</literal> input, all components of
                the vector will take the value of the scalar.</paragraph>
            <paragraph>When connecting any <literal>vector</literal> output to a <literal>scalar</literal> input, the value of the
                scalar will be the average of the vector's components.</paragraph>
        </section>
        <section ids="visual-shader-node-interface" names="visual\ shader\ node\ interface">
            <title>Visual Shader node interface</title>
            <paragraph>Visual shader nodes have input and output ports. The input ports are located on the left side of the node, and output ports are located on the right side of the node.</paragraph>
            <figure>
                <image candidates="{'*': 'tutorials/shaders/img/vs_node.webp'}" original_uri="img/vs_node.webp" uri="tutorials/shaders/img/vs_node.webp"></image>
            </figure>
            <paragraph>These ports are colored to differentiate type of port:</paragraph>
            <substitution_definition names="scalar"><image alt="scalar" candidates="{'*': 'tutorials/shaders/img/vs_scalar.webp'}" original_uri="img/vs_scalar.webp" uri="tutorials/shaders/img/vs_scalar.webp"></image></substitution_definition>
            <substitution_definition names="vector"><image alt="vector" candidates="{'*': 'tutorials/shaders/img/vs_vector.webp'}" original_uri="img/vs_vector.webp" uri="tutorials/shaders/img/vs_vector.webp"></image></substitution_definition>
            <substitution_definition names="boolean"><image alt="boolean" candidates="{'*': 'tutorials/shaders/img/vs_boolean.webp'}" original_uri="img/vs_boolean.webp" uri="tutorials/shaders/img/vs_boolean.webp"></image></substitution_definition>
            <substitution_definition names="transform"><image alt="transform" candidates="{'*': 'tutorials/shaders/img/vs_transform.webp'}" original_uri="img/vs_transform.webp" uri="tutorials/shaders/img/vs_transform.webp"></image></substitution_definition>
            <substitution_definition names="sampler"><image alt="sampler" candidates="{'*': 'tutorials/shaders/img/vs_sampler.webp'}" original_uri="img/vs_sampler.webp" uri="tutorials/shaders/img/vs_sampler.webp"></image></substitution_definition>
            <table classes="colwidths-auto" ids="id1">
                <title>Port types</title>
                <tgroup cols="4">
                    <colspec colwidth="25"></colspec>
                    <colspec colwidth="25"></colspec>
                    <colspec colwidth="25"></colspec>
                    <colspec colwidth="25"></colspec>
                    <thead>
                        <row>
                            <entry>
                                <paragraph>Type</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Color</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Description</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Example</paragraph>
                            </entry>
                        </row>
                    </thead>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph>Scalar</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Gray</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Scalar is a single value.</paragraph>
                            </entry>
                            <entry>
                                <paragraph><image alt="scalar" candidates="{'*': 'tutorials/shaders/img/vs_scalar.webp'}" original_uri="img/vs_scalar.webp" uri="tutorials/shaders/img/vs_scalar.webp"></image></paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Vector</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Purple</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Vector is a set of values.</paragraph>
                            </entry>
                            <entry>
                                <paragraph><image alt="vector" candidates="{'*': 'tutorials/shaders/img/vs_vector.webp'}" original_uri="img/vs_vector.webp" uri="tutorials/shaders/img/vs_vector.webp"></image></paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Boolean</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Green</paragraph>
                            </entry>
                            <entry>
                                <paragraph>On or off, true or false.</paragraph>
                            </entry>
                            <entry>
                                <paragraph><image alt="boolean" candidates="{'*': 'tutorials/shaders/img/vs_boolean.webp'}" original_uri="img/vs_boolean.webp" uri="tutorials/shaders/img/vs_boolean.webp"></image></paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Transform</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Pink</paragraph>
                            </entry>
                            <entry>
                                <paragraph>A matrix, usually used to transform vertices.</paragraph>
                            </entry>
                            <entry>
                                <paragraph><image alt="transform" candidates="{'*': 'tutorials/shaders/img/vs_transform.webp'}" original_uri="img/vs_transform.webp" uri="tutorials/shaders/img/vs_transform.webp"></image></paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph>Sampler</paragraph>
                            </entry>
                            <entry>
                                <paragraph>Orange</paragraph>
                            </entry>
                            <entry>
                                <paragraph>A texture sampler. It can be used to sample textures.</paragraph>
                            </entry>
                            <entry>
                                <paragraph><image alt="sampler" candidates="{'*': 'tutorials/shaders/img/vs_sampler.webp'}" original_uri="img/vs_sampler.webp" uri="tutorials/shaders/img/vs_sampler.webp"></image></paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
            <paragraph>All of the types are used in the calculations of vertices, fragments, and lights in the shader. For example: matrix multiplication,
                vector addition, or scalar division.</paragraph>
            <paragraph>There are other types but these are the main ones.</paragraph>
        </section>
        <section ids="visual-shader-nodes" names="visual\ shader\ nodes">
            <title>Visual Shader nodes</title>
            <paragraph>Below are some special nodes that are worth knowing about. The list is not
                exhaustive and might be expanded with more nodes and examples.</paragraph>
            <section ids="expression-node" names="expression\ node">
                <title>Expression node</title>
                <paragraph>The <literal>Expression</literal> node allows you to write Godot Shading Language (GLSL-like)
                    expressions inside your visual shaders. The node has buttons to add any amount
                    of required input and output ports and can be resized. You can also set up the
                    name and type of each port. The expression you have entered will apply
                    immediately to the material (once the focus leaves the expression text box). Any
                    parsing or compilation errors will be printed to the Output tab. The outputs are
                    initialized to their zero value by default. The node is located under the
                    Special tab and can be used in all shader modes.</paragraph>
                <paragraph>The possibilities of this node are almost limitless – you can write complex
                    procedures, and use all the power of text-based shaders, such as loops, the
                    <literal>discard</literal> keyword, extended types, etc. For example:</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_expression2.png'}" original_uri="img/vs_expression2.png" uri="tutorials/shaders/img/vs_expression2.png"></image>
            </section>
            <section ids="reroute-node" names="reroute\ node">
                <title>Reroute node</title>
                <paragraph>The <literal>Reroute</literal> node is used purely for organizational purposes. In a complicated
                    shader with many nodes you may find that the paths between nodes can make
                    things hard to read. Reroute, as its name suggests, allows you to adjust the path
                    between nodes to make things easier to read. You can even have multiple reroute
                    nodes for a single path, which can be used to make right angles.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_reroute.webp'}" original_uri="img/vs_reroute.webp" uri="tutorials/shaders/img/vs_reroute.webp"></image>
                <paragraph>To move a reroute node move your mouse cursor above it, and grab the handle that
                    appears.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_reroute_handle.webp'}" original_uri="img/vs_reroute_handle.webp" uri="tutorials/shaders/img/vs_reroute_handle.webp"></image>
            </section>
            <section ids="fresnel-node" names="fresnel\ node">
                <title>Fresnel node</title>
                <paragraph>The <literal>Fresnel</literal> node is designed to accept normal and view vectors and produces
                    a scalar which is the saturated dot product between them. Additionally, you can
                    setup the inversion and the power of equation. The <literal>Fresnel</literal> node is great for
                    adding a rim-like lighting effect to objects.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_fresnel.webp'}" original_uri="img/vs_fresnel.webp" uri="tutorials/shaders/img/vs_fresnel.webp"></image>
            </section>
            <section ids="boolean-node" names="boolean\ node">
                <title>Boolean node</title>
                <paragraph>The <literal>Boolean</literal> node can be converted to <literal>Scalar</literal> or <literal>Vector</literal> to represent
                    <literal>0</literal> or <literal>1</literal> and <literal>(0, 0, 0)</literal> or <literal>(1, 1, 1)</literal> respectively. This property
                    can be used to enable or disable some effect parts with one click.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_boolean.gif'}" original_uri="img/vs_boolean.gif" uri="tutorials/shaders/img/vs_boolean.gif"></image>
            </section>
            <section ids="if-node" names="if\ node">
                <title>If node</title>
                <paragraph>The <literal>If</literal> node allows you to setup a vector which will be returned the result
                    of the comparison between <literal>a</literal> and <literal>b</literal>. There are three vectors which can be
                    returned: <literal>a == b</literal> (in that case the tolerance parameter is provided as a
                    comparison threshold – by default it is equal to the minimal value, i.e.
                    <literal>0.00001</literal>), <literal>a &gt; b</literal> and <literal>a &lt; b</literal>.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_if.png'}" original_uri="img/vs_if.png" uri="tutorials/shaders/img/vs_if.png"></image>
            </section>
            <section ids="switch-node" names="switch\ node">
                <title>Switch node</title>
                <paragraph>The <literal>Switch</literal> node returns a vector if the boolean condition is <literal>true</literal> or
                    <literal>false</literal>. <literal>Boolean</literal> was introduced above. If you want to convert a vector
                    to a true boolean, all components of the vector should be non-zero.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_switch.webp'}" original_uri="img/vs_switch.webp" uri="tutorials/shaders/img/vs_switch.webp"></image>
            </section>
            <section ids="mesh-emitter" names="mesh\ emitter">
                <title>Mesh Emitter</title>
                <paragraph>The <literal>Mesh Emitter</literal> node is used for emitting particles from mesh vertices. This is
                    only available for shaders that are in <literal>Particles</literal> mode.</paragraph>
                <paragraph>Keep in mind that not all 3D objects are mesh files. a glTF file can't be dragged
                    and dropped into the graph. However, you can create an inherited scene from it,
                    save the mesh in that scene as its own file, and use that.</paragraph>
                <image candidates="{'*': 'tutorials/shaders/img/vs_meshemitter.webp'}" original_uri="img/vs_meshemitter.webp" uri="tutorials/shaders/img/vs_meshemitter.webp"></image>
                <paragraph>You can also drag and drop obj files into the graph editor to add the node
                    for that specific mesh, other mesh files will not work for this.</paragraph>
                <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
            </section>
        </section>
    </section>
</document>
