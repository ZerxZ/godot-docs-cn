<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/shaders/converting_glsl_to_godot_shaders.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-converting-glsl-to-godot-shaders"></target>
    <section ids="converting-glsl-to-godot-shaders doc-converting-glsl-to-godot-shaders" names="converting\ glsl\ to\ godot\ shaders doc_converting_glsl_to_godot_shaders">
        <title>Converting GLSL to Godot shaders</title>
        <paragraph>This document explains the differences between Godot's shading language and GLSL
            and gives practical advice on how to migrate shaders from other sources, such as
            Shadertoy and The Book of Shaders, into Godot shaders.</paragraph>
        <paragraph>For detailed information on Godot's shading language, please refer to the
            <reference internal="True" refuri="shader_reference/shading_language#doc-shading-language"><inline classes="std std-ref">Shading Language</inline></reference> reference.</paragraph>
        <section ids="glsl" names="glsl">
            <title>GLSL</title>
            <paragraph>Godot uses a shading language based on GLSL with the addition of a few
                quality-of-life features. Accordingly, most features available in GLSL are
                available in Godot's shading language.</paragraph>
            <section ids="shader-programs" names="shader\ programs">
                <title>Shader programs</title>
                <paragraph>In GLSL, each shader uses a separate program. You have one program for the
                    vertex shader and one for the fragment shader. In Godot, you have a single
                    shader that contains a <literal>vertex</literal> and/or a <literal>fragment</literal> function. If you only
                    choose to write one, Godot will supply the other.</paragraph>
                <paragraph>Godot allows uniform variables and functions to be shared by defining the
                    fragment and vertex shaders in one file. In GLSL, the vertex and fragment
                    programs cannot share variables except when varyings are used.</paragraph>
            </section>
            <section ids="vertex-attributes" names="vertex\ attributes">
                <title>Vertex attributes</title>
                <paragraph>In GLSL, you can pass in per-vertex information using attributes and have the
                    flexibility to pass in as much or as little as you want. In Godot, you have a
                    set number of input attributes, including <literal>VERTEX</literal> (position), <literal>COLOR</literal>,
                    <literal>UV</literal>, <literal>UV2</literal>, <literal>NORMAL</literal>. Each shaders' page in the shader reference section
                    of the documentation comes with a complete list of its vertex attributes.</paragraph>
            </section>
            <section ids="gl-position" names="gl_position">
                <title>gl_Position</title>
                <paragraph><literal>gl_Position</literal> receives the final position of a vertex specified in the vertex
                    shader. It is specified by the user in clip space. Typically, in GLSL, the model
                    space vertex position is passed in using a vertex attribute called <literal>position</literal>
                    and you handle the conversion from model space to clip space manually.</paragraph>
                <paragraph>In Godot, <literal>VERTEX</literal> specifies the vertex position in model space at the
                    beginning of the <literal>vertex</literal> function. Godot also handles the final conversion to
                    clip space after the user-defined <literal>vertex</literal> function is run. If you want to
                    skip the conversion from model to view space, you can set the <literal>render_mode</literal> to
                    <literal>skip_vertex_transform</literal>. If you want to skip all transforms, set
                    <literal>render_mode</literal> to <literal>skip_vertex_transform</literal> and set the <literal>PROJECTION_MATRIX</literal>
                    to <literal>mat4(1.0)</literal> in order to nullify the final transform from view space to clip
                    space.</paragraph>
            </section>
            <section ids="varyings" names="varyings">
                <title>Varyings</title>
                <paragraph>Varyings are a type of variable that can be passed from the vertex shader to the
                    fragment shader. In modern GLSL (3.0 and up), varyings are defined with the
                    <literal>in</literal> and <literal>out</literal> keywords. A variable going out of the vertex shader is
                    defined with <literal>out</literal> in the vertex shader and <literal>in</literal> inside the fragment shader.</paragraph>
            </section>
            <section dupnames="main" ids="main">
                <title>Main</title>
                <paragraph>In GLSL, each shader program looks like a self-contained C-style program.
                    Accordingly, the main entry point is <literal>main</literal>. If you are copying a vertex
                    shader, rename <literal>main</literal> to <literal>vertex</literal> and if you are copying a fragment shader,
                    rename <literal>main</literal> to <literal>fragment</literal>.</paragraph>
            </section>
            <section ids="macros" names="macros">
                <title>Macros</title>
                <paragraph>The <reference internal="True" refuri="shader_reference/shader_preprocessor#doc-shader-preprocessor"><inline classes="std std-ref">Godot shader preprocessor</inline></reference> supports the following macros:</paragraph>
                <bullet_list bullet="*">
                    <list_item>
                        <paragraph><literal>#define</literal> / <literal>#undef</literal></paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><literal>#if</literal>, <literal>#elif</literal>, <literal>#else</literal>, <literal>#endif</literal>, <literal>defined()</literal>, <literal>#ifdef</literal>, <literal>#ifndef</literal></paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><literal>#include</literal> (only <literal>.gdshaderinc</literal> files and with a maximum depth of 25)</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><literal>#pragma disable_preprocessor</literal>, which disables preprocessing for the rest of the file</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section dupnames="variables" ids="variables">
                <title>Variables</title>
                <paragraph>GLSL has many built-in variables that are hard-coded. These variables are not
                    uniforms, so they are not editable from the main program.</paragraph>
                <table>
                    <tgroup cols="4">
                        <colspec colwidth="21"></colspec>
                        <colspec colwidth="9"></colspec>
                        <colspec colwidth="24"></colspec>
                        <colspec colwidth="53"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Variable</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Equivalent</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>gl_FragColor</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>out vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>COLOR</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Output color for each pixel.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>gl_FragCoord</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>FRAGCOORD</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>For full screen quads. For smaller quads, use UV.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>gl_Position</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>VERTEX</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Position of Vertex, output from Vertex Shader.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>gl_PointSize</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>float</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>POINT_SIZE</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Size of Point primitive.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>gl_PointCoord</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec2</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>POINT_COORD</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Position on point when drawing Point primitives.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>gl_FrontFacing</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>bool</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>FRONT_FACING</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>True if front face of primitive.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
                <target refid="glsl-coordinates"></target>
            </section>
            <section dupnames="coordinates" ids="coordinates glsl-coordinates" names="glsl_coordinates">
                <title>Coordinates</title>
                <paragraph><literal>gl_FragCoord</literal> in GLSL and <literal>FRAGCOORD</literal> in the Godot shading language use the
                    same coordinate system. If using UV in Godot, the y-coordinate will be flipped
                    upside down.</paragraph>
            </section>
            <section ids="precision" names="precision">
                <title>Precision</title>
                <paragraph>In GLSL, you can define the precision of a given type (float or int) at the top
                    of the shader with the <literal>precision</literal> keyword. In Godot, you can set the
                    precision of individual variables as you need by placing precision qualifiers
                    <literal>lowp</literal>, <literal>mediump</literal>, and <literal>highp</literal> before the type when defining the variable.
                    For more information, see the <reference internal="True" refuri="shader_reference/shading_language#doc-shading-language"><inline classes="std std-ref">Shading Language</inline></reference>
                    reference.</paragraph>
            </section>
        </section>
        <section dupnames="shadertoy" ids="shadertoy">
            <title>Shadertoy</title>
            <paragraph><reference name="Shadertoy" refuri="https://www.shadertoy.com/results?query=&amp;sort=popular&amp;from=10&amp;num=4">Shadertoy</reference><target ids="id1" names="shadertoy" refuri="https://www.shadertoy.com/results?query=&amp;sort=popular&amp;from=10&amp;num=4"></target>
                is a website that makes it easy to write fragment shaders and
                create <reference name="pure magic" refuri="https://www.shadertoy.com/view/4tjGRh">pure magic</reference><target ids="pure-magic" names="pure\ magic" refuri="https://www.shadertoy.com/view/4tjGRh"></target>.</paragraph>
            <paragraph>Shadertoy does not give the user full control over the shader. It handles all
                the input and uniforms and only lets the user write the fragment shader.</paragraph>
            <section dupnames="types" ids="types">
                <title>Types</title>
                <paragraph>Shadertoy uses the webgl spec, so it runs a slightly different version of GLSL.
                    However, it still has the regular types, including constants and macros.</paragraph>
            </section>
            <section ids="mainimage" names="mainimage">
                <title>mainImage</title>
                <paragraph>The main point of entry to a Shadertoy shader is the <literal>mainImage</literal> function.
                    <literal>mainImage</literal> has two parameters, <literal>fragColor</literal> and <literal>fragCoord</literal>, which
                    correspond to <literal>COLOR</literal> and <literal>FRAGCOORD</literal> in Godot, respectively. These
                    parameters are handled automatically in Godot, so you do not need to include
                    them as parameters yourself. Anything in the <literal>mainImage</literal> function should be
                    copied into the <literal>fragment</literal> function when porting to Godot.</paragraph>
            </section>
            <section dupnames="variables" ids="id2">
                <title>Variables</title>
                <paragraph>In order to make writing fragment shaders straightforward and easy, Shadertoy
                    handles passing a lot of helpful information from the main program into the
                    fragment shader for you. A few of these have no equivalents in Godot because
                    Godot has chosen not to make them available by default. This is okay because
                    Godot gives you the ability to make your own uniforms. For variables whose
                    equivalents are listed as "Provide with Uniform", users are responsible for
                    creating that uniform themselves. The description gives the reader a hint about
                    what they can pass in as a substitute.</paragraph>
                <table>
                    <tgroup cols="4">
                        <colspec colwidth="21"></colspec>
                        <colspec colwidth="9"></colspec>
                        <colspec colwidth="24"></colspec>
                        <colspec colwidth="53"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Variable</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Equivalent</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>fragColor</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>out vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>COLOR</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Output color for each pixel.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>fragCoord</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec2</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>FRAGCOORD.xy</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>For full screen quads. For smaller quads, use UV.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iResolution</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec3</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>1.0 / SCREEN_PIXEL_SIZE</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Can also pass in manually.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iTime</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>float</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>TIME</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Time since shader started.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iTimeDelta</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>float</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Provide with Uniform</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Time to render previous frame.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iFrame</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>float</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Provide with Uniform</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Frame number.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iChannelTime[4]</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>float</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Provide with Uniform</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Time since that particular texture started.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iMouse</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Provide with Uniform</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Mouse position in pixel coordinates.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iDate</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Provide with Uniform</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Current date, expressed in seconds.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iChannelResolution[4]</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec3</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>1.0 / TEXTURE_PIXEL_SIZE</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Resolution of particular texture.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>iChanneli</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Sampler2D</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>TEXTURE</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Godot provides only one built-in; user can make more.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </section>
            <section dupnames="coordinates" ids="id3">
                <title>Coordinates</title>
                <paragraph><literal>fragCoord</literal> behaves the same as <literal>gl_FragCoord</literal> in <reference internal="True" refid="glsl-coordinates"><inline classes="std std-ref">GLSL</inline></reference> and <literal>FRAGCOORD</literal> in Godot.</paragraph>
            </section>
        </section>
        <section dupnames="the\ book\ of\ shaders" ids="the-book-of-shaders">
            <title>The Book of Shaders</title>
            <paragraph>Similar to Shadertoy, <reference name="The Book of Shaders" refuri="https://thebookofshaders.com">The Book of Shaders</reference><target ids="id4" names="the\ book\ of\ shaders" refuri="https://thebookofshaders.com"></target>
                provides access to a fragment shader in the web browser, with which the user may
                interact. The user is restricted to writing fragment shader code with a set list
                of uniforms passed in and with no ability to add additional uniforms.</paragraph>
            <paragraph>For further help on porting shaders to various frameworks generally, The Book of
                Shaders provides a <reference name="page" refuri="https://thebookofshaders.com/04">page</reference><target ids="page" names="page" refuri="https://thebookofshaders.com/04"></target> on running shaders
                in various frameworks.</paragraph>
            <section dupnames="types" ids="id5">
                <title>Types</title>
                <paragraph>The Book of Shaders uses the webgl spec, so it runs a slightly different version
                    of GLSL. However, it still has the regular types, including constants and
                    macros.</paragraph>
            </section>
            <section dupnames="main" ids="id6">
                <title>Main</title>
                <paragraph>The entry point for a Book of Shaders fragment shader is <literal>main</literal>, just like in
                    GLSL. Everything written in a Book of Shaders <literal>main</literal> function should be copied
                    into Godot's <literal>fragment</literal> function.</paragraph>
            </section>
            <section dupnames="variables" ids="id7">
                <title>Variables</title>
                <paragraph>The Book of Shaders sticks closer to plain GLSL than Shadertoy does. It also
                    implements fewer uniforms than Shadertoy.</paragraph>
                <table>
                    <tgroup cols="4">
                        <colspec colwidth="21"></colspec>
                        <colspec colwidth="9"></colspec>
                        <colspec colwidth="24"></colspec>
                        <colspec colwidth="53"></colspec>
                        <thead>
                            <row>
                                <entry>
                                    <paragraph>Variable</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Type</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Equivalent</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Description</paragraph>
                                </entry>
                            </row>
                        </thead>
                        <tbody>
                            <row>
                                <entry>
                                    <paragraph>gl_FragColor</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>out vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>COLOR</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Output color for each pixel.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>gl_FragCoord</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec4</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>FRAGCOORD</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>For full screen quads. For smaller quads, use UV.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>u_resolution</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec2</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>1.0 / SCREEN_PIXEL_SIZE</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Can also pass in manually.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>u_time</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>float</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>TIME</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Time since shader started.</paragraph>
                                </entry>
                            </row>
                            <row>
                                <entry>
                                    <paragraph>u_mouse</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>vec2</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Provide with Uniform</paragraph>
                                </entry>
                                <entry>
                                    <paragraph>Mouse position in pixel coordinates.</paragraph>
                                </entry>
                            </row>
                        </tbody>
                    </tgroup>
                </table>
            </section>
            <section dupnames="coordinates" ids="id8">
                <title>Coordinates</title>
                <paragraph>The Book of Shaders uses the same coordinate system as
                    <reference internal="True" refid="glsl-coordinates"><inline classes="std std-ref">GLSL</inline></reference>.</paragraph>
                <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
            </section>
        </section>
    </section>
</document>
