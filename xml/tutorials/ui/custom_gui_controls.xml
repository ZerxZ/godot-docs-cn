<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/ui/custom_gui_controls.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-custom-gui-controls"></target>
    <section ids="custom-gui-controls doc-custom-gui-controls" names="custom\ gui\ controls doc_custom_gui_controls">
        <title>Custom GUI controls</title>
        <section ids="so-many-controls" names="so\ many\ controls...">
            <title>So many controls...</title>
            <paragraph>Yet there are never enough. Creating your own custom controls that act
                just the way you want them to is an obsession of almost every GUI
                programmer. Godot provides plenty of them, but they may not work exactly
                the way you want. Before contacting the developers with a pull-request
                to support diagonal scrollbars, at least it will be good to know how to
                create these controls easily from script.</paragraph>
        </section>
        <section ids="drawing" names="drawing">
            <title>Drawing</title>
            <paragraph>For drawing, it is recommended to check the <reference internal="True" refuri="../2d/custom_drawing_in_2d#doc-custom-drawing-in-2d"><inline classes="std std-ref">Custom drawing in 2D</inline></reference> tutorial.
                The same applies. Some functions are worth mentioning due to their
                usefulness when drawing, so they will be detailed next:</paragraph>
            <section ids="checking-control-size" names="checking\ control\ size">
                <title>Checking control size</title>
                <paragraph>Unlike 2D nodes, "size" is important with controls, as it helps to
                    organize them in proper layouts. For this, the
                    <reference internal="True" refuri="../../classes/class_control#class-control-property-size"><inline classes="std std-ref">Control.size</inline></reference>
                    property is provided. Checking it during <literal>_draw()</literal> is vital to ensure
                    everything is kept in-bounds.</paragraph>
            </section>
            <section ids="checking-focus" names="checking\ focus">
                <title>Checking focus</title>
                <paragraph>Some controls (such as buttons or text editors) might provide input
                    focus for keyboard or joypad input. Examples of this are entering text
                    or pressing a button. This is controlled with the
                    <reference internal="True" refuri="../../classes/class_control#class-control-property-focus-mode"><inline classes="std std-ref">Control.focus_mode</inline></reference>
                    property. When drawing, and if the control supports input focus, it is
                    always desired to show some sort of indicator (highlight, box, etc.) to
                    indicate that this is the currently focused control. To check for this
                    status, the <reference internal="True" refuri="../../classes/class_control#class-control-method-has-focus"><inline classes="std std-ref">Control.has_focus()</inline></reference> method
                    exists. Example</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _draw():
    if has_focus():
         draw_selected()
    else:
         draw_normal()</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Draw()
{
    if (HasFocus())
    {
        DrawSelected()
    }
    else
    {
        DrawNormal();
    }
}</literal_block>
                    </div>
                </container>
            </section>
        </section>
        <section ids="sizing" names="sizing">
            <title>Sizing</title>
            <paragraph>As mentioned before, size is important to controls. This allows
                them to lay out properly, when set into grids, containers, or anchored.
                Controls, most of the time, provide a <emphasis>minimum size</emphasis> to help properly
                lay them out. For example, if controls are placed vertically on top of
                each other using a <reference internal="True" refuri="../../classes/class_vboxcontainer#class-vboxcontainer"><inline classes="std std-ref">VBoxContainer</inline></reference>,
                the minimum size will make sure your custom control is not squished by
                the other controls in the container.</paragraph>
            <paragraph>To provide this callback, just override
                <reference internal="True" refuri="../../classes/class_control#class-control-private-method-get-minimum-size"><inline classes="std std-ref">Control._get_minimum_size()</inline></reference>,
                for example:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _get_minimum_size():
    return Vector2(30, 30)</literal_block>
                </div>
                <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override Vector2 _GetMinimumSize()
{
    return new Vector2(20, 20);
}</literal_block>
                </div>
            </container>
            <paragraph>Alternatively, set it using a function:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    set_custom_minimum_size(Vector2(30, 30))</literal_block>
                </div>
                <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Ready()
{
    CustomMinimumSize = new Vector2(20, 20);
}</literal_block>
                </div>
            </container>
        </section>
        <section ids="input" names="input">
            <title>Input</title>
            <paragraph>Controls provide a few helpers to make managing input events much easier
                than regular nodes.</paragraph>
            <section ids="input-events" names="input\ events">
                <title>Input events</title>
                <paragraph>There are a few tutorials about input before this one, but it's worth
                    mentioning that controls have a special input method that only works
                    when:</paragraph>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph>The mouse pointer is over the control.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The button was pressed over this control (control always
                            captures input until button is released)</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Control provides keyboard/joypad focus via
                            <reference internal="True" refuri="../../classes/class_control#class-control-property-focus-mode"><inline classes="std std-ref">Control.focus_mode</inline></reference>.</paragraph>
                    </list_item>
                </bullet_list>
                <paragraph>This function is
                    <reference internal="True" refuri="../../classes/class_control#class-control-private-method-gui-input"><inline classes="std std-ref">Control._gui_input()</inline></reference>.
                    To use it, override it in your control. No processing needs to be set.</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-3-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-3-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-3-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends Control

func _gui_input(event):
   if event is InputEventMouseButton and event.button_index == MOUSE_BUTTON_LEFT and event.pressed:
       print("Left mouse button was pressed!")</literal_block>
                    </div>
                    <div aria-labelledby="tab-3-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-3-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _GuiInput(InputEvent @event)
{
    if (@event is InputEventMouseButton mbe &amp;&amp; mbe.ButtonIndex == MouseButton.Left &amp;&amp; mbe.Pressed)
    {
        GD.Print("Left mouse button was pressed!");
    }
}</literal_block>
                    </div>
                </container>
                <paragraph>For more information about events themselves, check the <reference internal="True" refuri="../inputs/inputevent#doc-inputevent"><inline classes="std std-ref">Using InputEvent</inline></reference>
                    tutorial.</paragraph>
            </section>
            <section ids="notifications" names="notifications">
                <title>Notifications</title>
                <paragraph>Controls also have many useful notifications for which no dedicated callback
                    exists, but which can be checked with the _notification callback:</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-4-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-4-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-4-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _notification(what):
    match what:
        NOTIFICATION_MOUSE_ENTER:
            pass # Mouse entered the area of this control.
        NOTIFICATION_MOUSE_EXIT:
            pass # Mouse exited the area of this control.
        NOTIFICATION_FOCUS_ENTER:
            pass # Control gained focus.
        NOTIFICATION_FOCUS_EXIT:
            pass # Control lost focus.
        NOTIFICATION_THEME_CHANGED:
            pass # Theme used to draw the control changed;
            # update and redraw is recommended if using a theme.
        NOTIFICATION_VISIBILITY_CHANGED:
            pass # Control became visible/invisible;
            # check new status with is_visible().
        NOTIFICATION_RESIZED:
            pass # Control changed size; check new size
            # with get_size().
        NOTIFICATION_MODAL_CLOSE:
            pass # For modal pop-ups, notification
            # that the pop-up was closed.</literal_block>
                    </div>
                    <div aria-labelledby="tab-4-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-4-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Notification(int what)
{
    switch (what)
    {
        case NotificationMouseEnter:
            // Mouse entered the area of this control.
            break;

        case NotificationMouseExit:
            // Mouse exited the area of this control.
            break;

        case NotificationFocusEnter:
            // Control gained focus.
            break;

        case NotificationFocusExit:
            // Control lost focus.
            break;

        case NotificationThemeChanged:
            // Theme used to draw the control changed;
            // update and redraw is recommended if using a theme.
            break;

        case NotificationVisibilityChanged:
            // Control became visible/invisible;
            // check new status with is_visible().
            break;

        case NotificationResized:
            // Control changed size; check new size with get_size().
            break;

        case NotificationModalClose:
            // For modal pop-ups, notification that the pop-up was closed.
            break;
    }
}</literal_block>
                    </div>
                </container>
                <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
            </section>
        </section>
    </section>
</document>
