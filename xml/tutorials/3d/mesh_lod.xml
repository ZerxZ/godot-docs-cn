<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/3d/mesh_lod.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-mesh-lod"></target>
    <section ids="mesh-level-of-detail-lod doc-mesh-lod" names="mesh\ level\ of\ detail\ (lod) doc_mesh_lod">
        <title>Mesh level of detail (LOD)</title>
        <paragraph>Level of detail (LOD) is one of the most important ways to optimize rendering
            performance in a 3D project, along with <reference internal="True" refuri="occlusion_culling#doc-occlusion-culling"><inline classes="std std-ref">Occlusion culling</inline></reference>.</paragraph>
        <paragraph>On this page, you'll learn:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>How mesh LOD can improve your 3D project's rendering performance.</paragraph>
            </list_item>
            <list_item>
                <paragraph>How to set up mesh LOD in Godot.</paragraph>
            </list_item>
            <list_item>
                <paragraph>How to measure mesh LOD's effectiveness in your project
                    (and alternatives you can explore if it doesn't meet your expectations).</paragraph>
            </list_item>
        </bullet_list>
        <seealso>
            <paragraph>You can see how mesh LOD works in action using the
                <reference name="Occlusion Culling and Mesh LOD demo project" refuri="https://github.com/godotengine/godot-demo-projects/tree/master/3d/occlusion_culling_mesh_lod">Occlusion Culling and Mesh LOD demo project</reference>.</paragraph>
        </seealso>
        <section ids="introduction" names="introduction">
            <title>Introduction</title>
            <paragraph>Historically, level of detail in 3D games involved manually authoring meshes
                with lower geometry density, then configuring the distance thresholds at which
                these lower-detailed meshes should be drawn. This approach is still used today
                when increased control is needed.</paragraph>
            <paragraph>However, in projects that have a large amount of detailed 3D assets, setting up
                LOD manually can be a very time-consuming process. As a result, automatic mesh
                decimation and LOD configuration is becoming increasingly popular.</paragraph>
            <paragraph>Godot provides a way to automatically generate less detailed meshes for LOD
                usage on import, then use those LOD meshes when needed automatically. This is
                completely transparent to the user.
                The <reference name="meshoptimizer" refuri="https://meshoptimizer.org/">meshoptimizer</reference> library is used for LOD mesh
                generation behind the scenes.</paragraph>
            <paragraph>Mesh LOD works with any node that draws 3D meshes. This includes MeshInstance3D,
                MultiMeshInstance3D, GPUParticles3D and CPUParticles3D.</paragraph>
        </section>
        <section ids="visual-comparison" names="visual\ comparison">
            <title>Visual comparison</title>
            <paragraph>Here is an example of LOD meshes generated on import. Lower detailed meshes
                will be used when the camera is far away from the object:</paragraph>
            <figure align="center" ids="id1">
                <image alt="From most detailed (left) to least detailed (right), shaded view" candidates="{'*': 'tutorials/3d/img/mesh_lod_comparison_shaded.png'}" original_uri="img/mesh_lod_comparison_shaded.png" uri="tutorials/3d/img/mesh_lod_comparison_shaded.png"></image>
                <caption>From most detailed (left) to least detailed (right), shaded view</caption>
            </figure>
            <paragraph>Here's the same image with wireframe rendering to make the decimation easier to see:</paragraph>
            <figure align="center" ids="id2">
                <image alt="From most detailed (left) to least detailed (right), wireframe view" candidates="{'*': 'tutorials/3d/img/mesh_lod_comparison_wireframe.png'}" original_uri="img/mesh_lod_comparison_wireframe.png" uri="tutorials/3d/img/mesh_lod_comparison_wireframe.png"></image>
                <caption>From most detailed (left) to least detailed (right), wireframe view</caption>
            </figure>
            <seealso>
                <paragraph>If you need to manually configure level of detail with artist-created meshes,
                    use <reference internal="True" refuri="visibility_ranges#doc-visibility-ranges"><inline classes="std std-ref">Visibility ranges (HLOD)</inline></reference> instead of automatic mesh LOD.</paragraph>
            </seealso>
        </section>
        <section ids="generating-mesh-lod" names="generating\ mesh\ lod">
            <title>Generating mesh LOD</title>
            <paragraph>By default, mesh LOD generation happens automatically for imported 3D scenes
                (glTF, .blend, Collada, FBX). Once LOD meshes are generated, they will
                automatically be used when rendering the scene. You don't need to configure
                anything manually.</paragraph>
            <paragraph>However, mesh LOD generation does <strong>not</strong> automatically happen for imported 3D
                meshes (OBJ). This is because OBJ files are not imported as full 3D scenes by
                default, but only as individual mesh resources to load into a MeshInstance3D
                node (or GPUParticles3D, CPUParticles3D, ...).</paragraph>
            <paragraph>To make an OBJ file have mesh LOD generated for it, select it in the FileSystem
                dock, go to the Import dock, change its <strong>Import As</strong> option to <strong>Scene</strong> then
                click <strong>Reimport</strong>:</paragraph>
            <figure align="center" ids="id3">
                <image alt="Changing the import type on an OBJ file in the Import dock" candidates="{'*': 'tutorials/3d/img/mesh_lod_obj_import.png'}" original_uri="img/mesh_lod_obj_import.png" uri="tutorials/3d/img/mesh_lod_obj_import.png"></image>
                <caption>Changing the import type on an OBJ file in the Import dock</caption>
            </figure>
            <paragraph>This will require restarting the editor after clicking <strong>Reimport</strong>.</paragraph>
            <note>
                <paragraph>The mesh LOD generation process is not perfect, and may occasionally
                    introduce rendering issues (especially in skinned meshes). Mesh LOD
                    generation can also take a while on complex meshes.</paragraph>
                <paragraph>If mesh LOD causes a specific mesh to look broken, you can disable LOD
                    generation for it in the Import dock. This will also speed up resource
                    importing. This can be done globally in the 3D scene's import options, or on
                    a per-mesh basis using the Advanced Import Settings dialog.</paragraph>
                <paragraph>See <reference internal="True" refuri="../assets_pipeline/importing_3d_scenes/import_configuration#doc-importing-3d-scenes-using-the-import-dock"><inline classes="std std-ref">Importing 3D scenes</inline></reference>
                    for more information.</paragraph>
            </note>
        </section>
        <section ids="comparing-mesh-lod-visuals-and-performance" names="comparing\ mesh\ lod\ visuals\ and\ performance">
            <title>Comparing mesh LOD visuals and performance</title>
            <paragraph>To disable mesh LOD in the editor for comparison purposes, use the
                <strong>Disable Mesh LOD</strong> advanced debug draw mode. This can be done using the menu
                in the top-left corner of the 3D viewport (labeled <strong>Perspective</strong> or
                <strong>Orthogonal</strong> depending on camera mode):</paragraph>
            <figure align="center" ids="id4">
                <image alt="Disabling mesh LOD in the 3D viewport's top-left menu" candidates="{'*': 'tutorials/3d/img/mesh_lod_disable_lod.png'}" original_uri="img/mesh_lod_disable_lod.png" uri="tutorials/3d/img/mesh_lod_disable_lod.png"></image>
                <caption>Disabling mesh LOD in the 3D viewport's top-left menu</caption>
            </figure>
            <paragraph>Enable <strong>View Frame Time</strong> in the same menu to view FPS in the top-right corner.
                Also enable <strong>View Information</strong> in the same menu to view the number of primitives
                (vertices + indices) rendered in the bottom-right corner.</paragraph>
            <paragraph>If mesh LOD is working correctly in your scene and your camera is far away
                enough from the mesh, you should notice the number of drawn primitives
                decreasing and FPS increasing when mesh LOD is left enabled (unless you are
                CPU-bottlenecked).</paragraph>
            <paragraph>To see mesh LOD decimation in action, change the debug draw mode to
                <strong>Display Wireframe</strong> in the menu specified above, then adjust the
                <strong>Rendering &gt; Mesh LOD &gt; LOD Change &gt; Threshold Pixels</strong> project setting.</paragraph>
        </section>
        <section ids="configuring-mesh-lod-performance-and-quality" names="configuring\ mesh\ lod\ performance\ and\ quality">
            <title>Configuring mesh LOD performance and quality</title>
            <paragraph>You can adjust how aggressive mesh LOD transitions should be in the root viewport
                by changing the <strong>Rendering &gt; Mesh LOD &gt; LOD Change &gt; Threshold Pixels</strong> project
                setting. To change this value at runtime, set <literal>mesh_lod_threshold</literal> on the
                root viewport as follows:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">get_tree().root.mesh_lod_threshold = 4.0</literal_block>
                </div>
                <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">GetTree().Root.MeshLodThreshold = 4.0f;</literal_block>
                </div>
            </container>
            <paragraph>Each viewport has its own <literal>mesh_lod_threshold</literal> property, which can be set
                independently from other viewports.</paragraph>
            <paragraph>The default mesh LOD threshold of 1 pixel is tuned to look <emphasis>perceptually</emphasis>
                lossless; it provides a significant performance gain with an unnoticeable loss
                in quality. Higher values will make LOD transitions happen sooner when the
                camera moves away, resulting in higher performance, but lower quality.</paragraph>
            <paragraph>If you need to perform per-object adjustments to mesh LOD, you can adjust how
                aggressive LOD transitions should be by adjusting the <strong>LOD Bias</strong> property on
                any node that inherits from GeometryInstance3D. Values <emphasis>above</emphasis> <literal>1.0</literal> will make
                LOD transitions happen later than usual (resulting in higher quality, but lower
                performance). Values <emphasis>below</emphasis> <literal>1.0</literal> will make LOD transitions happen sooner than
                usual (resulting in lower quality, but higher performance).</paragraph>
            <paragraph>Additionally, ReflectionProbe nodes have their own <strong>Mesh LOD Threshold</strong> property
                that can be adjusted to improve rendering performance when the reflection probe
                updates. This is especially important for ReflectionProbes that use the <strong>Always</strong>
                update mode.</paragraph>
            <note>
                <paragraph>When rendering the scene, mesh LOD selection uses a screen-space metric.
                    This means it automatically takes camera field of view and viewport
                    resolution into account. Higher camera FOV and lower viewport resolutions
                    will make LOD selection more aggressive; the engine will display heavily
                    decimated models earlier when the camera moves away.</paragraph>
                <paragraph>As a result, unlike <reference internal="True" refuri="visibility_ranges#doc-visibility-ranges"><inline classes="std std-ref">Visibility ranges (HLOD)</inline></reference>, you don't need to do
                    anything specific in your project to take camera FOV and viewport resolution
                    into account.</paragraph>
            </note>
        </section>
        <section ids="using-mesh-lod-with-multimesh-and-particles" names="using\ mesh\ lod\ with\ multimesh\ and\ particles">
            <title>Using mesh LOD with MultiMesh and particles</title>
            <paragraph>For LOD selection, the point of the node's <abbreviation explanation="Axis-Aligned Bounding Box">AABB</abbreviation>
                that is the closest to the camera is used as a basis. This applies to any kind
                of mesh LOD (including for individual MeshInstance3D)s, but this has some implications
                for nodes that display multiple meshes at once, such as MultiMeshInstance3D,
                GPUParticles3D and GPUParticles3D. Most importantly, this means that all
                instances will be drawn with the same LOD level at a given time.</paragraph>
            <paragraph>If you are noticing incorrect LOD selection with GPUParticles3D, make sure
                the node's visibility AABB is configured by selecting the GPUParticles3D
                node and using <strong>GPUParticles3D &gt; Generate AABB</strong> at the top of the 3D
                viewport.</paragraph>
            <paragraph>If you have instances in a MultiMesh that are far away from each other, they
                should be placed in a separate MultiMeshInstance3D node. Doing so will also
                improve rendering performance, as frustum and occlusion culling will be able to
                cull individual nodes (while they can't cull individual instances in a
                MultiMesh).</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
