<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/3d/particles/attractors.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-3d-particles-attractors"></target>
    <section ids="d-particle-attractors doc-3d-particles-attractors" names="3d\ particle\ attractors doc_3d_particles_attractors">
        <title>3D Particle attractors</title>
        <figure>
            <image alt="Particle attractors" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor.webp'}" original_uri="img/particle_attractor.webp" uri="tutorials/3d/particles/img/particle_attractor.webp"></image>
        </figure>
        <paragraph>Particle attractors are nodes that apply a force to all particles within their reach. They pull
            particles closer or push them away based on the direction of that force. There are three types
            of attractors: <reference internal="True" refuri="../../../classes/class_gpuparticlesattractorbox3d#class-gpuparticlesattractorbox3d"><inline classes="std std-ref">GPUParticlesAttractorBox3D</inline></reference>, <reference internal="True" refuri="../../../classes/class_gpuparticlesattractorsphere3d#class-gpuparticlesattractorsphere3d"><inline classes="std std-ref">GPUParticlesAttractorSphere3D</inline></reference>,
            and <reference internal="True" refuri="../../../classes/class_gpuparticlesattractorvectorfield3d#class-gpuparticlesattractorvectorfield3d"><inline classes="std std-ref">GPUParticlesAttractorVectorField3D</inline></reference>. You can instantiate them at runtime and
            change their properties from gameplay code; you can even animate and combine them for complex
            attraction effects.</paragraph>
        <comment xml:space="preserve">UPDATE: Not implemented. When particle attractors are implemented for 2D</comment>
        <comment xml:space="preserve">particle systems, remove this note and remove this comment.</comment>
        <note>
            <paragraph>Particle attractors are not yet implemented for 2D particle systems.</paragraph>
        </note>
        <paragraph>The first thing you have to do if you want to use attractors is enable the <literal>Attractor Interaction</literal>
            property on the ParticleProcessMaterial. Do this for every particle system that needs to react to attractors.
            Like most properties in Godot, you can also change this at runtime.</paragraph>
        <section ids="common-properties" names="common\ properties">
            <title>Common properties</title>
            <figure align="right" ids="id1">
                <image alt="Common particle attractor properties" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_common.webp'}" original_uri="img/particle_attractor_common.webp" uri="tutorials/3d/particles/img/particle_attractor_common.webp"></image>
                <caption>Common attractor properties</caption>
            </figure>
            <paragraph>There are some properties that you can find on all attractors. They're located in the
                <literal>GPUParticlesAttractor3D</literal> section in the inspector.</paragraph>
            <paragraph><literal>Strength</literal> controls how strong the attractor force is. A positive value pulls particles
                closer to the attractor's center, while a negative value pushes them away.</paragraph>
            <paragraph><literal>Attenuation</literal> controls the strength falloff within the attractor's influence region. Every
                particle attractor has a boundary. Its strength is weakest at the border of this boundary
                and strongest at its center. Particles outside of the boundary are not affected by the attractor
                at all. The attenuation curve controls how the strength weakens over that distance. A straight
                line means that the strength is proportional to the distance: if a particle is halfway
                between the boundary and the center, the attractor strength will be half of what it is
                at the center. Different curve shapes change how fast particles accelerate towards the
                attractor.</paragraph>
            <figure ids="id2">
                <image alt="Different attractor attenuation curves" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_curve.webp'}" original_uri="img/particle_attractor_curve.webp" uri="tutorials/3d/particles/img/particle_attractor_curve.webp"></image>
                <caption>Strength increase variations: constantly over the distance to the attractor (left), fast
                    at the boundary border and slowly at the center (middle), slowly at the boundary and
                    fast at the center (right).</caption>
            </figure>
            <paragraph>The <literal>Directionality</literal> property changes the direction towards which particles are pulled.
                At a value of <literal>0.0</literal>, there is no directionality, which means that particles are pulled towards
                the attractor's center. At <literal>1.0</literal>, the attractor is fully directional, which means particles
                will be pulled along the attractor's local <literal>-Z</literal>-axis. You can change the global direction
                by rotating the attractor. If <literal>Strength</literal> is negative, particles are instead pulled along
                the <literal>+Z</literal>-axis.</paragraph>
            <figure ids="id3">
                <image alt="Different attractor directionality values" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_direction.webp'}" original_uri="img/particle_attractor_direction.webp" uri="tutorials/3d/particles/img/particle_attractor_direction.webp"></image>
                <caption>No directionality (left) vs. full directionality (right). Notice how the particles move along
                    the attractor's local Z-axis.</caption>
            </figure>
            <paragraph>The <literal>Cull Mask</literal> property controls which particle systems are affected by an attractor based
                on each system's <reference internal="True" refuri="../../../classes/class_visualinstance3d#class-visualinstance3d"><inline classes="std std-ref">visibility layers</inline></reference>. A particle system is only
                affected by an attractor if at least one of the system's visibility layers is enabled in the
                attractor's cull mask.</paragraph>
        </section>
        <section ids="box-attractors" names="box\ attractors">
            <title>Box attractors</title>
            <figure align="right" ids="id4">
                <image alt="Particle attractor box" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_box_entry.webp'}" original_uri="img/particle_attractor_box_entry.webp" uri="tutorials/3d/particles/img/particle_attractor_box_entry.webp"></image>
                <caption>Box attractor in the node list</caption>
            </figure>
            <paragraph>Box attractors have a box-shaped influence region. You control their size with the <literal>Extents</literal>
                property. Box extents always measure half of the sides of its bounds, so a value of
                <literal>(X=1.0,Y=1.0,Z=1.0)</literal> creates a box with an influence region that is 2 meters wide on each side.</paragraph>
            <paragraph>To create a box attractor, add a new child node to your scene and select <literal>GPUParticlesAttractorBox3D</literal>
                from the list of available nodes. You can animate the box position or attach it to a
                moving node for more dynamic effects.</paragraph>
            <figure ids="id5">
                <image alt="Box attractor parts particle field" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_box.webp'}" original_uri="img/particle_attractor_box.webp" uri="tutorials/3d/particles/img/particle_attractor_box.webp"></image>
                <caption>A box attractor with a negative strength value parts a particle field as it moves through it.</caption>
            </figure>
        </section>
        <section ids="sphere-attractors" names="sphere\ attractors">
            <title>Sphere attractors</title>
            <figure align="right" ids="id6">
                <image alt="Particle attractor sphere" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_sphere_entry.webp'}" original_uri="img/particle_attractor_sphere_entry.webp" uri="tutorials/3d/particles/img/particle_attractor_sphere_entry.webp"></image>
                <caption>Sphere attractor in the node list</caption>
            </figure>
            <paragraph>Sphere attractors have a spherical influence region. You control their size with the <literal>Radius</literal>
                property. While box attractors don't have to be perfect cubes, sphere attractors will always be
                spheres: You can't set width independently from height. If you want to use a sphere attractor for
                elongated shapes, you have to change its <literal>Scale</literal> in the attractor's <literal>Node3D</literal> section.</paragraph>
            <paragraph>To create a sphere attractor, add a new child node to your scene and select <literal>GPUParticlesAttractorSphere3D</literal>
                from the list of available nodes. You can animate the sphere position or attach it to a
                moving node for more dynamic effects.</paragraph>
            <figure ids="id7">
                <image alt="Sphere attractor parts particle field" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_sphere.webp'}" original_uri="img/particle_attractor_sphere.webp" uri="tutorials/3d/particles/img/particle_attractor_sphere.webp"></image>
                <caption>A sphere attractor with a negative strength value parts a particle field as it moves through it.</caption>
            </figure>
        </section>
        <section ids="vector-field-attractors" names="vector\ field\ attractors">
            <title>Vector field attractors</title>
            <figure align="right" ids="id8">
                <image alt="Particle attractor vector field" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_vector_entry.webp'}" original_uri="img/particle_attractor_vector_entry.webp" uri="tutorials/3d/particles/img/particle_attractor_vector_entry.webp"></image>
                <caption>Vector field attractor in the node list</caption>
            </figure>
            <paragraph>A vector field is a 3D area that contains vectors positioned on a grid. The grid density controls
                how many vectors there are and how far they're spread apart. Each vector in a vector field points
                in a specific direction. This can be completely random or aligned in a way that forms distinct
                patterns and paths.</paragraph>
            <paragraph>When particles interact with a vector field, their movement direction changes to match the nearest vector
                in the field. As a particle moves closer to the next vector in the field, it changes
                direction to match that vector's direction. The particle's speed depends on the vector's length.</paragraph>
            <paragraph>Like box attractors, vector field attractors have a box-shaped influence region. You control their size with the <literal>Extents</literal>
                property, where a value of <literal>(X=1.0,Y=1.0,Z=1.0)</literal> creates a box with an influence region that is
                2 meters wide on each side. The <literal>Texture</literal> property takes a <reference internal="True" refuri="../../../classes/class_texture3d#class-texture3d"><inline classes="std std-ref">3D texture</inline></reference>
                where every pixel represents a vector with the pixel's color interpreted as the vector's direction and size.</paragraph>
            <note>
                <paragraph>When a texture is used as a vector field, there are two types of conversion you need to be aware of:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>The texture coordinates map to the attractor bounds. The image below shows which part of the texture
                            corresponds to which part of the vector field volume. For example, the bottom half of the texture
                            affects the top half of the vector field attractor because <literal>+Y</literal> points down in the texture UV space,
                            but up in Godot's world space.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>The pixel color values map to direction vectors in space. The image below provides an overview. Since
                            particles can move in two directions along each axis, the lower half of the color range represents
                            negative direction values while the upper half represents positive direction values. So a yellow pixel
                            <literal>(R=1,G=1,B=0)</literal> maps to the vector <literal>(X=1,Y=1,Z=-1)</literal> while a neutral gray <literal>(R=0.5,G=0.5,B=0.5)</literal>
                            results in no movement at all.</paragraph>
                    </list_item>
                </enumerated_list>
                <figure>
                    <image alt="Mapping from texture to vector field" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_vector_mapping.webp'}" original_uri="img/particle_attractor_vector_mapping.webp" uri="tutorials/3d/particles/img/particle_attractor_vector_mapping.webp"></image>
                </figure>
            </note>
            <paragraph>To create a vector field attractor, add a new child node to your scene and select <literal>GPUParticlesAttractorVectorField3D</literal>
                from the list of available nodes. You can animate the attractor's position or attach it to a
                moving node for more dynamic effects.</paragraph>
            <tip>
                <paragraph>If you don't have external tools to create vector field textures, you can use
                    a NoiseTexture3D with a Color Ramp attached as a vector field texture. The
                    Color Ramp can be modified to adjust how much each coordinate is affected by
                    the vector field.</paragraph>
            </tip>
            <figure ids="id9">
                <image alt="Vector field attractor in a field of particles" candidates="{'*': 'tutorials/3d/particles/img/particle_attractor_vector.webp'}" original_uri="img/particle_attractor_vector.webp" uri="tutorials/3d/particles/img/particle_attractor_vector.webp"></image>
                <caption>Two particle systems are affected by the same vector field attractor. <download_reference filename="15109f418f400f6aa6956b46deb773b9/particle_vector_field_16x16x16.bmp" refdoc="tutorials/3d/particles/attractors" refdomain="" refexplicit="True" reftarget="img/particle_vector_field_16x16x16.bmp" reftype="download" refwarn="False"><literal classes="xref download">Click here to download the 3D texture</literal></download_reference>.</caption>
            </figure>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
