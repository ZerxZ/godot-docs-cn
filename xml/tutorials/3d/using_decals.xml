<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/3d/using_decals.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-using-decals"></target>
    <section ids="using-decals doc-using-decals" names="using\ decals doc_using_decals">
        <title>Using decals</title>
        <note>
            <paragraph>Decals are only supported in the Forward+ and Mobile renderers, not the
                Compatibility renderer.</paragraph>
            <paragraph>If using the Compatibility renderer, consider using Sprite3D as an alternative
                for projecting decals onto (mostly) flat surfaces.</paragraph>
        </note>
        <paragraph>Decals are projected textures that apply on opaque or transparent surfaces in
            3D. This projection happens in real-time and doesn't rely on mesh generation.
            This allows you to move decals every frame with only a small performance impact,
            even when applied on complex meshes.</paragraph>
        <paragraph>While decals cannot add actual geometry detail onto the projected surface,
            decals can still make use of physically-based rendering to provide similar
            properties to full-blown <abbreviation explanation="Physically-Based Rendering">PBR</abbreviation> materials.</paragraph>
        <paragraph>On this page, you'll learn:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>How to set up decals in the 3D editor.</paragraph>
            </list_item>
            <list_item>
                <paragraph>How to create decals during gameplay in a 3D scene (such as bullet impacts).</paragraph>
            </list_item>
            <list_item>
                <paragraph>How to balance decal configuration between performance and quality.</paragraph>
            </list_item>
        </bullet_list>
        <seealso>
            <paragraph>The Godot demo projects repository contains a
                <reference name="3D decals demo" refuri="https://github.com/godotengine/godot-demo-projects/tree/master/3d/decals">3D decals demo</reference>.</paragraph>
            <paragraph>If you're looking to write arbitrary 3D text on top of a surface, use
                <reference internal="True" refuri="3d_text#doc-3d-text"><inline classes="std std-ref">3D text</inline></reference> placed close to a surface instead of a Decal node.</paragraph>
        </seealso>
        <section ids="use-cases" names="use\ cases">
            <title>Use cases</title>
            <section ids="static-decoration" names="static\ decoration">
                <title>Static decoration</title>
                <paragraph>Sometimes, the fastest way to add texture detail to a scene is to use decals.
                    This is especially the case for organic detail, such as patches of dirt or sand
                    scattered on a large surface. Decals can help break up texture repetition in
                    scenes and make patterns look more natural. On a smaller scale, decals can also
                    be used to create detail variations for objects. For example, decals can be used
                    to add nuts and bolts on top of hard-surface geometry.</paragraph>
                <paragraph>Since decals can inject their own <abbreviation explanation="Physically-Based Rendering">PBR</abbreviation>
                    properties on top of the projected surfaces, they can also be used to create
                    footprints or wet puddles.</paragraph>
                <figure align="center" ids="id1">
                    <image alt="Dirt added on top of level geometry using decals" candidates="{'*': 'tutorials/3d/img/decals_dirt.webp'}" original_uri="img/decals_dirt.webp" uri="tutorials/3d/img/decals_dirt.webp"></image>
                    <caption>Dirt added on top of level geometry using decals</caption>
                </figure>
            </section>
            <section ids="dynamic-gameplay-elements" names="dynamic\ gameplay\ elements">
                <title>Dynamic gameplay elements</title>
                <paragraph>Decals can represent temporary or persistent gameplay effects such as bullet
                    impacts and explosion scorches.</paragraph>
                <paragraph>Using an AnimationPlayer node or a script, decals can be made to fade over time
                    (and then be removed using <literal>queue_free()</literal>) to improve performance.</paragraph>
            </section>
            <section ids="blob-shadows" names="blob\ shadows">
                <title>Blob shadows</title>
                <paragraph>Blob shadows are frequently used in mobile projects (or to follow a retro art
                    style), as real-time lighting tends to be too expensive on low-end mobile
                    devices. However, when relying on baked lightmaps with fully baked lights,
                    dynamic objects will not cast <emphasis>any</emphasis> shadow from those lights. This makes dynamic
                    objects in lightmapped scenes look flat in comparison to real-time lighting,
                    with dynamic objects almost looking like they're floating.</paragraph>
                <paragraph>Thanks to blob shadows, dynamic objects can still cast an approximative shadow.
                    Not only this helps with depth perception in the scene, but this can also be a
                    gameplay element, especially in 3D platformers. The blob shadow's length can be
                    extended to let the player know where they will land if they fall straight down.</paragraph>
                <paragraph>Even with real-time lighting, blob shadows can still be useful as a form of
                    ambient occlusion for situations where SSAO is too expensive or too unstable due
                    to its screen-space nature. For example, vehicles' underside shadows are
                    well-represented using blob shadows.</paragraph>
                <figure align="center" ids="id2">
                    <image alt="Blob shadow under object comparison" candidates="{'*': 'tutorials/3d/img/decals_blob_shadow.webp'}" original_uri="img/decals_blob_shadow.webp" uri="tutorials/3d/img/decals_blob_shadow.webp"></image>
                    <caption>Blob shadow under object comparison</caption>
                </figure>
            </section>
        </section>
        <section ids="quick-start-guide" names="quick\ start\ guide">
            <title>Quick start guide</title>
            <section ids="creating-decals-in-the-editor" names="creating\ decals\ in\ the\ editor">
                <title>Creating decals in the editor</title>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Create a Decal node in the 3D editor.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>In the inspector, expand the <strong>Textures</strong> section and load a texture in
                            <strong>Textures &gt; Albedo</strong>.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Move the Decal node towards an object, then rotate it so the decal is visible
                            (and in the right orientation). If the decal appears mirrored, try to rotate
                            it by 180 degrees. You can double-check whether it's in the right orientation
                            by increasing <strong>Parameters &gt; Normal Fade</strong> to 0.5. This will prevent the Decal
                            from being projected on surfaces that are not facing the decal.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>If your decal is meant to affect static objects only, configure it to prevent
                            affecting dynamic objects (or vice versa). To do so, change the decal's
                            <strong>Cull Mask</strong> property to exclude certain layers. After doing this, modify
                            your dynamic objects' MeshInstance3D nodes to change their visibility layers.
                            For instance, you can move them from layer 1 to layer 2, then disable layer 2
                            in the decal's <strong>Cull Mask</strong> property.</paragraph>
                    </list_item>
                </enumerated_list>
            </section>
        </section>
        <section ids="decal-node-properties" names="decal\ node\ properties">
            <title>Decal node properties</title>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph><strong>Extents:</strong> The size of the decal. The Y axis determines the length of the
                        decal's projection. Keep the projection length as short as possible to improve
                        culling opportunities, therefore improving performance.</paragraph>
                </list_item>
            </bullet_list>
            <section ids="textures" names="textures">
                <title>Textures</title>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph><strong>Albedo:</strong> The albedo (diffuse/color) map to use for the decal. In
                            most situations, this is the texture you want to set first. If using a normal
                            or ORM map, an albedo map <emphasis>must</emphasis> be set to provide an alpha channel. This
                            alpha channel will be used as a mask to determine how much the normal/ORM maps
                            will affect the underlying surface.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Normal:</strong> The normal map to use for the decal. This can be used
                            to increase perceived detail on the decal by modifying how light reacts to it.
                            The impact of this texture is multiplied by the albedo texture's alpha channel
                            (but not <strong>Albedo Mix</strong>).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>ORM:</strong> The Occlusion/Roughness/Metallic map to use for the decal.
                            This is an optimized format for storing PBR material maps. Ambient Occlusion
                            map is stored in the red channel, roughness map in the green channel, metallic
                            map in the blue channel. The impact of this texture is multiplied by the
                            albedo texture's alpha channel (but not <strong>Albedo Mix</strong>).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Emission:</strong> The emission texture to use for the decal. Unlike
                            <strong>Albedo</strong>, this texture will appear to glow in the dark.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="parameters" names="parameters">
                <title>Parameters</title>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph><strong>Emission Energy:</strong> The brightness of the emission texture.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Modulate:</strong> Multiplies the color of the albedo and emission textures. Use
                            this to tint decals (e.g. for paint decals, or to increase variation by
                            randomizing each decal's modulation).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Albedo Mix:</strong> The opacity of the albedo texture. Unlike using an albedo
                            texture with a more transparent alpha channel, decreasing this value below
                            <literal>1.0</literal> does <emphasis>not</emphasis> reduce the impact of the normal/ORM texture on the
                            underlying surface. Set this to <literal>0.0</literal> when creating normal/ORM-only decals
                            such as footsteps or wet puddles.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Normal Fade:</strong> Fades the Decal if the angle between the Decal's
                            <abbreviation explanation="Axis-Aligned Bounding Box">AABB</abbreviation> and the target surface becomes too large.
                            A value of <literal>0.0</literal> projects the decal regardless of angle, while a value of <literal>0.999</literal>
                            limits the decal to surfaces that are nearly perpendicular. Setting <strong>Normal
                                Fade</strong> to a value greater than <literal>0.0</literal> has a small performance cost due to the
                            added normal angle computations.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="vertical-fade" names="vertical\ fade">
                <title>Vertical Fade</title>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph><strong>Upper Fade:</strong> The curve over which the decal will fade as the surface gets
                            further from the center of the <abbreviation explanation="Axis-Aligned Bounding Box">AABB</abbreviation>
                            (towards the decal's projection angle). Only positive values are valid.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Lower Fade:</strong> The curve over which the decal will fade as the surface gets
                            further from the center of the <abbreviation explanation="Axis-Aligned Bounding Box">AABB</abbreviation> (away
                            from the decal's projection angle). Only positive values are valid.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="distance-fade" names="distance\ fade">
                <title>Distance Fade</title>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph><strong>Enabled:</strong> Controls whether distance fade (a form of <abbreviation explanation="Level of Detail">LOD</abbreviation>)
                            is enabled. The decal will fade out over <strong>Begin + Length</strong>, after which it
                            will be culled and not sent to the shader at all. Use this to reduce the number
                            of active decals in a scene and thus improve performance.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Begin:</strong> The distance from the camera at which the decal begins to fade away
                            (in 3D units).</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph><strong>Length:</strong> The distance over which the decal fades (in 3D units). The decal
                            becomes slowly more transparent over this distance and is completely invisible
                            at the end. Higher values result in a smoother fade-out transition, which is
                            more suited when the camera moves fast.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
            <section ids="cull-mask" names="cull\ mask">
                <title>Cull Mask</title>
                <bullet_list bullet="-">
                    <list_item>
                        <paragraph><strong>Cull Mask:</strong> Specifies which VisualInstance3D layers this decal will project
                            on. By default, decals affect all layers. This is used so you can specify which
                            types of objects receive the decal and which do not. This is especially useful
                            so you can ensure that dynamic objects don't accidentally receive a Decal
                            intended for the terrain under them.</paragraph>
                    </list_item>
                </bullet_list>
            </section>
        </section>
        <section ids="decal-rendering-order" names="decal\ rendering\ order">
            <title>Decal rendering order</title>
            <paragraph>By default, decals are ordered based on the size of their <abbreviation explanation="Axis-Aligned Bounding Box">AABB</abbreviation> and the distance to the camera. AABBs that are
                closer to the camera are rendered first, which means that decal rendering order
                can sometimes appear to change depending on camera position if some decals are
                positioned at the same location.</paragraph>
            <paragraph>To resolve this, you can adjust the <strong>Sorting Offset</strong> property in the
                VisualInstance3D section of the Decal node inspector. This offset is not a
                strict priority order, but a <emphasis>guideline</emphasis> that the renderer will use as the AABB
                size still affects how decal sorting works. Therefore, higher values will
                <emphasis>always</emphasis> result in the decal being drawn above other decals with a lower sorting
                offset.</paragraph>
            <paragraph>If you want to ensure a decal is always rendered on top of other decals,
                you need to set its <strong>Sorting Offset</strong> property to a positive value greater than
                the AABB length of the largest decal that may overlap it. To make this decal
                drawn behind other decals instead, set the <strong>Sorting Offset</strong> to the same
                negative value.</paragraph>
            <figure align="center" ids="id3">
                <image alt="VisualInstance3D Sorting Offset comparison on Decals" candidates="{'*': 'tutorials/3d/img/decals_sorting_offset.webp'}" original_uri="img/decals_sorting_offset.webp" uri="tutorials/3d/img/decals_sorting_offset.webp"></image>
                <caption>VisualInstance3D Sorting Offset comparison on Decals</caption>
            </figure>
        </section>
        <section ids="tweaking-performance-and-quality" names="tweaking\ performance\ and\ quality">
            <title>Tweaking performance and quality</title>
            <paragraph>Decal rendering performance is mostly determined by their screen coverage, but
                also their number. In general, a few large decals that cover up most of the
                screen will be more expensive to render than many small decals that are
                scattered around.</paragraph>
            <paragraph>To improve rendering performance, you can enable the <strong>Distance Fade</strong> property
                as described above. This will make distant decals fade out when they are far
                away from the camera (and may have little to no impact on the final scene
                rendering). Using node groups, you can also prevent non-essential decorative
                decals from spawning based on user configuration.</paragraph>
            <paragraph>The way decals are rendered also has an impact on performance. The
                <reference internal="True" refuri="../../classes/class_projectsettings#class-projectsettings-property-rendering-textures-decals-filter"><inline classes="std std-ref">Rendering &gt; Textures &gt; Decals &gt; Filter</inline></reference>
                advanced project setting lets you control how decal
                textures should be filtered. <strong>Nearest/Linear</strong> does not use mipmaps. However,
                decals will look grainy at a distance. <strong>Nearest/Linear Mipmaps</strong> will look
                smoother at a distance, but decals will look blurry when viewed from oblique
                angles. This can be resolved by using <strong>Nearest/Linear Mipmaps Anisotropic</strong>,
                which provides the highest quality, but is also slower to render.</paragraph>
            <paragraph>If your project has a pixel art style, consider setting the filter to one of the
                <strong>Nearest</strong> values so that decals use nearest-neighbor filtering. Otherwise,
                stick to <strong>Linear</strong>.</paragraph>
        </section>
        <section ids="limitations" names="limitations">
            <title>Limitations</title>
            <paragraph>Decals cannot affect material properties other than the ones listed above,
                such as height (for parallax mapping).</paragraph>
            <paragraph>For performance reasons, decals use purely fixed rendering logic. This means
                decals cannot use custom shaders. However, custom shaders on the projected
                surfaces are able to read the information that is overridden by decals on top of
                them, such as roughness and metallic.</paragraph>
            <paragraph>When using the Forward+ renderer, Godot uses a <emphasis>clustering</emphasis> approach for
                decal rendering. As many decals as desired can be added (as long as
                performance allows). However, there's still a default limit of 512 <emphasis>clustered
                    elements</emphasis> that can be present in the current camera view. A clustered element is
                an omni light, a spot light, a <reference internal="True" refid="doc-using-decals"><inline classes="std std-ref">decal</inline></reference> or a
                <reference internal="True" refuri="global_illumination/reflection_probes#doc-reflection-probes"><inline classes="std std-ref">reflection probe</inline></reference>. This limit can be increased by adjusting
                <reference internal="True" refuri="../../classes/class_projectsettings#class-projectsettings-property-rendering-limits-cluster-builder-max-clustered-elements"><inline classes="std std-ref">Max Clustered Elements</inline></reference>
                in <strong>Project Settings &gt; Rendering &gt; Limits &gt; Cluster Builder</strong>.</paragraph>
            <paragraph>When using the Mobile renderer, only 8 decals can be applied on each
                individual Mesh <emphasis>resource</emphasis>. If there are more decals affecting a single mesh,
                not all of them will be rendered on the mesh.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
