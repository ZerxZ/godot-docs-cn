<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/physics/soft_body.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-soft-body"></target>
    <section ids="using-softbody3d doc-soft-body" names="using\ softbody3d doc_soft_body">
        <title>Using SoftBody3D</title>
        <paragraph>Soft bodies (or <emphasis>soft-body dynamics</emphasis>) simulate movement, changing shape and other
            physical properties of deformable objects. For example, this can be used to simulate
            cloth or to create more realistic characters.</paragraph>
        <section ids="physics-engine-considerations" names="physics\ engine\ considerations">
            <title>Physics engine considerations</title>
            <paragraph>Support for soft bodies is generally more robust in Jolt Physics compared to GodotPhysics3D.
                You can switch physics engines by changing <strong>Physics &gt; 3D &gt; Physics Engine</strong>
                in the Project Settings. Projects created in Godot 4.6 and later use Jolt Physics
                by default, but existing projects will have to be switched over manually.</paragraph>
            <paragraph>Additionally, <reference internal="True" refuri="interpolation/index#doc-physics-interpolation"><inline classes="std std-ref">physics interpolation</inline></reference> currently
                does not affect soft bodies. If you want soft body simulation to look smoother at
                higher framerates, you'll have to increase the <strong>Physics &gt; Common &gt; Physics Ticks per Second</strong>
                project setting, which comes at a performance cost.</paragraph>
        </section>
        <section ids="basic-setup" names="basic\ setup">
            <title>Basic setup</title>
            <paragraph>A <reference internal="True" refuri="../../classes/class_softbody3d#class-softbody3d"><inline classes="std std-ref">SoftBody3D</inline></reference> node is used for soft body simulations.
                Unlike other physics body nodes like <reference internal="True" refuri="../../classes/class_rigidbody3d#class-rigidbody3d"><inline classes="std std-ref">RigidBody3D</inline></reference>
                or <reference internal="True" refuri="../../classes/class_staticbody3d#class-staticbody3d"><inline classes="std std-ref">StaticBody3D</inline></reference>, it does <strong>not</strong> have a
                <reference internal="True" refuri="../../classes/class_collisionshape3d#class-collisionshape3d"><inline classes="std std-ref">CollisionShape3D</inline></reference> or a <reference internal="True" refuri="../../classes/class_meshinstance3d#class-meshinstance3d"><inline classes="std std-ref">MeshInstance3D</inline></reference>
                child node. Instead, the collision shape is derived from the mesh assigned to the node.
                This mesh is also directly used for rendering, which means you don't need to
                create any child nodes for a functional, visible setup.</paragraph>
            <paragraph>We will create a bouncy cube to demonstrate the setup of a soft body.</paragraph>
            <paragraph>Create a new scene with a Node3D node as root. Then, create a SoftBody3D node.
                Add a BoxMesh in the <strong>Mesh</strong> property of the node in the inspector
                and increase the subdivision of the mesh for simulation.</paragraph>
            <paragraph>The subdivision level determines the precision level of the deformation,
                with higher values allowing for smaller and more detailed deformations,
                at the cost of performance. In this example, we'll set it to 3 on each axis:</paragraph>
            <figure align="center" ids="id1">
                <image alt="Adjusting BoxMesh properties in the inspector" candidates="{'*': 'tutorials/physics/img/soft_body_box_mesh.webp'}" original_uri="img/soft_body_box_mesh.webp" uri="tutorials/physics/img/soft_body_box_mesh.webp"></image>
                <caption>Adjusting BoxMesh properties in the inspector</caption>
            </figure>
            <paragraph>Now, set the parameters to obtain the type of soft body you aim for.
                Try to keep the <strong>Simulation Precision</strong> above 5; otherwise,
                the soft body may collapse.</paragraph>
            <figure align="center" ids="id2">
                <image alt="Adjusting SoftBody3D simulation properties in the inspector" candidates="{'*': 'tutorials/physics/img/soft_body_inspector.webp'}" original_uri="img/soft_body_inspector.webp" uri="tutorials/physics/img/soft_body_inspector.webp"></image>
                <caption>Adjusting SoftBody3D simulation properties in the inspector</caption>
            </figure>
            <note>
                <paragraph>Handle some parameters with care, as some values can lead to strange results.
                    For example, if the shape is not completely closed and you set pressure
                    to a value greater than <literal>0.0</literal>, the soft body will fly around like a plastic bag
                    under strong wind.</paragraph>
            </note>
            <paragraph>Run the scene to view the simulation. Here's an example of what it should look like:</paragraph>
            <video_node align="default" alt="Soft body box simulation example" autoplay="True" caption="" controls="True" controlslist="" figwidth="" height="" klass="" loop="True" muted="True" playsinline="False" poster="" preload="auto" sources="['tutorials/physics/video/soft_body_box_simulation.webm',\ 'video/webm',\ False]" width="100%">
            </video_node>
            <tip>
                <paragraph>To improve the simulation's result, increase the <strong>Simulation Precision</strong>.
                    This can give a significant improvement at the cost of performance.</paragraph>
                <paragraph>Alternatively, you can increase the <strong>Physics &gt; Common &gt; Physics Ticks per Second</strong>
                    project setting, which will also affect soft body simulation quality.</paragraph>
            </tip>
        </section>
        <section ids="cloak-simulation" names="cloak\ simulation">
            <title>Cloak simulation</title>
            <paragraph>Let's make a cloak in the Platformer 3D demo.</paragraph>
            <note>
                <paragraph>You can download the Platformer 3D demo on
                    <reference name="GitHub" refuri="https://github.com/godotengine/godot-demo-projects/tree/master/3d/platformer">GitHub</reference><target ids="github" names="github" refuri="https://github.com/godotengine/godot-demo-projects/tree/master/3d/platformer"></target>
                    or <reference name="the Asset Library" refuri="https://godotengine.org/asset-library/asset/2748">the Asset Library</reference><target ids="the-asset-library" names="the\ asset\ library" refuri="https://godotengine.org/asset-library/asset/2748"></target>.</paragraph>
            </note>
            <paragraph>Open the <literal>player/player.tscn</literal> scene, add a <literal>SoftBody3D</literal> node below the root node,
                then assign a PlaneMesh resource to it in its <strong>Mesh</strong> property.</paragraph>
            <paragraph>Open the PlaneMesh's properties and set the size to <literal>(0.5, 1.0)</literal>,
                then set <strong>Subdivide Width</strong> and <strong>Subdivide Depth</strong> to <literal>5</literal>. Adjust the
                SoftBody3D node's position and rotation so that the plane appears to be close to
                the character's back. You should end up with something like this:</paragraph>
            <figure align="center" ids="id3">
                <image alt="Subdividing the PlaneMesh and placing it on the character's back" candidates="{'*': 'tutorials/physics/img/soft_body_cloak_subdivide.webp'}" original_uri="img/soft_body_cloak_subdivide.webp" uri="tutorials/physics/img/soft_body_cloak_subdivide.webp"></image>
                <caption>Subdividing the PlaneMesh and placing it on the character's back</caption>
            </figure>
            <tip>
                <paragraph>Subdivision generates a more tessellated mesh for better simulations.
                    However, higher subdivision levels will impact performance. Try
                    to find a balance between performance and quality. This depends on the number
                    of soft body simulations that you expect to be active at a given time,
                    as well as the distance between the camera and the soft body.</paragraph>
            </tip>
            <paragraph>Add a <reference internal="True" refuri="../../classes/class_boneattachment3d#class-boneattachment3d"><inline classes="std std-ref">BoneAttachment3D</inline></reference> node under the skeleton
                node and select the Neck bone to attach the cloak to the character skeleton.</paragraph>
            <note>
                <paragraph>The BoneAttachment3D node is used to attach objects to a bone of an armature.
                    The attached object will follow the bone's movement. For example, a character's
                    held weapon can be attached this way.</paragraph>
                <paragraph>Do <strong>not</strong> move the SoftBody3D node under the BoneAttachment3D node as of now.
                    Instead, we'll configure its <emphasis>pinned points</emphasis> to follow the BoneAttachment3D node.</paragraph>
            </note>
            <figure align="center" ids="id4">
                <image alt="Configuring the BoneAttachment3D node in the inspector" candidates="{'*': 'tutorials/physics/img/soft_body_cloak_bone_attach.webp'}" original_uri="img/soft_body_cloak_bone_attach.webp" uri="tutorials/physics/img/soft_body_cloak_bone_attach.webp"></image>
                <caption>Configuring the BoneAttachment3D node in the inspector</caption>
            </figure>
            <paragraph>To create pinned points, select the upper vertices in the SoftBody3D node. A pinned
                point appears blue in the 3D editor viewport:</paragraph>
            <figure align="center" ids="id5">
                <image alt="Pinning the SoftBody3D's points in the inspector" candidates="{'*': 'tutorials/physics/img/soft_body_cloak_pinned.webp'}" original_uri="img/soft_body_cloak_pinned.webp" uri="tutorials/physics/img/soft_body_cloak_pinned.webp"></image>
                <caption>Pinning the SoftBody3D's points in the inspector</caption>
            </figure>
            <paragraph>The pinned joints can be found in SoftBody3D's <strong>Attachments</strong> section,
                which is under the <strong>Collision</strong> section that must be expanded first.
                Choose the BoneAttachment3D node as the <strong>Spatial Attachment Path</strong> for each
                pinned joint. The pinned joints are now attached to the neck.</paragraph>
            <tip>
                <paragraph>To assign the properties faster, you can drag-and-drop the BoneAttachment3D node
                    from the scene tree dock to the <strong>Spatial Attachment Path</strong> property field.</paragraph>
            </tip>
            <paragraph>Note that you may have to deselect then reselect the SoftBody3D node for the
                <strong>Attachments</strong> section to appear.</paragraph>
            <figure align="center" ids="id6">
                <image alt="Configuring pinned points to be attached to the BoneAttachment3D node in the SoftBody3D inspector" candidates="{'*': 'tutorials/physics/img/soft_body_cloak_pinned_attach.webp'}" original_uri="img/soft_body_cloak_pinned_attach.webp" uri="tutorials/physics/img/soft_body_cloak_pinned_attach.webp"></image>
                <caption>Configuring pinned points to be attached to the BoneAttachment3D node in the SoftBody3D inspector</caption>
            </figure>
            <paragraph>The last step is to avoid clipping by adding the CharacterBody3D <literal>Player</literal> (the scene's root node)
                to the <strong>Parent Collision Ignore</strong> property of the SoftBody3D.</paragraph>
            <figure align="center" ids="id7">
                <image alt="Setting up the collision exception in the SoftBody3D inspector" candidates="{'*': 'tutorials/physics/img/soft_body_cloak_ignore.webp'}" original_uri="img/soft_body_cloak_ignore.webp" uri="tutorials/physics/img/soft_body_cloak_ignore.webp"></image>
                <caption>Setting up the collision exception in the SoftBody3D inspector</caption>
            </figure>
            <paragraph>Play the scene and the cloak should simulate correctly.</paragraph>
            <figure align="center" ids="id8">
                <image alt="Final result when running the project's main scene" candidates="{'*': 'tutorials/physics/img/soft_body_cloak_finish.webp'}" original_uri="img/soft_body_cloak_finish.webp" uri="tutorials/physics/img/soft_body_cloak_finish.webp"></image>
                <caption>Final result when running the project's main scene</caption>
            </figure>
            <paragraph>This covers the basic settings of a soft body simulation. Experiment with the parameters
                to achieve the effect you are aiming for when making your game.</paragraph>
            <note>
                <paragraph>The cloak will not appear when viewed from certain angles due to backface culling.
                    To resolve this, you can disable backface culling by assigning a new StandardMaterial3D,
                    then setting its cull mode to <strong>Disabled</strong>. This will make the material render
                    both sides of the plane.</paragraph>
            </note>
        </section>
        <section ids="using-imported-meshes" names="using\ imported\ meshes">
            <title>Using imported meshes</title>
            <paragraph>The <strong>Save to File</strong> option in the Advanced Import Settings dialog allows you
                to save a mesh to a standalone resource file that you can then attach to
                SoftBody3D nodes.</paragraph>
            <paragraph>You may also want to disable LOD generation or change the LOD generation options
                when importing a mesh for use with SoftBody3D. The default import settings
                will produce an LOD that merges adjacent faces that are nearly flat with
                respect to each other, even at very close render distances. This works well for
                static meshes, but is often undesirable for use with SoftBody3D if you want
                these faces to be able to bend and move with respect to each other, instead of
                being rendered as a single plane.</paragraph>
            <paragraph>See <reference internal="True" refuri="../assets_pipeline/importing_3d_scenes/import_configuration#doc-importing-3d-scenes-import-configuration"><inline classes="std std-ref">Import configuration</inline></reference> and <reference internal="True" refuri="../3d/mesh_lod#doc-mesh-lod"><inline classes="std std-ref">Mesh level of detail (LOD)</inline></reference>
                for more details.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
