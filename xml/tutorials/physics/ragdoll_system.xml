<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.17.1 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/tutorials/physics/ragdoll_system.rst" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-ragdoll-system"></target>
    <section ids="ragdoll-system doc-ragdoll-system" names="ragdoll\ system 布娃娃系统 doc_ragdoll_system">
        <title>布娃娃系统</title>
        <section ids="introduction" names="introduction 前言">
            <title>前言</title>
            <paragraph>Godot 从 3.1 版本开始支持布娃娃物理。布娃娃依靠物理模拟来创建逼真的程序式动画，它们被用于许多游戏中的死亡动画。</paragraph>
            <paragraph>在本教程中，我们将使用 Platformer3D 演示来进行布娃娃的设置。</paragraph>
            <note>
                <paragraph>You can download the Platformer3D demo on <reference name="GitHub" refuri="https://github.com/godotengine/godot-demo-projects/tree/master/3d/platformer">GitHub</reference><target ids="github" names="github" refuri="https://github.com/godotengine/godot-demo-projects/tree/master/3d/platformer"></target> or using the <reference name="Asset Library" refuri="https://godotengine.org/asset-library/asset/2748">Asset Library</reference><target ids="asset-library" names="asset\ library" refuri="https://godotengine.org/asset-library/asset/2748"></target>.</paragraph>
            </note>
        </section>
        <section ids="setting-up-the-ragdoll" names="setting\ up\ the\ ragdoll 设置布娃娃">
            <title>设置布娃娃</title>
            <section ids="creating-physical-bones" names="creating\ physical\ bones 创建物理骨骼">
                <title>创建物理骨骼</title>
                <paragraph>Like many other features in the engine, there is a node to set up a ragdoll: the <reference internal="True" refuri="../../classes/class_physicalbone3d#class-physicalbone3d"><inline classes="std std-ref">PhysicalBone3D</inline></reference> node. To simplify the setup, you can generate <literal>PhysicalBone</literal> nodes with the "Create physical skeleton" feature in the skeleton node.</paragraph>
                <paragraph>在 Godot 中打开 Platformer 演示项目，然后打开 Robi 场景。选择 <literal>Skeleton</literal> 节点。顶部栏菜单上显示骨架按钮：</paragraph>
                <image candidates="{'*': 'tutorials/physics/img/ragdoll_menu.png'}" uri="tutorials/physics/img/ragdoll_menu.png"></image>
                <paragraph>单击它并选择 <literal>创建物理骨架</literal> 选项。Godot 将为骨架中的每个骨骼生成 <literal>PhysicalBone</literal> 节点和碰撞形状，并用钉关节将它们连接在一起：</paragraph>
                <image candidates="{'*': 'tutorials/physics/img/ragdoll_bones.png'}" uri="tutorials/physics/img/ragdoll_bones.png"></image>
                <paragraph>一些生成的骨骼不是必需的：例如 <literal>MASTER</literal> 骨骼。因此，我们将通过删除它们来清理骨架。</paragraph>
            </section>
            <section ids="cleaning-up-the-skeleton" names="cleaning\ up\ the\ skeleton 清理骨骼">
                <title>清理骨骼</title>
                <paragraph>引擎需要模拟的每一个 <literal>PhysicalBone</literal> 都有性能成本, 所以你要把每一个太小的骨头都去掉, 以便所有的实用骨头在模拟中发挥作用.</paragraph>
                <paragraph>例如, 如果我们拿一个人形动物来说, 不希望每个手指都有物理骨骼. 可以用一根骨头代替整个手, 或者用一根骨头代替手掌, 一根骨头代替拇指, 最后一根骨头代替其他四个手指.</paragraph>
                <paragraph>删除这些物理骨骼：<literal>MASTER</literal>、<literal>waist</literal>、<literal>neck</literal>、<literal>headtracker</literal>。这样就有了一个优化的骨架，使其更容易控制布娃娃。</paragraph>
            </section>
            <section ids="collision-shape-adjustment" names="collision\ shape\ adjustment 碰撞形状调整">
                <title>碰撞形状调整</title>
                <paragraph>接下来的任务是调整碰撞形状和物理骨骼的大小, 以匹配每个骨骼应该模拟的身体部位.</paragraph>
                <image candidates="{'*': 'tutorials/physics/img/ragdoll_shape_adjust.gif'}" uri="tutorials/physics/img/ragdoll_shape_adjust.gif"></image>
            </section>
            <section ids="joints-adjustment" names="joints\ adjustment 关节调整">
                <title>关节调整</title>
                <paragraph>一旦你调整了碰撞形状，布娃娃就差不多准备好了。只需要调整钉关节以获得更好的模拟效果。<literal>PhysicalBone</literal> 节点在默认情况下有一个不受限制的钉关节。要改变钉关节，请选择 <literal>PhysicalBone</literal> 并在 <literal>Joint</literal> 部分改变约束类型。在那里，你可以改变约束的方向和限制。</paragraph>
                <image candidates="{'*': 'tutorials/physics/img/ragdoll_joint_adjust.gif'}" uri="tutorials/physics/img/ragdoll_joint_adjust.gif"></image>
                <paragraph>这是最终效果:</paragraph>
                <image candidates="{'*': 'tutorials/physics/img/ragdoll_result.png'}" uri="tutorials/physics/img/ragdoll_result.png"></image>
            </section>
        </section>
        <section ids="simulating-the-ragdoll" names="simulating\ the\ ragdoll 模拟布娃娃">
            <title>模拟布娃娃</title>
            <paragraph>布娃娃现在可以使用了。要开始模拟并播放布娃娃动画，你需要调用 <literal>physical_bones_start_simulation</literal> 方法。将脚本附加到骨架节点并在 <literal>_ready</literal> 方法中调用该方法：</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                </div>
                <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    physical_bones_start_simulation()</literal_block>
                </div>
            </container>
            <paragraph>要停止模拟, 请调用 <literal>physical_bones_stop_simulation()</literal> 方法.</paragraph>
            <image candidates="{'*': 'tutorials/physics/img/ragdoll_sim_stop.gif'}" uri="tutorials/physics/img/ragdoll_sim_stop.gif"></image>
            <paragraph>你还可以将模拟限制为仅几个骨骼。为此，请将骨骼名称作为参数传递。这是部分布娃娃模拟的一个示例：</paragraph>
            <image candidates="{'*': 'tutorials/physics/img/ragdoll_sim_part.gif'}" uri="tutorials/physics/img/ragdoll_sim_part.gif"></image>
            <section ids="collision-layer-and-mask" names="collision\ layer\ and\ mask 碰撞层与遮罩">
                <title>碰撞层与遮罩</title>
                <paragraph>Make sure to set up your collision layers and masks properly so the <literal>CharacterBody3D</literal>'s capsule doesn't get in the way of the physics simulation:</paragraph>
                <image candidates="{'*': 'tutorials/physics/img/ragdoll_layer.png'}" uri="tutorials/physics/img/ragdoll_layer.png"></image>
                <paragraph>有关更多信息, 请阅读 <reference internal="True" refuri="physics_introduction#doc-physics-introduction"><inline classes="std std-ref">物理介绍</inline></reference>.</paragraph>
                <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/zh_CN/?utm_source=widget"><image alt="翻译状态" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/zh_CN/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
            </section>
        </section>
    </section>
</document>
