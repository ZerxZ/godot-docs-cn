<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/classes/class_editorcontextmenuplugin.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <comment xml:space="preserve">DO NOT EDIT THIS FILE!!!</comment>
    <comment xml:space="preserve">Generated automatically from Godot engine sources.</comment>
    <comment xml:space="preserve">Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.</comment>
    <comment xml:space="preserve">XML source: https://github.com/godotengine/godot/tree/master/doc/classes/EditorContextMenuPlugin.xml.</comment>
    <target refid="class-editorcontextmenuplugin"></target>
    <section ids="editorcontextmenuplugin class-editorcontextmenuplugin" names="editorcontextmenuplugin class_editorcontextmenuplugin">
        <title>EditorContextMenuPlugin</title>
        <paragraph><strong>Inherits:</strong> <reference internal="True" refuri="class_refcounted#class-refcounted"><inline classes="std std-ref">RefCounted</inline></reference> <strong>&lt;</strong> <reference internal="True" refuri="class_object#class-object"><inline classes="std std-ref">Object</inline></reference></paragraph>
        <paragraph>Plugin for adding custom context menus in the editor.</paragraph>
        <section classes="classref-introduction-group" ids="description" names="description">
            <title>Description</title>
            <paragraph><strong>EditorContextMenuPlugin</strong> allows for the addition of custom options in the editor's context menu.</paragraph>
            <paragraph>Currently, context menus are supported for three commonly used areas: the file system, scene tree, and editor script list panel.</paragraph>
        </section>
        <section classes="classref-reftable-group" ids="methods" names="methods">
            <title>Methods</title>
            <table classes="colwidths-auto">
                <tgroup cols="2">
                    <colspec colwidth="8"></colspec>
                    <colspec colwidth="253"></colspec>
                    <tbody>
                        <row>
                            <entry>
                                <paragraph><abbreviation explanation="No return value.">void</abbreviation></paragraph>
                            </entry>
                            <entry>
                                <paragraph><reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu</inline></reference>(paths: <reference internal="True" refuri="class_packedstringarray#class-packedstringarray"><inline classes="std std-ref">PackedStringArray</inline></reference>) <abbreviation explanation="This method should typically be overridden by the user to have any effect.">virtual</abbreviation></paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><abbreviation explanation="No return value.">void</abbreviation></paragraph>
                            </entry>
                            <entry>
                                <paragraph><reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item"><inline classes="std std-ref">add_context_menu_item</inline></reference>(name: <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference>, callback: <reference internal="True" refuri="class_callable#class-callable"><inline classes="std std-ref">Callable</inline></reference>, icon: <reference internal="True" refuri="class_texture2d#class-texture2d"><inline classes="std std-ref">Texture2D</inline></reference> = null)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><abbreviation explanation="No return value.">void</abbreviation></paragraph>
                            </entry>
                            <entry>
                                <paragraph><reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item-from-shortcut"><inline classes="std std-ref">add_context_menu_item_from_shortcut</inline></reference>(name: <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference>, shortcut: <reference internal="True" refuri="class_shortcut#class-shortcut"><inline classes="std std-ref">Shortcut</inline></reference>, icon: <reference internal="True" refuri="class_texture2d#class-texture2d"><inline classes="std std-ref">Texture2D</inline></reference> = null)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><abbreviation explanation="No return value.">void</abbreviation></paragraph>
                            </entry>
                            <entry>
                                <paragraph><reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-submenu-item"><inline classes="std std-ref">add_context_submenu_item</inline></reference>(name: <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference>, menu: <reference internal="True" refuri="class_popupmenu#class-popupmenu"><inline classes="std std-ref">PopupMenu</inline></reference>, icon: <reference internal="True" refuri="class_texture2d#class-texture2d"><inline classes="std std-ref">Texture2D</inline></reference> = null)</paragraph>
                            </entry>
                        </row>
                        <row>
                            <entry>
                                <paragraph><abbreviation explanation="No return value.">void</abbreviation></paragraph>
                            </entry>
                            <entry>
                                <paragraph><reference internal="True" refid="class-editorcontextmenuplugin-method-add-menu-shortcut"><inline classes="std std-ref">add_menu_shortcut</inline></reference>(shortcut: <reference internal="True" refuri="class_shortcut#class-shortcut"><inline classes="std std-ref">Shortcut</inline></reference>, callback: <reference internal="True" refuri="class_callable#class-callable"><inline classes="std std-ref">Callable</inline></reference>)</paragraph>
                            </entry>
                        </row>
                    </tbody>
                </tgroup>
            </table>
        </section>
        <transition classes="classref-section-separator"></transition>
        <section classes="classref-descriptions-group" ids="enumerations" names="enumerations">
            <title>Enumerations</title>
            <target refid="enum-editorcontextmenuplugin-contextmenuslot"></target>
            <paragraph classes="classref-enumeration" ids="enum-editorcontextmenuplugin-contextmenuslot" names="enum_editorcontextmenuplugin_contextmenuslot">enum <strong>ContextMenuSlot</strong>: <reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ðŸ”—</inline></reference></paragraph>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-scene-tree"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-scene-tree" names="class_editorcontextmenuplugin_constant_context_slot_scene_tree"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_SCENE_TREE</strong> = <literal>0</literal></paragraph>
            <paragraph>Context menu of Scene dock. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> will be called with a list of paths to currently selected nodes, while option callback will receive the list of currently selected nodes.</paragraph>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-filesystem"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-filesystem" names="class_editorcontextmenuplugin_constant_context_slot_filesystem"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_FILESYSTEM</strong> = <literal>1</literal></paragraph>
            <paragraph>Context menu of FileSystem dock. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> and option callback will be called with list of paths of the currently selected files.</paragraph>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-script-editor"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-script-editor" names="class_editorcontextmenuplugin_constant_context_slot_script_editor"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_SCRIPT_EDITOR</strong> = <literal>2</literal></paragraph>
            <paragraph>Context menu of Script editor's script tabs. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> will be called with the path to the currently edited script, while option callback will receive reference to that script.</paragraph>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-filesystem-create"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-filesystem-create" names="class_editorcontextmenuplugin_constant_context_slot_filesystem_create"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_FILESYSTEM_CREATE</strong> = <literal>3</literal></paragraph>
            <paragraph>The "Create..." submenu of FileSystem dock's context menu, or the "New" section of the main context menu when empty space is clicked. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> and option callback will be called with the path of the currently selected folder. When clicking the empty space, the list of paths for popup method will be empty.</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _popup_menu(paths):
    if paths.is_empty():
        add_context_menu_item("New Image File...", create_image)
    else:
        add_context_menu_item("Image File...", create_image)</literal_block>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-script-editor-code"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-script-editor-code" names="class_editorcontextmenuplugin_constant_context_slot_script_editor_code"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_SCRIPT_EDITOR_CODE</strong> = <literal>4</literal></paragraph>
            <paragraph>Context menu of Script editor's code editor. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> will be called with the path to the <reference internal="True" refuri="class_codeedit#class-codeedit"><inline classes="std std-ref">CodeEdit</inline></reference> node. You can fetch it using this code:</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _popup_menu(paths):
    var code_edit = Engine.get_main_loop().root.get_node(paths[0]);</literal_block>
            <paragraph>The option callback will receive reference to that node. You can use <reference internal="True" refuri="class_codeedit#class-codeedit"><inline classes="std std-ref">CodeEdit</inline></reference> methods to perform symbol lookups etc.</paragraph>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-scene-tabs"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-scene-tabs" names="class_editorcontextmenuplugin_constant_context_slot_scene_tabs"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_SCENE_TABS</strong> = <literal>5</literal></paragraph>
            <paragraph>Context menu of scene tabs. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> will be called with the path of the clicked scene, or empty <reference internal="True" refuri="class_packedstringarray#class-packedstringarray"><inline classes="std std-ref">PackedStringArray</inline></reference> if the menu was opened on empty space. The option callback will receive the path of the clicked scene, or empty <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference> if none was clicked.</paragraph>
            <target refid="class-editorcontextmenuplugin-constant-context-slot-2d-editor"></target>
            <paragraph classes="classref-enumeration-constant" ids="class-editorcontextmenuplugin-constant-context-slot-2d-editor" names="class_editorcontextmenuplugin_constant_context_slot_2d_editor"><reference internal="True" refid="enum-editorcontextmenuplugin-contextmenuslot"><inline classes="std std-ref">ContextMenuSlot</inline></reference> <strong>CONTEXT_SLOT_2D_EDITOR</strong> = <literal>6</literal></paragraph>
            <paragraph>Context menu of 2D editor's basic right-click menu. <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">_popup_menu()</inline></reference> will be called with paths to all <reference internal="True" refuri="class_canvasitem#class-canvasitem"><inline classes="std std-ref">CanvasItem</inline></reference> nodes under the cursor. You can fetch them using this code:</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _popup_menu(paths):
    var canvas_item = Engine.get_main_loop().root.get_node(paths[0]); # Replace 0 with the desired index.</literal_block>
            <paragraph>The paths array is empty if there weren't any nodes under cursor. The option callback will receive a typed array of <reference internal="True" refuri="class_canvasitem#class-canvasitem"><inline classes="std std-ref">CanvasItem</inline></reference> nodes.</paragraph>
        </section>
        <transition classes="classref-section-separator"></transition>
        <section classes="classref-descriptions-group" ids="method-descriptions" names="method\ descriptions">
            <title>Method Descriptions</title>
            <target refid="class-editorcontextmenuplugin-private-method-popup-menu"></target>
            <paragraph classes="classref-method" ids="class-editorcontextmenuplugin-private-method-popup-menu" names="class_editorcontextmenuplugin_private_method__popup_menu"><abbreviation explanation="No return value.">void</abbreviation> <strong>_popup_menu</strong>(paths: <reference internal="True" refuri="class_packedstringarray#class-packedstringarray"><inline classes="std std-ref">PackedStringArray</inline></reference>) <abbreviation explanation="This method should typically be overridden by the user to have any effect.">virtual</abbreviation> <reference internal="True" refid="class-editorcontextmenuplugin-private-method-popup-menu"><inline classes="std std-ref">ðŸ”—</inline></reference></paragraph>
            <paragraph>Called when creating a context menu, custom options can be added by using the <reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item"><inline classes="std std-ref">add_context_menu_item()</inline></reference> or <reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item-from-shortcut"><inline classes="std std-ref">add_context_menu_item_from_shortcut()</inline></reference> functions. <literal>paths</literal> contains currently selected paths (depending on menu), which can be used to conditionally add options.</paragraph>
            <transition classes="classref-item-separator"></transition>
            <target refid="class-editorcontextmenuplugin-method-add-context-menu-item"></target>
            <paragraph classes="classref-method" ids="class-editorcontextmenuplugin-method-add-context-menu-item" names="class_editorcontextmenuplugin_method_add_context_menu_item"><abbreviation explanation="No return value.">void</abbreviation> <strong>add_context_menu_item</strong>(name: <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference>, callback: <reference internal="True" refuri="class_callable#class-callable"><inline classes="std std-ref">Callable</inline></reference>, icon: <reference internal="True" refuri="class_texture2d#class-texture2d"><inline classes="std std-ref">Texture2D</inline></reference> = null) <reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item"><inline classes="std std-ref">ðŸ”—</inline></reference></paragraph>
            <paragraph>Add custom option to the context menu of the plugin's specified slot. When the option is activated, <literal>callback</literal> will be called. Callback should take single <reference internal="True" refuri="class_array#class-array"><inline classes="std std-ref">Array</inline></reference> argument; array contents depend on context menu slot.</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _popup_menu(paths):
    add_context_menu_item("File Custom options", handle, ICON)</literal_block>
            <paragraph>If you want to assign shortcut to the menu item, use <reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item-from-shortcut"><inline classes="std std-ref">add_context_menu_item_from_shortcut()</inline></reference> instead.</paragraph>
            <transition classes="classref-item-separator"></transition>
            <target refid="class-editorcontextmenuplugin-method-add-context-menu-item-from-shortcut"></target>
            <paragraph classes="classref-method" ids="class-editorcontextmenuplugin-method-add-context-menu-item-from-shortcut" names="class_editorcontextmenuplugin_method_add_context_menu_item_from_shortcut"><abbreviation explanation="No return value.">void</abbreviation> <strong>add_context_menu_item_from_shortcut</strong>(name: <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference>, shortcut: <reference internal="True" refuri="class_shortcut#class-shortcut"><inline classes="std std-ref">Shortcut</inline></reference>, icon: <reference internal="True" refuri="class_texture2d#class-texture2d"><inline classes="std std-ref">Texture2D</inline></reference> = null) <reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-menu-item-from-shortcut"><inline classes="std std-ref">ðŸ”—</inline></reference></paragraph>
            <paragraph>Add custom option to the context menu of the plugin's specified slot. The option will have the <literal>shortcut</literal> assigned and reuse its callback. The shortcut has to be registered beforehand with <reference internal="True" refid="class-editorcontextmenuplugin-method-add-menu-shortcut"><inline classes="std std-ref">add_menu_shortcut()</inline></reference>.</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _init():
    add_menu_shortcut(SHORTCUT, handle)

func _popup_menu(paths):
    add_context_menu_item_from_shortcut("File Custom options", SHORTCUT, ICON)</literal_block>
            <transition classes="classref-item-separator"></transition>
            <target refid="class-editorcontextmenuplugin-method-add-context-submenu-item"></target>
            <paragraph classes="classref-method" ids="class-editorcontextmenuplugin-method-add-context-submenu-item" names="class_editorcontextmenuplugin_method_add_context_submenu_item"><abbreviation explanation="No return value.">void</abbreviation> <strong>add_context_submenu_item</strong>(name: <reference internal="True" refuri="class_string#class-string"><inline classes="std std-ref">String</inline></reference>, menu: <reference internal="True" refuri="class_popupmenu#class-popupmenu"><inline classes="std std-ref">PopupMenu</inline></reference>, icon: <reference internal="True" refuri="class_texture2d#class-texture2d"><inline classes="std std-ref">Texture2D</inline></reference> = null) <reference internal="True" refid="class-editorcontextmenuplugin-method-add-context-submenu-item"><inline classes="std std-ref">ðŸ”—</inline></reference></paragraph>
            <paragraph>Add a submenu to the context menu of the plugin's specified slot. The submenu is not automatically handled, you need to connect to its signals yourself. Also the submenu is freed on every popup, so provide a new <reference internal="True" refuri="class_popupmenu#class-popupmenu"><inline classes="std std-ref">PopupMenu</inline></reference> every time.</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _popup_menu(paths):
    var popup_menu = PopupMenu.new()
    popup_menu.add_item("Blue")
    popup_menu.add_item("White")
    popup_menu.id_pressed.connect(_on_color_submenu_option)

    add_context_submenu_item("Set Node Color", popup_menu)</literal_block>
            <transition classes="classref-item-separator"></transition>
            <target refid="class-editorcontextmenuplugin-method-add-menu-shortcut"></target>
            <paragraph classes="classref-method" ids="class-editorcontextmenuplugin-method-add-menu-shortcut" names="class_editorcontextmenuplugin_method_add_menu_shortcut"><abbreviation explanation="No return value.">void</abbreviation> <strong>add_menu_shortcut</strong>(shortcut: <reference internal="True" refuri="class_shortcut#class-shortcut"><inline classes="std std-ref">Shortcut</inline></reference>, callback: <reference internal="True" refuri="class_callable#class-callable"><inline classes="std std-ref">Callable</inline></reference>) <reference internal="True" refid="class-editorcontextmenuplugin-method-add-menu-shortcut"><inline classes="std std-ref">ðŸ”—</inline></reference></paragraph>
            <paragraph>Registers a shortcut associated with the plugin's context menu. This method should be called once (e.g. in plugin's <reference internal="True" refuri="class_object#class-object-private-method-init"><inline classes="std std-ref">Object._init()</inline></reference>). <literal>callback</literal> will be called when user presses the specified <literal>shortcut</literal> while the menu's context is in effect (e.g. FileSystem dock is focused). Callback should take single <reference internal="True" refuri="class_array#class-array"><inline classes="std std-ref">Array</inline></reference> argument; array contents depend on context menu slot.</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">func _init():
    add_menu_shortcut(SHORTCUT, handle)</literal_block>
            <substitution_definition names="virtual"><abbreviation explanation="This method should typically be overridden by the user to have any effect.">virtual</abbreviation></substitution_definition>
            <substitution_definition names="required"><abbreviation explanation="This method is required to be overridden when extending its base class.">required</abbreviation></substitution_definition>
            <substitution_definition names="const"><abbreviation explanation="This method has no side effects. It doesn't modify any of the instance's member variables.">const</abbreviation></substitution_definition>
            <substitution_definition names="vararg"><abbreviation explanation="This method accepts any number of arguments after the ones described here.">vararg</abbreviation></substitution_definition>
            <substitution_definition names="constructor"><abbreviation explanation="This method is used to construct a type.">constructor</abbreviation></substitution_definition>
            <substitution_definition names="static"><abbreviation explanation="This method doesn't need an instance to be called, so it can be called directly using the class name.">static</abbreviation></substitution_definition>
            <substitution_definition names="operator"><abbreviation explanation="This method describes a valid operator to use with this type as left-hand operand.">operator</abbreviation></substitution_definition>
            <substitution_definition names="bitfield"><abbreviation explanation="This value is an integer composed as a bitmask of the following flags.">BitField</abbreviation></substitution_definition>
            <substitution_definition names="void"><abbreviation explanation="No return value.">void</abbreviation></substitution_definition>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
