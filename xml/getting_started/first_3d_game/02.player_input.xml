<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/getting_started/first_3d_game/02.player_input.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-first-3d-game-player-scene-and-input"></target>
    <section ids="player-scene-and-input-actions doc-first-3d-game-player-scene-and-input" names="player\ scene\ and\ input\ actions doc_first_3d_game_player_scene_and_input">
        <title>Player scene and input actions</title>
        <paragraph>In the next two lessons, we will design the player scene, register custom input
            actions, and code player movement. By the end, you'll have a playable character
            that moves in eight directions.</paragraph>
        <paragraph>Create a new scene by going to the <strong>Scene</strong> menu in the top-left
            and clicking <strong>New Scene</strong>.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/new_scene.webp'}" original_uri="img/02.player_input/new_scene.webp" uri="getting_started/first_3d_game/img/02.player_input/new_scene.webp"></image>
        <paragraph>Click the <strong>Other Node</strong> button and select the <literal>CharacterBody3D</literal> node type
            to create a <reference internal="True" refuri="../../classes/class_characterbody3d#class-characterbody3d"><inline classes="std std-ref">CharacterBody3D</inline></reference> as the root node.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/add_character_body3D.webp'}" original_uri="img/02.player_input/add_character_body3D.webp" uri="getting_started/first_3d_game/img/02.player_input/add_character_body3D.webp"></image>
        <paragraph>Rename the <reference internal="True" refuri="../../classes/class_characterbody3d#class-characterbody3d"><inline classes="std std-ref">CharacterBody3D</inline></reference> to <literal>Player</literal>.
            Character bodies are complementary to the area and rigid bodies used in the 2D
            game tutorial. Like rigid bodies, they can move and collide with the
            environment, but instead of being controlled by the physics engine, <strong>you</strong> dictate
            their movement. You will see how we use the node's unique features when we code
            the jump and squash mechanics.</paragraph>
        <seealso>
            <paragraph>To learn more about the different physics node types, see the
                <reference internal="True" refuri="../../tutorials/physics/physics_introduction#doc-physics-introduction"><inline classes="std std-ref">Physics introduction</inline></reference>.</paragraph>
        </seealso>
        <paragraph>For now, we're going to create a basic rig for our character's 3D model. This
            will allow us to rotate the model later via code while it plays an animation.</paragraph>
        <paragraph>Add a <reference internal="True" refuri="../../classes/class_node3d#class-node3d"><inline classes="std std-ref">Node3D</inline></reference> node as a child of <literal>Player</literal>.
            Select the <literal>Player</literal> node in the <strong>Scene</strong> tree and click the "<strong>+</strong>" button to add a child node.
            Rename it to <literal>Pivot</literal>.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/adding_node3D.webp'}" original_uri="img/02.player_input/adding_node3D.webp" uri="getting_started/first_3d_game/img/02.player_input/adding_node3D.webp"></image>
        <paragraph>Then, in the FileSystem dock, expand the <literal>art/</literal> folder
            by double-clicking it and drag and
            drop <literal>player.glb</literal> onto <literal>Pivot</literal>.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/instantiating_the_model.webp'}" original_uri="img/02.player_input/instantiating_the_model.webp" uri="getting_started/first_3d_game/img/02.player_input/instantiating_the_model.webp"></image>
        <paragraph>This should instantiate the model as a child of <literal>Pivot</literal>.
            You can rename it to <literal>Character</literal>.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/scene_structure.webp'}" original_uri="img/02.player_input/scene_structure.webp" uri="getting_started/first_3d_game/img/02.player_input/scene_structure.webp"></image>
        <note>
            <paragraph>The <literal>.glb</literal> files contain 3D scene data based on the open source glTF 2.0
                specification. They're a modern and powerful alternative to a proprietary format
                like FBX, which Godot also supports. To produce these files, we designed the
                model in <reference name="Blender 3D" refuri="https://www.blender.org/">Blender 3D</reference> and exported it to glTF.</paragraph>
        </note>
        <paragraph>As with all kinds of physics nodes, we need a collision shape for our character
            to collide with the environment. Select the <literal>Player</literal> node again and add a child node
            <reference internal="True" refuri="../../classes/class_collisionshape3d#class-collisionshape3d"><inline classes="std std-ref">CollisionShape3D</inline></reference>. In the <strong>Inspector</strong>, on the <strong>Shape</strong> property,
            add a new <reference internal="True" refuri="../../classes/class_sphereshape3d#class-sphereshape3d"><inline classes="std std-ref">SphereShape3D</inline></reference>.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/add_capsuleshape3d.webp'}" original_uri="img/02.player_input/add_capsuleshape3d.webp" uri="getting_started/first_3d_game/img/02.player_input/add_capsuleshape3d.webp"></image>
        <paragraph>The sphere's wireframe appears below the character.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/sphere_shape.png'}" original_uri="img/02.player_input/sphere_shape.png" uri="getting_started/first_3d_game/img/02.player_input/sphere_shape.png"></image>
        <paragraph>It will be the shape the physics engine uses to collide with the environment, so
            we want it to better fit the 3D model. Make it a bit larger by dragging the orange
            dot in the viewport. My sphere has a radius of about <literal>0.8</literal> meters.</paragraph>
        <paragraph>Then, move the collision shape up so its bottom roughly aligns with the grid's plane.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/moving_the_sphere_up.png'}" original_uri="img/02.player_input/moving_the_sphere_up.png" uri="getting_started/first_3d_game/img/02.player_input/moving_the_sphere_up.png"></image>
        <paragraph>To make moving the shape easier, you can toggle the model's visibility by clicking
            the <strong>eye icon</strong> next to the <literal>Character</literal> or the <literal>Pivot</literal> nodes.</paragraph>
        <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/toggling_visibility.webp'}" original_uri="img/02.player_input/toggling_visibility.webp" uri="getting_started/first_3d_game/img/02.player_input/toggling_visibility.webp"></image>
        <paragraph>Save the scene as <literal>player.tscn</literal>.</paragraph>
        <paragraph>With the nodes ready, we can almost get coding. But first, we need to define
            some input actions.</paragraph>
        <target refid="doc-first-3d-game-input-actions"></target>
        <section ids="creating-input-actions doc-first-3d-game-input-actions" names="creating\ input\ actions doc_first_3d_game_input_actions">
            <title>Creating input actions</title>
            <paragraph>To move the character, we will listen to the player's input, like pressing the
                arrow keys. In Godot, while we could write all the key bindings in code, there's
                a powerful system that allows you to assign a label to a set of keys and
                buttons. This simplifies our scripts and makes them more readable.</paragraph>
            <paragraph>This system is the Input Map. To access its editor, head to the <strong>Project</strong> menu
                and select <strong>Project Settings...</strong>.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/project_settings.webp'}" original_uri="img/02.player_input/project_settings.webp" uri="getting_started/first_3d_game/img/02.player_input/project_settings.webp"></image>
            <paragraph>At the top, there are multiple tabs. Click on <strong>Input Map</strong>. This window allows
                you to add new actions at the top; they are your labels. In the bottom part, you
                can bind keys to these actions.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/input_map_tab.webp'}" original_uri="img/02.player_input/input_map_tab.webp" uri="getting_started/first_3d_game/img/02.player_input/input_map_tab.webp"></image>
            <paragraph>Godot projects come with some predefined actions designed for user interface
                design (see above screenshot). These will become visible if you enable the
                <strong>Show Built-in Actions</strong> toggle. We could use these here, but instead we're
                defining our own to support gamepads. Leave <strong>Show Built-in Actions</strong> disabled.</paragraph>
            <paragraph>We're going to name our actions <literal>move_left</literal>, <literal>move_right</literal>, <literal>move_forward</literal>,
                <literal>move_back</literal>, and <literal>jump</literal>.</paragraph>
            <paragraph>To add an action, write its name in the bar at the top and press Enter or click the <strong>Add</strong> button.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/adding_action.webp'}" original_uri="img/02.player_input/adding_action.webp" uri="getting_started/first_3d_game/img/02.player_input/adding_action.webp"></image>
            <paragraph>Create the following five actions:</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/actions_list_empty.webp'}" original_uri="img/02.player_input/actions_list_empty.webp" uri="getting_started/first_3d_game/img/02.player_input/actions_list_empty.webp"></image>
            <paragraph>To bind a key or button to an action, click the "<strong>+</strong>" button to its right. Do this
                for <literal>move_left</literal>. Press the left arrow key and click <strong>OK</strong>.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/left_inputmap.webp'}" original_uri="img/02.player_input/left_inputmap.webp" uri="getting_started/first_3d_game/img/02.player_input/left_inputmap.webp"></image>
            <paragraph>Bind also the <literal classes="kbd">A</literal> key, onto the action <literal>move_left</literal>.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/keyboard_keys.webp'}" original_uri="img/02.player_input/keyboard_keys.webp" uri="getting_started/first_3d_game/img/02.player_input/keyboard_keys.webp"></image>
            <paragraph>Let's now add support for a gamepad's left joystick. Click the "<strong>+</strong>" button again
                but this time, select the input within the input tree yourself.
                Select the negative X axis of the left joystick under <strong>Joypad Axes</strong>.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/joystick_axis_input.webp'}" original_uri="img/02.player_input/joystick_axis_input.webp" uri="getting_started/first_3d_game/img/02.player_input/joystick_axis_input.webp"></image>
            <paragraph>Leave the other values as default and press <strong>OK</strong>.</paragraph>
            <note>
                <paragraph>If you want controllers to have different input actions, you should use the Devices option in Additional Options. Device 0 corresponds to the first plugged gamepad, Device 1 corresponds to the second plugged gamepad, and so on.</paragraph>
            </note>
            <paragraph>Do the same for the other input actions. For example, bind the right arrow, D,
                and the left joystick's positive axis to <literal>move_right</literal>. After binding all keys,
                your interface should look like this.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/move_inputs_mapped.webp'}" original_uri="img/02.player_input/move_inputs_mapped.webp" uri="getting_started/first_3d_game/img/02.player_input/move_inputs_mapped.webp"></image>
            <paragraph>The final action to set up is the <literal>jump</literal> action. Bind the Space key and the gamepad's
                A button located under <strong>Joypad Buttons</strong>.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/joy_button_option.webp'}" original_uri="img/02.player_input/joy_button_option.webp" uri="getting_started/first_3d_game/img/02.player_input/joy_button_option.webp"></image>
            <paragraph>Your jump input action should look like this.</paragraph>
            <image candidates="{'*': 'getting_started/first_3d_game/img/02.player_input/jump_input_action.webp'}" original_uri="img/02.player_input/jump_input_action.webp" uri="getting_started/first_3d_game/img/02.player_input/jump_input_action.webp"></image>
            <paragraph>That's all the actions we need for this game. You can use this menu to label any
                groups of keys and buttons in your projects.</paragraph>
            <paragraph>In the next part, we'll code and test the player's movement.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
