<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/getting_started/first_2d_game/03.coding_the_player.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-your-first-2d-game-coding-the-player"></target>
    <section ids="coding-the-player doc-your-first-2d-game-coding-the-player" names="coding\ the\ player doc_your_first_2d_game_coding_the_player">
        <title>Coding the player</title>
        <paragraph>In this lesson, we'll add player movement, animation, and set it up to detect
            collisions.</paragraph>
        <paragraph>To do so, we need to add some functionality that we can't get from a built-in
            node, so we'll add a script. Click the <literal>Player</literal> node and click the "Attach
            Script" button:</paragraph>
        <image candidates="{'*': 'getting_started/first_2d_game/img/add_script_button.webp'}" original_uri="img/add_script_button.webp" uri="getting_started/first_2d_game/img/add_script_button.webp"></image>
        <paragraph>In the script settings window, you can leave the default settings alone. Just
            click "Create":</paragraph>
        <note>
            <paragraph>If you're creating a C# script or other languages, select the language
                from the <title_reference>language</title_reference> drop down menu before hitting create.</paragraph>
        </note>
        <image candidates="{'*': 'getting_started/first_2d_game/img/attach_node_window.webp'}" original_uri="img/attach_node_window.webp" uri="getting_started/first_2d_game/img/attach_node_window.webp"></image>
        <note>
            <paragraph>If this is your first time encountering GDScript, please read
                <reference internal="True" refuri="../step_by_step/scripting_languages#doc-scripting"><inline classes="std std-ref">Scripting languages</inline></reference> before continuing.</paragraph>
        </note>
        <paragraph>Start by declaring the member variables this object will need:</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-0-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                <button aria-controls="panel-0-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
            </div>
            <div aria-labelledby="tab-0-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">extends Area2D

@export var speed = 400 # How fast the player will move (pixels/sec).
var screen_size # Size of the game window.</literal_block>
            </div>
            <div aria-labelledby="tab-0-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">using Godot;

public partial class Player : Area2D
{
    [Export]
    public int Speed { get; set; } = 400; // How fast the player will move (pixels/sec).

    public Vector2 ScreenSize; // Size of the game window.
}</literal_block>
            </div>
        </container>
        <paragraph>Using the <literal>export</literal> keyword on the first variable <literal>speed</literal> allows us to set
            its value in the Inspector. This can be handy for values that you want to be
            able to adjust just like a node's built-in properties. Click on the <literal>Player</literal>
            node and you'll see the property now appears in the Inspector in a new section
            with the name of the script. Remember, if you change the value here, it will
            override the value written in the script.</paragraph>
        <warning>
            <paragraph>If you're using C#, you need to (re)build the project assemblies
                whenever you want to see new export variables or signals. This
                build can be manually triggered by clicking the <strong>Build</strong> button at
                the top right of the editor.</paragraph>
            <image candidates="{'*': 'getting_started/first_2d_game/img/build_dotnet.webp'}" original_uri="img/build_dotnet.webp" uri="getting_started/first_2d_game/img/build_dotnet.webp"></image>
        </warning>
        <image candidates="{'*': 'getting_started/first_2d_game/img/export_variable.webp'}" original_uri="img/export_variable.webp" uri="getting_started/first_2d_game/img/export_variable.webp"></image>
        <paragraph>Your <literal>player.gd</literal> script should already contain
            a <literal>_ready()</literal> and a <literal>_process()</literal> function.
            If you didn't select the default template shown above,
            create these functions while following the lesson.</paragraph>
        <paragraph>The <literal>_ready()</literal> function is called when a node enters the scene tree, which is
            a good time to find the size of the game window:</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-1-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                <button aria-controls="panel-1-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-1-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
            </div>
            <div aria-labelledby="tab-1-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-1-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _ready():
    screen_size = get_viewport_rect().size</literal_block>
            </div>
            <div aria-labelledby="tab-1-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-1-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Ready()
{
    ScreenSize = GetViewportRect().Size;
}</literal_block>
            </div>
        </container>
        <paragraph>Now we can use the <literal>_process()</literal> function to define what the player will do.
            <literal>_process()</literal> is called every frame, so we'll use it to update elements of our
            game, which we expect will change often. For the player, we need to do the
            following:</paragraph>
        <bullet_list bullet="-">
            <list_item>
                <paragraph>Check for input.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Move in the given direction.</paragraph>
            </list_item>
            <list_item>
                <paragraph>Play the appropriate animation.</paragraph>
            </list_item>
        </bullet_list>
        <paragraph>First, we need to check for input - is the player pressing a key? For this game,
            we have 4 direction inputs to check. Input actions are defined in the Project
            Settings under "Input Map". Here, you can define custom events and assign
            different keys, mouse events, or other inputs to them. For this game, we will
            map the arrow keys to the four directions.</paragraph>
        <paragraph>Click on <emphasis>Project -&gt; Project Settings</emphasis> to open the project settings window and
            click on the <emphasis>Input Map</emphasis> tab at the top. Type "move_right" in the top bar and
            click the "Add" button to add the <literal>move_right</literal> action.</paragraph>
        <image candidates="{'*': 'getting_started/first_2d_game/img/input-mapping-add-action.webp'}" original_uri="img/input-mapping-add-action.webp" uri="getting_started/first_2d_game/img/input-mapping-add-action.webp"></image>
        <paragraph>We need to assign a key to this action. Click the "+" icon on the right, to
            open the event manager window.</paragraph>
        <image candidates="{'*': 'getting_started/first_2d_game/img/input-mapping-add-key.webp'}" original_uri="img/input-mapping-add-key.webp" uri="getting_started/first_2d_game/img/input-mapping-add-key.webp"></image>
        <paragraph>The "Listening for Input..." field should automatically be selected.
            Press the "right" key on your keyboard, and the menu should look like this now.</paragraph>
        <image candidates="{'*': 'getting_started/first_2d_game/img/input-mapping-event-configuration.webp'}" original_uri="img/input-mapping-event-configuration.webp" uri="getting_started/first_2d_game/img/input-mapping-event-configuration.webp"></image>
        <paragraph>Select the "ok" button. The "right" key is now associated with the <literal>move_right</literal> action.</paragraph>
        <paragraph>Repeat these steps to add three more mappings:</paragraph>
        <enumerated_list enumtype="arabic" prefix="" suffix=".">
            <list_item>
                <paragraph><literal>move_left</literal> mapped to the left arrow key.</paragraph>
            </list_item>
            <list_item>
                <paragraph><literal>move_up</literal> mapped to the up arrow key.</paragraph>
            </list_item>
            <list_item>
                <paragraph>And <literal>move_down</literal> mapped to the down arrow key.</paragraph>
            </list_item>
        </enumerated_list>
        <paragraph>Your input map tab should look like this:</paragraph>
        <image candidates="{'*': 'getting_started/first_2d_game/img/input-mapping-completed.webp'}" original_uri="img/input-mapping-completed.webp" uri="getting_started/first_2d_game/img/input-mapping-completed.webp"></image>
        <paragraph>Click the "Close" button to close the project settings.</paragraph>
        <note>
            <paragraph>We only mapped one key to each input action, but you can map multiple keys,
                joystick buttons, or mouse buttons to the same input action.</paragraph>
        </note>
        <paragraph>You can detect whether a key is pressed using <literal>Input.is_action_pressed()</literal>,
            which returns <literal>true</literal> if it's pressed or <literal>false</literal> if it isn't.</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-2-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                <button aria-controls="panel-2-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-2-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
            </div>
            <div aria-labelledby="tab-2-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-2-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _process(delta):
    var velocity = Vector2.ZERO # The player's movement vector.
    if Input.is_action_pressed("move_right"):
        velocity.x += 1
    if Input.is_action_pressed("move_left"):
        velocity.x -= 1
    if Input.is_action_pressed("move_down"):
        velocity.y += 1
    if Input.is_action_pressed("move_up"):
        velocity.y -= 1

    if velocity.length() &gt; 0:
        velocity = velocity.normalized() * speed
        $AnimatedSprite2D.play()
    else:
        $AnimatedSprite2D.stop()</literal_block>
            </div>
            <div aria-labelledby="tab-2-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-2-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public override void _Process(double delta)
{
    var velocity = Vector2.Zero; // The player's movement vector.

    if (Input.IsActionPressed("move_right"))
    {
        velocity.X += 1;
    }

    if (Input.IsActionPressed("move_left"))
    {
        velocity.X -= 1;
    }

    if (Input.IsActionPressed("move_down"))
    {
        velocity.Y += 1;
    }

    if (Input.IsActionPressed("move_up"))
    {
        velocity.Y -= 1;
    }

    var animatedSprite2D = GetNode&lt;AnimatedSprite2D&gt;("AnimatedSprite2D");

    if (velocity.Length() &gt; 0)
    {
        velocity = velocity.Normalized() * Speed;
        animatedSprite2D.Play();
    }
    else
    {
        animatedSprite2D.Stop();
    }
}</literal_block>
            </div>
        </container>
        <paragraph>We start by setting the <literal>velocity</literal> to <literal>(0, 0)</literal> - by default, the player
            should not be moving. Then we check each input and add/subtract from the
            <literal>velocity</literal> to obtain a total direction. For example, if you hold <literal>right</literal> and
            <literal>down</literal> at the same time, the resulting <literal>velocity</literal> vector will be <literal>(1, 1)</literal>.
            In this case, since we're adding a horizontal and a vertical movement, the
            player would move <emphasis>faster</emphasis> diagonally than if it just moved horizontally.</paragraph>
        <paragraph>We can prevent that if we <emphasis>normalize</emphasis> the velocity, which means we set its
            <emphasis>length</emphasis> to <literal>1</literal>, then multiply by the desired speed. This means no more fast
            diagonal movement.</paragraph>
        <tip>
            <paragraph>If you've never used vector math before, or need a refresher, you can
                see an explanation of vector usage in Godot at <reference internal="True" refuri="../../tutorials/math/vector_math#doc-vector-math"><inline classes="std std-ref">Vector math</inline></reference>.
                It's good to know but won't be necessary for the rest of this tutorial.</paragraph>
        </tip>
        <paragraph>We also check whether the player is moving so we can call <literal>play()</literal> or
            <literal>stop()</literal> on the AnimatedSprite2D.</paragraph>
        <tip>
            <paragraph><literal>$</literal> is shorthand for <literal>get_node()</literal>. So in the code above,
                <literal>$AnimatedSprite2D.play()</literal> is the same as
                <literal>get_node("AnimatedSprite2D").play()</literal>.</paragraph>
            <paragraph>In GDScript, <literal>$</literal> returns the node at the relative path from the
                current node, or returns <literal>null</literal> if the node is not found. Since
                AnimatedSprite2D is a child of the current node, we can use
                <literal>$AnimatedSprite2D</literal>.</paragraph>
        </tip>
        <paragraph>Now that we have a movement direction, we can update the player's position. We
            can also use <literal>clamp()</literal> to prevent it from leaving the screen. <emphasis>Clamping</emphasis> a
            value means restricting it to a given range. Add the following to the bottom of
            the <literal>_process</literal> function (make sure it's not indented under the <title_reference>else</title_reference>):</paragraph>
        <container classes="sphinx-tabs" type="tab-element">
            <div aria-label="Tabbed content" role="tablist">
                <button aria-controls="panel-3-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                <button aria-controls="panel-3-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-3-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
            </div>
            <div aria-labelledby="tab-3-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-3-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">position += velocity * delta
position = position.clamp(Vector2.ZERO, screen_size)</literal_block>
            </div>
            <div aria-labelledby="tab-3-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-3-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">Position += velocity * (float)delta;
Position = new Vector2(
    x: Mathf.Clamp(Position.X, 0, ScreenSize.X),
    y: Mathf.Clamp(Position.Y, 0, ScreenSize.Y)
);</literal_block>
            </div>
        </container>
        <tip>
            <paragraph>The <title_reference>delta</title_reference> parameter in the <title_reference>_process()</title_reference> function refers to the <emphasis>frame
                    length</emphasis> - the amount of time that the previous frame took to complete.
                Using this value ensures that your movement will remain consistent even
                if the frame rate changes.</paragraph>
        </tip>
        <paragraph>Click "Run Current Scene" (<literal classes="kbd">F6</literal>, <literal classes="kbd">Cmd + R</literal> on macOS) and confirm you can move
            the player around the screen in all directions.</paragraph>
        <warning>
            <paragraph>If you get an error in the "Debugger" panel that says</paragraph>
            <paragraph><literal>Attempt to call function 'play' in base 'null instance' on a null
instance</literal></paragraph>
            <paragraph>this likely means you spelled the name of the AnimatedSprite2D node
                wrong. Node names are case-sensitive and <literal>$NodeName</literal> must match
                the name you see in the scene tree.</paragraph>
        </warning>
        <section ids="choosing-animations" names="choosing\ animations">
            <title>Choosing animations</title>
            <paragraph>Now that the player can move, we need to change which animation the
                AnimatedSprite2D is playing based on its direction. We have the "walk" animation,
                which shows the player walking to the right. This animation should be flipped
                horizontally using the <literal>flip_h</literal> property for left movement. We also have the
                "up" animation, which should be flipped vertically with <literal>flip_v</literal> for downward
                movement. Let's place this code at the end of the <literal>_process()</literal> function:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-4-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-4-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-4-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-4-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-4-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">if velocity.x != 0:
    $AnimatedSprite2D.animation = "walk"
    $AnimatedSprite2D.flip_v = false
    # See the note below about the following boolean assignment.
    $AnimatedSprite2D.flip_h = velocity.x &lt; 0
elif velocity.y != 0:
    $AnimatedSprite2D.animation = "up"
    $AnimatedSprite2D.flip_v = velocity.y &gt; 0</literal_block>
                </div>
                <div aria-labelledby="tab-4-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-4-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">if (velocity.X != 0)
{
    animatedSprite2D.Animation = "walk";
    animatedSprite2D.FlipV = false;
    // See the note below about the following boolean assignment.
    animatedSprite2D.FlipH = velocity.X &lt; 0;
}
else if (velocity.Y != 0)
{
    animatedSprite2D.Animation = "up";
    animatedSprite2D.FlipV = velocity.Y &gt; 0;
}</literal_block>
                </div>
            </container>
            <note>
                <paragraph>The boolean assignments in the code above are a common shorthand for
                    programmers. Since we're doing a comparison test (boolean) and also
                    <emphasis>assigning</emphasis> a boolean value, we can do both at the same time. Consider
                    this code versus the one-line boolean assignment above:</paragraph>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-5-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-5-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                        <button aria-controls="panel-5-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-5-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                    </div>
                    <div aria-labelledby="tab-5-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-5-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">if velocity.x &lt; 0:
    $AnimatedSprite2D.flip_h = true
else:
    $AnimatedSprite2D.flip_h = false</literal_block>
                    </div>
                    <div aria-labelledby="tab-5-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-5-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                        <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">if (velocity.X &lt; 0)
{
    animatedSprite2D.FlipH = true;
}
else
{
    animatedSprite2D.FlipH = false;
}</literal_block>
                    </div>
                </container>
            </note>
            <paragraph>Play the scene again and check that the animations are correct in each of the
                directions.</paragraph>
            <tip>
                <paragraph>A common mistake here is to type the names of the animations wrong. The
                    animation names in the SpriteFrames panel must match what you type in
                    the code. If you named the animation <literal>"Walk"</literal>, you must also use a
                    capital "W" in the code.</paragraph>
            </tip>
            <paragraph>When you're sure the movement is working correctly, add this line to
                <literal>_ready()</literal>, so the player will be hidden when the game starts:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-6-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-6-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-6-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-6-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-6-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-6-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">hide()</literal_block>
                </div>
                <div aria-labelledby="tab-6-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-6-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">Hide();</literal_block>
                </div>
            </container>
        </section>
        <section ids="preparing-for-collisions" names="preparing\ for\ collisions">
            <title>Preparing for collisions</title>
            <paragraph>We want <literal>Player</literal> to detect when it's hit by an enemy, but we haven't made any
                enemies yet! That's OK, because we're going to use Godot's <emphasis>signal</emphasis>
                functionality to make it work.</paragraph>
            <paragraph>Add the following at the top of the script. If you're using GDScript, add it after
                <literal>extends Area2D</literal>. If you're using C#, add it after <literal>public partial class Player : Area2D</literal>:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-7-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-7-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-7-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-7-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-7-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-7-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">signal hit</literal_block>
                </div>
                <div aria-labelledby="tab-7-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-7-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// Don't forget to rebuild the project so the editor knows about the new signal.

[Signal]
public delegate void HitEventHandler();</literal_block>
                </div>
            </container>
            <paragraph>This defines a custom signal called "hit" that we will have our player emit
                (send out) when it collides with an enemy. We will use <literal>Area2D</literal> to detect the
                collision. Select the <literal>Player</literal> node and click the "Node" tab next to the
                Inspector tab to see the list of signals the player can emit:</paragraph>
            <image candidates="{'*': 'getting_started/first_2d_game/img/player_signals.webp'}" original_uri="img/player_signals.webp" uri="getting_started/first_2d_game/img/player_signals.webp"></image>
            <paragraph>Notice our custom "hit" signal is there as well! Since our enemies are going to
                be <literal>RigidBody2D</literal> nodes, we want the <literal>body_entered(body: Node2D)</literal> signal. This
                signal will be emitted when a body contacts the player. Click "Connect.." and
                the "Connect a Signal" window appears.</paragraph>
            <paragraph>Godot will create a function with that exact name directly in script
                for you. You don't need to change the default settings right now.</paragraph>
            <warning>
                <comment xml:space="preserve">The issue for this bug is #41283</comment>
                <paragraph>If you're using an external text editor (for example, Visual Studio Code),
                    a bug currently prevents Godot from doing so. You'll be sent to your external
                    editor, but the new function won't be there.</paragraph>
                <paragraph>In this case, you'll need to write the function yourself into the Player's
                    script file.</paragraph>
            </warning>
            <image candidates="{'*': 'getting_started/first_2d_game/img/player_signal_connection.webp'}" original_uri="img/player_signal_connection.webp" uri="getting_started/first_2d_game/img/player_signal_connection.webp"></image>
            <paragraph>Note the green icon indicating that a signal is connected to this function; this does
                not mean the function exists, only that the signal will attempt to connect to a function
                with that name, so double-check that the spelling of the function matches exactly!</paragraph>
            <paragraph>Next, add this code to the function:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-8-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-8-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-8-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-8-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-8-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-8-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func _on_body_entered(_body):
    hide() # Player disappears after being hit.
    hit.emit()
    # Must be deferred as we can't change physics properties on a physics callback.
    $CollisionShape2D.set_deferred("disabled", true)</literal_block>
                </div>
                <div aria-labelledby="tab-8-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-8-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">// We also specified this function name in PascalCase in the editor's connection window.
private void OnBodyEntered(Node2D body)
{
    Hide(); // Player disappears after being hit.
    EmitSignal(SignalName.Hit);
    // Must be deferred as we can't change physics properties on a physics callback.
    GetNode&lt;CollisionShape2D&gt;("CollisionShape2D").SetDeferred(CollisionShape2D.PropertyName.Disabled, true);
}</literal_block>
                </div>
            </container>
            <paragraph>Each time an enemy hits the player, the signal is going to be emitted. We need
                to disable the player's collision so that we don't trigger the <literal>hit</literal> signal
                more than once.</paragraph>
            <note>
                <paragraph>Disabling the area's collision shape can cause an error if it happens
                    in the middle of the engine's collision processing. Using
                    <literal>set_deferred()</literal> tells Godot to wait to disable the shape until it's
                    safe to do so.</paragraph>
            </note>
            <paragraph>The last piece is to add a function we can call to reset the player when
                starting a new game.</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-9-R0RTY3JpcHQ=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-9-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tab" tabindex="0">GDScript</button>
                    <button aria-controls="panel-9-QyM=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-9-QyM=" name="QyM=" role="tab" tabindex="-1">C#</button>
                </div>
                <div aria-labelledby="tab-9-R0RTY3JpcHQ=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-9-R0RTY3JpcHQ=" name="R0RTY3JpcHQ=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="gdscript" linenos="False" xml:space="preserve">func start(pos):
    position = pos
    show()
    $CollisionShape2D.disabled = false</literal_block>
                </div>
                <div aria-labelledby="tab-9-QyM=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-9-QyM=" name="QyM=" role="tabpanel" tabindex="0">
                    <literal_block force="False" highlight_args="{}" language="csharp" linenos="False" xml:space="preserve">public void Start(Vector2 position)
{
    Position = position;
    Show();
    GetNode&lt;CollisionShape2D&gt;("CollisionShape2D").Disabled = false;
}</literal_block>
                </div>
            </container>
            <paragraph>With the player working, we'll work on the enemy in the next lesson.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
