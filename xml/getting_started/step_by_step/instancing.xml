<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/getting_started/step_by_step/instancing.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-instancing"></target>
    <section ids="creating-instances doc-instancing" names="creating\ instances doc_instancing">
        <title>Creating instances</title>
        <note>
            <paragraph>This tutorial refers to instancing scenes in the editor. To learn how
                to instance scenes from code, see <reference internal="True" refuri="../../tutorials/scripting/nodes_and_scene_instances#doc-nodes-and-scene-instances"><inline classes="std std-ref">Nodes and scene instances</inline></reference>.</paragraph>
            <paragraph>Godot's approach to <emphasis>instancing</emphasis> described below should not be confused with
                hardware instancing that can be used to render large amounts of similar
                objects quickly. See <reference internal="True" refuri="../../tutorials/performance/using_multimesh#doc-using-multimesh"><inline classes="std std-ref">Optimization using MultiMeshes</inline></reference> instead.</paragraph>
        </note>
        <paragraph>In the previous part, we saw that a scene is a collection of nodes organized in
            a tree structure, with a single node as its root. You can split your project
            into any number of scenes. This feature helps you break down and organize your
            game's different components.</paragraph>
        <paragraph>You can create as many scenes as you'd like and save them as files with the
            <literal>.tscn</literal> extension, which stands for "text scene". The <literal>label.tscn</literal> file from
            the previous lesson was an example. We call those files "Packed Scenes" as they
            pack information about your scene's content.</paragraph>
        <paragraph>Here's an example of a ball. It's composed of a <reference internal="True" refuri="../../classes/class_rigidbody2d#class-rigidbody2d"><inline classes="std std-ref">RigidBody2D</inline></reference> node as its root named Ball, which allows the ball to fall
            and bounce on walls, a <reference internal="True" refuri="../../classes/class_sprite2d#class-sprite2d"><inline classes="std std-ref">Sprite2D</inline></reference> node, and a
            <reference internal="True" refuri="../../classes/class_collisionshape2d#class-collisionshape2d"><inline classes="std std-ref">CollisionShape2D</inline></reference>.</paragraph>
        <image candidates="{'*': 'getting_started/step_by_step/img/instancing_ball_scene.webp'}" original_uri="img/instancing_ball_scene.webp" uri="getting_started/step_by_step/img/instancing_ball_scene.webp"></image>
        <paragraph>Once you have saved a scene, it works as a blueprint: you can reproduce it in other
            scenes as many times as you'd like. Replicating an object from a template like
            this is called <strong>instancing</strong>.</paragraph>
        <image candidates="{'*': 'getting_started/step_by_step/img/instancing_ball_instances_example.webp'}" original_uri="img/instancing_ball_instances_example.webp" uri="getting_started/step_by_step/img/instancing_ball_instances_example.webp"></image>
        <paragraph>As we mentioned in the previous part, instanced scenes behave like a node: the
            editor hides their content by default. When you instance the Ball, you only see
            the Ball node. Notice also how each duplicate has a unique name.</paragraph>
        <paragraph>Every instance of the Ball scene starts with the same structure and properties
            as <literal>ball.tscn</literal>. However, you can modify each independently, such as changing
            how they bounce, how heavy they are, or any property exposed by the source
            scene.</paragraph>
        <section ids="in-practice" names="in\ practice">
            <title>In practice</title>
            <paragraph>Let's use instancing in practice to see how it works in Godot. We invite
                you to download the ball's sample project we prepared for you:
                <reference name="instancing_starter.zip" refuri="https://github.com/godotengine/godot-docs-project-starters/releases/download/latest-4.x/instancing_starter.zip">instancing_starter.zip</reference><target ids="instancing-starter-zip" names="instancing_starter.zip" refuri="https://github.com/godotengine/godot-docs-project-starters/releases/download/latest-4.x/instancing_starter.zip"></target>.</paragraph>
            <paragraph>Extract the archive on your computer. To import it, you need the Project Manager.
                The Project Manager is accessed by opening Godot, or if you already have Godot
                opened, click on <inline classes="role-menu role-ui">Project &gt; Quit to Project List</inline> (<literal classes="kbd">Ctrl + Shift + Q</literal>, <literal classes="kbd">Ctrl + Option + Cmd + Q</literal> on macOS)</paragraph>
            <paragraph>In the Project Manager, click the <inline classes="role-button role-ui">Import</inline> button to import the project.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_import_button.webp'}" original_uri="img/instancing_import_button.webp" uri="getting_started/step_by_step/img/instancing_import_button.webp"></image>
            <paragraph>In the pop-up that appears navigate to the folder you extracted.
                Double-click the <literal>project.godot</literal> file to open it.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_import_project_file.webp'}" original_uri="img/instancing_import_project_file.webp" uri="getting_started/step_by_step/img/instancing_import_project_file.webp"></image>
            <paragraph>Finally, click the <inline classes="role-button role-ui">Import</inline> button.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_import_and_edit_button.webp'}" original_uri="img/instancing_import_and_edit_button.webp" uri="getting_started/step_by_step/img/instancing_import_and_edit_button.webp"></image>
            <paragraph>A window notifying you that the project was last opened in an older Godot version
                may appear, that's not an issue. Click <inline classes="role-button role-ui">Ok</inline> to open the project.</paragraph>
            <paragraph>The project contains two packed scenes: <literal>main.tscn</literal>, containing walls against
                which the ball collides, and <literal>ball.tscn</literal>. The Main scene should open
                automatically. If you're seeing an empty 3D scene instead of the main scene, click the 2D button at the top of the screen.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_2d_scene_select.webp'}" original_uri="img/instancing_2d_scene_select.webp" uri="getting_started/step_by_step/img/instancing_2d_scene_select.webp"></image>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_main_scene.webp'}" original_uri="img/instancing_main_scene.webp" uri="getting_started/step_by_step/img/instancing_main_scene.webp"></image>
            <paragraph>Let's add a ball as a child of the Main node. In the Scene dock, select the Main
                node. Then, click the link icon at the top of the scene dock. This button allows
                you to add an instance of a scene as a child of the currently selected node.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_scene_link_button.webp'}" original_uri="img/instancing_scene_link_button.webp" uri="getting_started/step_by_step/img/instancing_scene_link_button.webp"></image>
            <paragraph>Double-click the ball scene to instance it.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_instance_child_window.webp'}" original_uri="img/instancing_instance_child_window.webp" uri="getting_started/step_by_step/img/instancing_instance_child_window.webp"></image>
            <paragraph>The ball appears in the top-left corner of the viewport.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_ball_instanced.webp'}" original_uri="img/instancing_ball_instanced.webp" uri="getting_started/step_by_step/img/instancing_ball_instanced.webp"></image>
            <paragraph>Click on it and drag it towards the center of the view.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_ball_moved.webp'}" original_uri="img/instancing_ball_moved.webp" uri="getting_started/step_by_step/img/instancing_ball_moved.webp"></image>
            <paragraph>Play the game by pressing <literal classes="kbd">F5</literal> (<literal classes="kbd">Cmd + B</literal> on macOS). You should see it fall.</paragraph>
            <paragraph>Now, we want to create more instances of the Ball node. With the ball still
                selected, press <literal classes="kbd">Ctrl + D</literal> (<literal classes="kbd">Cmd + D</literal> on macOS) to call the duplicate
                command. Click and drag to move the new ball to a different location.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_ball_duplicated.webp'}" original_uri="img/instancing_ball_duplicated.webp" uri="getting_started/step_by_step/img/instancing_ball_duplicated.webp"></image>
            <paragraph>You can repeat this process until you have several in the scene.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_main_scene_with_balls.webp'}" original_uri="img/instancing_main_scene_with_balls.webp" uri="getting_started/step_by_step/img/instancing_main_scene_with_balls.webp"></image>
            <paragraph>Play the game again. You should now see every ball fall independently from one
                another. This is what instances do. Each is an independent reproduction of a
                template scene.</paragraph>
        </section>
        <section ids="editing-scenes-and-instances" names="editing\ scenes\ and\ instances">
            <title>Editing scenes and instances</title>
            <paragraph>There is more to instances. With this feature, you can:</paragraph>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Change the properties of one ball without affecting the others using the
                        <inline classes="role-ui">Inspector</inline>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Change the default properties of every Ball by opening the <literal>ball.tscn</literal> scene
                        and making a change to the Ball node there. Upon saving, all instances of the
                        Ball in the project will see their values update.</paragraph>
                </list_item>
            </enumerated_list>
            <note>
                <paragraph>Changing a property on an instance always overrides values from the
                    corresponding packed scene.</paragraph>
            </note>
            <paragraph>Let's try this. Double-click <literal>ball.tscn</literal> in the FileSystem to open it.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_ball_scene_open.webp'}" original_uri="img/instancing_ball_scene_open.webp" uri="getting_started/step_by_step/img/instancing_ball_scene_open.webp"></image>
            <paragraph>In the Scene dock on the left, select the Ball node. Then, in the <inline classes="role-ui">Inspector</inline> on the
                right, click on the <inline classes="role-ui">PhysicsMaterial</inline> property to expand it.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_physics_material_expand.webp'}" original_uri="img/instancing_physics_material_expand.webp" uri="getting_started/step_by_step/img/instancing_physics_material_expand.webp"></image>
            <paragraph>Set its Bounce property to <literal>0.5</literal> by clicking on the number field, typing <literal>0.5</literal>,
                and pressing <literal classes="kbd">Enter</literal>.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_property_bounce_updated.webp'}" original_uri="img/instancing_property_bounce_updated.webp" uri="getting_started/step_by_step/img/instancing_property_bounce_updated.webp"></image>
            <paragraph>Play the game by pressing <literal classes="kbd">F5</literal> (<literal classes="kbd">Cmd + B</literal> on macOS) and notice how all balls now bounce a lot
                more. As the Ball scene is a template for all instances, modifying it and saving
                causes all instances to update accordingly.</paragraph>
            <paragraph>Let's now adjust an individual instance. Head back to the Main scene by clicking
                on the corresponding tab above the viewport.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_scene_tabs.webp'}" original_uri="img/instancing_scene_tabs.webp" uri="getting_started/step_by_step/img/instancing_scene_tabs.webp"></image>
            <paragraph>Select one of the instanced Ball nodes and, in the <inline classes="role-ui">Inspector</inline>, set its
                <inline classes="role-ui">Gravity Scale</inline> value to <literal>10</literal>.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_property_gravity_scale.png'}" original_uri="img/instancing_property_gravity_scale.png" uri="getting_started/step_by_step/img/instancing_property_gravity_scale.png"></image>
            <paragraph>A grey "revert" button appears next to the adjusted property.</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_property_revert_icon.png'}" original_uri="img/instancing_property_revert_icon.png" uri="getting_started/step_by_step/img/instancing_property_revert_icon.png"></image>
            <paragraph>This icon indicates you are overriding a value from the source packed scene.
                Even if you modify the property in the original scene, the value override will
                be preserved in the instance. Clicking the revert icon will restore the
                property to the value in the saved scene.</paragraph>
            <paragraph>Rerun the game and notice how this ball now falls much faster than the others.</paragraph>
            <note>
                <paragraph>You may notice you are unable to change the values of the <inline classes="role-ui">PhysicsMaterial</inline>
                    of the ball. This is because <inline classes="role-ui">PhysicsMaterial</inline> is a <emphasis>resource</emphasis>, and needs
                    to be made unique before you can edit it in a scene that is linking to its
                    original scene. To make a resource unique for one instance, right-click on
                    the <inline classes="role-ui">Physics Material</inline> property in the <inline classes="role-ui">Inspector</inline> and click <inline classes="role-button role-ui">Make Unique</inline>
                    in the context menu.</paragraph>
                <paragraph>Resources are another essential building block of Godot games we will cover
                    in a later lesson.</paragraph>
            </note>
        </section>
        <section ids="scene-instances-as-a-design-language" names="scene\ instances\ as\ a\ design\ language">
            <title>Scene instances as a design language</title>
            <paragraph>Instances and scenes in Godot offer an excellent design language, setting the
                engine apart from others out there. We designed Godot around this concept from
                the ground up.</paragraph>
            <paragraph>We recommend dismissing architectural code patterns when making games with
                Godot, such as Model-View-Controller (MVC) or Entity-Relationship diagrams.
                Instead, you can start by imagining the elements players will see in your game
                and structure your code around them.</paragraph>
            <paragraph>For example, you could break down a shooter game like so:</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_diagram_shooter.png'}" original_uri="img/instancing_diagram_shooter.png" uri="getting_started/step_by_step/img/instancing_diagram_shooter.png"></image>
            <paragraph>You can come up with a diagram like this for almost any type of game. Each
                rectangle represents an entity that's visible in the game from the player's
                perspective. The arrows point towards the instantiator of each scene.</paragraph>
            <paragraph>Once you have a diagram, we recommend creating a scene for each element listed
                in it to develop your game. You'll use instancing, either by code or directly in
                the editor, to build your tree of scenes.</paragraph>
            <paragraph>Programmers tend to spend a lot of time designing abstract architectures and
                trying to fit components into it. Designing based on scenes makes development
                faster and more straightforward, allowing you to focus on the game logic itself.
                Because most game components map directly to a scene, using a design based on
                scene instantiation means you need little other architectural code.</paragraph>
            <paragraph>Here's the example of a scene diagram for an open-world game with tons of assets
                and nested elements:</paragraph>
            <image candidates="{'*': 'getting_started/step_by_step/img/instancing_diagram_open_world.png'}" original_uri="img/instancing_diagram_open_world.png" uri="getting_started/step_by_step/img/instancing_diagram_open_world.png"></image>
            <paragraph>Imagine we started by creating the room. We could make a couple of different
                room scenes, with unique arrangements of furniture in them. Later, we could make
                a house scene that uses multiple room instances for the interior. We would
                create a citadel out of many instanced houses and a large terrain on which we
                would place the citadel. Each of these would be a scene instancing one or more sub-scenes.</paragraph>
            <paragraph>Later, we could create scenes representing guards and add them to the citadel.
                They would be indirectly added to the overall game world.</paragraph>
            <paragraph>With Godot, it's easy to iterate on your game like this, as all you need to do
                is create and instantiate more scenes. We designed the editor to be accessible
                to programmers, designers, and artists alike. A typical team development process
                can involve 2D or 3D artists, level designers, game designers, and animators,
                all working with the Godot editor.</paragraph>
        </section>
        <section ids="summary" names="summary">
            <title>Summary</title>
            <paragraph>Instancing, the process of producing an object from a blueprint, has many handy
                uses. With scenes, it gives you:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>The ability to divide your game into reusable components.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>A tool to structure and encapsulate complex systems.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>A language to think about your game project's structure in a natural way.</paragraph>
                </list_item>
            </bullet_list>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
