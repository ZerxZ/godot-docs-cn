<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/engine_details/development/compiling/compiling_with_script_encryption_key.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-compiling-with-script-encryption-key"></target>
    <section ids="compiling-with-pck-encryption-key doc-compiling-with-script-encryption-key" names="compiling\ with\ pck\ encryption\ key doc_compiling_with_script_encryption_key">
        <title>Compiling with PCK encryption key</title>
        <paragraph>The export dialog gives you the option to encrypt your PCK file with a 256-bit
            AES key when releasing your project. This will make sure your scenes, scripts
            and other resources are not stored in plain text and can not easily be ripped
            by some script kiddie.</paragraph>
        <paragraph>Of course, the key needs to be stored in the binary, but if it's compiled,
            optimized and without symbols, it would take some effort to find it.</paragraph>
        <paragraph>For this to work, you need to build the export templates from source,
            with that same key.</paragraph>
        <warning>
            <paragraph>This will <strong>not</strong> work if you use official, precompiled export templates.
                It is absolutely <strong>required</strong> to compile your own export templates to use
                PCK encryption.</paragraph>
        </warning>
        <section ids="step-by-step" names="step\ by\ step">
            <title>Step by step</title>
            <enumerated_list enumtype="arabic" prefix="" suffix=".">
                <list_item>
                    <paragraph>Generate a 256-bit AES key in hexadecimal format. You can use the aes-256-cbc variant from
                        <reference name="this service" refuri="https://asecuritysite.com/encryption/keygen">this service</reference><target ids="this-service" names="this\ service" refuri="https://asecuritysite.com/encryption/keygen"></target>.</paragraph>
                    <paragraph>Alternatively, you can generate it yourself using
                        <reference name="OpenSSL" refuri="https://www.openssl.org/">OpenSSL</reference> command-line tools:</paragraph>
                    <literal_block force="False" language="shell" linenos="False" xml:space="preserve">openssl rand -hex 32 &gt; godot.gdkey</literal_block>
                    <paragraph>The output in <literal>godot.gdkey</literal> should be similar to:</paragraph>
                    <literal_block force="False" language="shell" linenos="False" xml:space="preserve"># NOTE: Do not use the key below! Generate your own key instead.
aeb1bc56aaf580cc31784e9c41551e9ed976ecba10d315db591e749f3f64890f</literal_block>
                    <paragraph>You can generate the key without redirecting the output to a file, but
                        that way you can minimize the risk of exposing the key.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Set this key as environment variable in the console that you will use to
                        compile Godot, like this:</paragraph>
                    <container classes="sphinx-tabs" type="tab-element">
                        <div aria-label="Tabbed content" role="tablist">
                            <button aria-controls="panel-0-TGludXgvbWFjT1M=" aria-selected="true" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-TGludXgvbWFjT1M=" name="TGludXgvbWFjT1M=" role="tab" tabindex="0">Linux/macOS</button>
                            <button aria-controls="panel-0-V2luZG93cyAoY21kKQ==" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-V2luZG93cyAoY21kKQ==" name="V2luZG93cyAoY21kKQ==" role="tab" tabindex="-1">Windows (cmd)</button>
                            <button aria-controls="panel-0-V2luZG93cyAoUG93ZXJTaGVsbCk=" aria-selected="false" classes="sphinx-tabs-tab code-tab group-tab" ids="tab-0-V2luZG93cyAoUG93ZXJTaGVsbCk=" name="V2luZG93cyAoUG93ZXJTaGVsbCk=" role="tab" tabindex="-1">Windows (PowerShell)</button>
                        </div>
                        <div aria-labelledby="tab-0-TGludXgvbWFjT1M=" classes="sphinx-tabs-panel code-tab group-tab" ids="panel-0-TGludXgvbWFjT1M=" name="TGludXgvbWFjT1M=" role="tabpanel" tabindex="0">
                            <literal_block force="False" highlight_args="{}" language="bash" linenos="False" xml:space="preserve">export SCRIPT_AES256_ENCRYPTION_KEY="your_generated_key"</literal_block>
                        </div>
                        <div aria-labelledby="tab-0-V2luZG93cyAoY21kKQ==" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-V2luZG93cyAoY21kKQ==" name="V2luZG93cyAoY21kKQ==" role="tabpanel" tabindex="0">
                            <literal_block force="False" highlight_args="{}" language="bat" linenos="False" xml:space="preserve">set SCRIPT_AES256_ENCRYPTION_KEY=your_generated_key</literal_block>
                        </div>
                        <div aria-labelledby="tab-0-V2luZG93cyAoUG93ZXJTaGVsbCk=" classes="sphinx-tabs-panel code-tab group-tab" hidden="true" ids="panel-0-V2luZG93cyAoUG93ZXJTaGVsbCk=" name="V2luZG93cyAoUG93ZXJTaGVsbCk=" role="tabpanel" tabindex="0">
                            <literal_block force="False" highlight_args="{}" language="bat" linenos="False" xml:space="preserve">$env:SCRIPT_AES256_ENCRYPTION_KEY="your_generated_key"</literal_block>
                        </div>
                    </container>
                </list_item>
                <list_item>
                    <paragraph>Compile Godot export templates and set them as custom export templates
                        in the export preset options.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Set the encryption key in the <strong>Encryption</strong> tab of the export preset:</paragraph>
                    <image candidates="{'*': 'engine_details/development/compiling/img/encryption_key.png'}" original_uri="img/encryption_key.png" uri="engine_details/development/compiling/img/encryption_key.png"></image>
                </list_item>
                <list_item>
                    <paragraph>Add filters for the files/folders to encrypt. <strong>By default</strong>, include filters
                        are empty and <strong>nothing will be encrypted</strong>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Export the project. The project should run with the files encrypted now.</paragraph>
                </list_item>
            </enumerated_list>
        </section>
        <section ids="troubleshooting" names="troubleshooting">
            <title>Troubleshooting</title>
            <paragraph>If you get an error like below, it means the key wasn't properly included in
                your Godot build. Godot is encrypting PCK file during export, but can't read
                it at runtime.</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">ERROR: open_and_parse: Condition "String::md5(md5.digest) != String::md5(md5d)" is true. Returning: ERR_FILE_CORRUPT
   At: core/io/file_access_encrypted.cpp:103</literal_block>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
