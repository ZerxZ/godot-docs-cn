<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/engine_details/development/compiling/compiling_for_linuxbsd.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-compiling-for-linuxbsd"></target>
    <section ids="compiling-for-linux-bsd doc-compiling-for-linuxbsd" names="compiling\ for\ linux,\ *bsd doc_compiling_for_linuxbsd">
        <title>Compiling for Linux, *BSD</title>
        <seealso>
            <paragraph>This page describes how to compile Linux editor and export template binaries from source.
                If you're looking to export your project to Linux instead, read <reference internal="True" refuri="../../../tutorials/export/exporting_for_linux#doc-exporting-for-linux"><inline classes="std std-ref">Exporting for Linux</inline></reference>.</paragraph>
        </seealso>
        <section ids="requirements" names="requirements">
            <title>Requirements</title>
            <paragraph>For compiling under Linux or other Unix variants, the following is
                required:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>GCC 9+ or Clang 6+.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="Python 3.8+" refuri="https://www.python.org/downloads/">Python 3.8+</reference><target ids="python-3-8" names="python\ 3.8+" refuri="https://www.python.org/downloads/"></target>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="SCons 4.0+" refuri="https://scons.org/pages/download.html">SCons 4.0+</reference><target ids="scons-4-0" names="scons\ 4.0+" refuri="https://scons.org/pages/download.html"></target> build system.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>pkg-config (used to detect the development libraries listed below).</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Development libraries:</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>X11, Xcursor, Xinerama, Xi and XRandR.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Wayland and wayland-scanner.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Mesa.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>ALSA.</paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>PulseAudio.</paragraph>
                        </list_item>
                    </bullet_list>
                </list_item>
                <list_item>
                    <paragraph><emphasis>Optional</emphasis> - libudev (build with <literal>udev=yes</literal>).</paragraph>
                </list_item>
            </bullet_list>
            <seealso>
                <paragraph>To get the Godot source code for compiling, see <reference internal="True" refuri="getting_source#doc-getting-source"><inline classes="std std-ref">Getting the source</inline></reference>.</paragraph>
                <paragraph>For a general overview of SCons usage for Godot, see <reference internal="True" refuri="introduction_to_the_buildsystem#doc-introduction-to-the-buildsystem"><inline classes="std std-ref">Introduction to the buildsystem</inline></reference>.</paragraph>
            </seealso>
            <target refid="doc-compiling-for-linuxbsd-oneliners"></target>
            <section ids="distro-specific-one-liners doc-compiling-for-linuxbsd-oneliners" names="distro-specific\ one-liners doc_compiling_for_linuxbsd_oneliners">
                <title>Distro-specific one-liners</title>
                <container classes="sphinx-tabs" type="tab-element">
                    <div aria-label="Tabbed content" role="tablist">
                        <button aria-controls="panel-0-0-0" aria-selected="true" classes="sphinx-tabs-tab" ids="tab-0-0-0" name="0-0" role="tab" tabindex="0">Alpine Linux</button>
                        <button aria-controls="panel-0-0-1" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Arch Linux</button>
                        <button aria-controls="panel-0-0-2" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Debian/Ubuntu</button>
                        <button aria-controls="panel-0-0-3" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-3" name="0-3" role="tab" tabindex="-1">Fedora</button>
                        <button aria-controls="panel-0-0-4" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-4" name="0-4" role="tab" tabindex="-1">FreeBSD</button>
                        <button aria-controls="panel-0-0-5" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-5" name="0-5" role="tab" tabindex="-1">Gentoo</button>
                        <button aria-controls="panel-0-0-6" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-6" name="0-6" role="tab" tabindex="-1">Mageia</button>
                        <button aria-controls="panel-0-0-7" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-7" name="0-7" role="tab" tabindex="-1">NetBSD</button>
                        <button aria-controls="panel-0-0-8" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-8" name="0-8" role="tab" tabindex="-1">OpenBSD</button>
                        <button aria-controls="panel-0-0-9" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-9" name="0-9" role="tab" tabindex="-1">openKylin</button>
                        <button aria-controls="panel-0-0-10" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-10" name="0-10" role="tab" tabindex="-1">openSUSE</button>
                        <button aria-controls="panel-0-0-11" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-0-0-11" name="0-11" role="tab" tabindex="-1">Solus</button>
                    </div>
                    <div aria-labelledby="tab-0-0-0" classes="sphinx-tabs-panel" ids="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">apk add \
  scons \
  pkgconf \
  gcc \
  g++ \
  libx11-dev \
  libxcursor-dev \
  libxinerama-dev \
  libxi-dev \
  libxrandr-dev \
  mesa-dev \
  eudev-dev \
  alsa-lib-dev \
  pulseaudio-dev</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-1" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">pacman -Sy --noconfirm --needed \
  scons \
  pkgconf \
  gcc \
  libxcursor \
  libxinerama \
  libxi \
  libxrandr \
  wayland-utils \
  mesa \
  glu \
  libglvnd \
  alsa-lib \
  pulseaudio</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-2" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo apt-get update
sudo apt-get install -y \
  build-essential \
  scons \
  pkg-config \
  libx11-dev \
  libxcursor-dev \
  libxinerama-dev \
  libgl1-mesa-dev \
  libglu1-mesa-dev \
  libasound2-dev \
  libpulse-dev \
  libudev-dev \
  libxi-dev \
  libxrandr-dev \
  libwayland-dev</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-3" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo dnf install -y \
  scons \
  pkgconfig \
  gcc-c++ \
  libstdc++-static \
  wayland-devel</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-4" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-4" name="0-4" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">pkg install \
  py37-scons \
  pkgconf \
  xorg-libraries \
  libXcursor \
  libXrandr \
  libXi \
  xorgproto \
  libGLU \
  alsa-lib \
  pulseaudio</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-5" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-5" name="0-5" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">emerge --sync
emerge -an \
  dev-build/scons \
  x11-libs/libX11 \
  x11-libs/libXcursor \
  x11-libs/libXinerama \
  x11-libs/libXi \
  dev-util/wayland-scanner \
  media-libs/mesa \
  media-libs/glu \
  media-libs/alsa-lib \
  media-sound/pulseaudio</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-6" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-6" name="0-6" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo urpmi --auto \
  scons \
  task-c++-devel \
  wayland-devel \
  "pkgconfig(alsa)" \
  "pkgconfig(glu)" \
  "pkgconfig(libpulse)" \
  "pkgconfig(udev)" \
  "pkgconfig(x11)" \
  "pkgconfig(xcursor)" \
  "pkgconfig(xinerama)" \
  "pkgconfig(xi)" \
  "pkgconfig(xrandr)"</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-7" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-7" name="0-7" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">pkg_add \
  pkg-config \
  py37-scons</literal_block>
                        <hint>
                            <paragraph>For audio support, you can optionally install <literal>pulseaudio</literal>.</paragraph>
                        </hint>
                    </div>
                    <div aria-labelledby="tab-0-0-8" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-8" name="0-8" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">pkg_add \
  python \
  scons \
  llvm</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-9" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-9" name="0-9" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo apt update
sudo apt install -y \
  python3-pip \
  build-essential \
  pkg-config \
  libx11-dev \
  libxcursor-dev \
  libxinerama-dev \
  libgl1-mesa-dev \
  libglu1-mesa-dev \
  libasound2-dev \
  libpulse-dev \
  libudev-dev \
  libxi-dev \
  libxrandr-dev \
  libwayland-dev
sudo pip install scons</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-10" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-10" name="0-10" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo zypper install -y \
  scons \
  pkgconfig \
  libX11-devel \
  libXcursor-devel \
  libXrandr-devel \
  libXinerama-devel \
  libXi-devel \
  wayland-devel \
  Mesa-libGL-devel \
  alsa-devel \
  libpulse-devel \
  libudev-devel \
  gcc-c++ \
  libGLU1</literal_block>
                    </div>
                    <div aria-labelledby="tab-0-0-11" classes="sphinx-tabs-panel" hidden="true" ids="panel-0-0-11" name="0-11" role="tabpanel" tabindex="0">
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">eopkg install -y \
  -c system.devel \
  scons \
  libxcursor-devel \
  libxinerama-devel \
  libxi-devel \
  libxrandr-devel \
  wayland-devel \
  mesalib-devel \
  libglu \
  alsa-lib-devel \
  pulseaudio-devel</literal_block>
                    </div>
                </container>
            </section>
        </section>
        <section ids="compiling" names="compiling">
            <title>Compiling</title>
            <paragraph>Start a terminal, go to the root dir of the engine source code and type:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd</literal_block>
            <note>
                <paragraph>Prior to Godot 4.0, the Linux/*BSD target was called <literal>x11</literal> instead of
                    <literal>linuxbsd</literal>. If you are looking to compile Godot 3.x, make sure to use the
                    <reference name="3.x branch of this documentation" refuri="https://docs.godotengine.org/en/3.6/development/compiling/compiling_for_x11.html">3.x branch of this documentation</reference>.</paragraph>
            </note>
            <tip>
                <paragraph>If you are compiling Godot to make changes or contribute to the engine,
                    you may want to use the SCons options <literal>dev_build=yes</literal> or <literal>dev_mode=yes</literal>.
                    See <reference internal="True" refuri="introduction_to_the_buildsystem#doc-introduction-to-the-buildsystem-development-and-production-aliases"><inline classes="std std-ref">Development and production aliases</inline></reference>
                    for more info.</paragraph>
            </tip>
            <paragraph>If all goes well, the resulting binary executable will be placed in the
                "bin" subdirectory. This executable file contains the whole engine and
                runs without any dependencies. Executing it will bring up the Project
                Manager.</paragraph>
            <note>
                <paragraph>If you wish to compile using Clang rather than GCC, use this command:</paragraph>
                <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd use_llvm=yes</literal_block>
                <paragraph>Using Clang appears to be a requirement for OpenBSD, otherwise fonts
                    would not build.
                    For RISC-V architecture devices, use the Clang compiler instead of the GCC compiler.</paragraph>
            </note>
            <tip>
                <paragraph>If you are compiling Godot for production use, you can
                    make the final executable smaller and faster by adding the
                    SCons option <literal>production=yes</literal>. This enables additional compiler
                    optimizations and link-time optimization.</paragraph>
                <paragraph>LTO takes some time to run and requires about 7 GB of available RAM
                    while compiling. If you're running out of memory with the above option,
                    use <literal>production=yes lto=none</literal> or <literal>production=yes lto=thin</literal> for a
                    lightweight but less effective form of LTO.</paragraph>
            </tip>
            <note>
                <paragraph>If you want to use separate editor settings for your own Godot builds
                    and official releases, you can enable
                    <reference internal="True" refuri="../../../tutorials/io/data_paths#doc-data-paths-self-contained-mode"><inline classes="std std-ref">Self-contained mode</inline></reference> by creating a file called
                    <literal>._sc_</literal> or <literal>_sc_</literal> in the <literal>bin/</literal> folder.</paragraph>
            </note>
        </section>
        <section ids="compiling-with-accesskit-support" names="compiling\ with\ accesskit\ support">
            <title>Compiling with AccessKit support</title>
            <paragraph>AccessKit provides support for screen readers.</paragraph>
            <paragraph>By default, Godot is built with AccessKit dynamically linked. You can use it by placing
                <literal>accesskit.so</literal> alongside the executable.</paragraph>
            <note>
                <paragraph>You can use dynamically linked AccessKit with export templates as well, rename
                    the SO to <literal>accesskit.{architecture}.so</literal>
                    and place them alongside the export template executables, and the libraries will
                    be automatically copied during the export process.</paragraph>
            </note>
            <paragraph>To compile Godot with statically linked AccessKit:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Download the pre-built static libraries from <reference name="godot-accesskit-c-static library" refuri="https://github.com/godotengine/godot-accesskit-c-static/releases">godot-accesskit-c-static library</reference><target ids="godot-accesskit-c-static-library" names="godot-accesskit-c-static\ library" refuri="https://github.com/godotengine/godot-accesskit-c-static/releases"></target>, and unzip them.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>When building Godot, add <literal>accesskit_sdk_path={path}</literal> to tell SCons where to look for the AccessKit libraries:</paragraph>
                    <block_quote>
                        <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd accesskit_sdk_path=&lt;...&gt;</literal_block>
                    </block_quote>
                </list_item>
            </bullet_list>
            <note>
                <paragraph>You can optionally build the godot-angle-static libraries yourself with
                    the following steps:</paragraph>
                <enumerated_list enumtype="arabic" prefix="" suffix=".">
                    <list_item>
                        <paragraph>Clone the <reference name="godot-accesskit-c-static" refuri="https://github.com/godotengine/godot-accesskit-c-static/">godot-accesskit-c-static</reference><target ids="godot-accesskit-c-static" names="godot-accesskit-c-static" refuri="https://github.com/godotengine/godot-accesskit-c-static/"></target>
                            directory and navigate to it.</paragraph>
                    </list_item>
                    <list_item>
                        <paragraph>Run the following command:</paragraph>
                    </list_item>
                </enumerated_list>
                <literal_block force="False" language="shell" linenos="False" xml:space="preserve">cd accesskit-c
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build
cmake --install build</literal_block>
                <paragraph>The AccessKit static library should be built using the same compiler you are
                    using for building Godot.</paragraph>
            </note>
        </section>
        <section ids="running-a-headless-server-build" names="running\ a\ headless/server\ build">
            <title>Running a headless/server build</title>
            <paragraph>To run in <emphasis>headless</emphasis> mode which provides editor functionality to export
                projects in an automated manner, use the normal build:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd target=editor</literal_block>
            <paragraph>And then use the <literal>--headless</literal> command line argument:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">./bin/godot.linuxbsd.editor.x86_64 --headless</literal_block>
            <paragraph>To compile a debug <emphasis>server</emphasis> build which can be used with
                <reference internal="True" refuri="../../../tutorials/editor/command_line_tutorial#doc-command-line-tutorial"><inline classes="std std-ref">remote debugging tools</inline></reference>, use:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd target=template_debug</literal_block>
            <paragraph>To compile a <emphasis>server</emphasis> build which is optimized to run dedicated game servers, use:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd target=template_release production=yes</literal_block>
        </section>
        <section ids="building-export-templates" names="building\ export\ templates">
            <title>Building export templates</title>
            <warning>
                <paragraph>Linux binaries usually won't run on distributions that are
                    older than the distribution they were built on. If you wish to
                    distribute binaries that work on most distributions,
                    you should build them on an old distribution such as Ubuntu 20.04.
                    You can use a virtual machine or a container to set up a suitable
                    build environment.</paragraph>
            </warning>
            <paragraph>To build Linux or *BSD export templates, run the build system with the
                following parameters:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>(32 bits)</paragraph>
                </list_item>
            </bullet_list>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd target=template_release arch=x86_32
scons platform=linuxbsd target=template_debug arch=x86_32</literal_block>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>(64 bits)</paragraph>
                </list_item>
            </bullet_list>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd target=template_release arch=x86_64
scons platform=linuxbsd target=template_debug arch=x86_64</literal_block>
            <paragraph>Note that cross-compiling for the opposite bits (64/32) as your host
                platform is not always straight-forward and might need a chroot environment.</paragraph>
            <paragraph>To create standard export templates, the resulting files in the <literal>bin/</literal> folder
                must be copied to:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">$HOME/.local/share/godot/export_templates/&lt;version&gt;/</literal_block>
            <paragraph>and named like this (even for *BSD which is seen as "Linux/X11" by Godot):</paragraph>
            <literal_block force="False" highlight_args="{}" language="text" linenos="False" xml:space="preserve">linux_debug.arm32
linux_debug.arm64
linux_debug.x86_32
linux_debug.x86_64
linux_release.arm32
linux_release.arm64
linux_release.x86_32
linux_release.x86_64</literal_block>
            <paragraph>However, if you are writing your custom modules or custom C++ code, you
                might instead want to configure your binaries as custom export templates
                in the project export menu. You must have <strong>Advanced Options</strong> enabled
                to set this.</paragraph>
            <image candidates="{'*': 'engine_details/development/compiling/img/lintemplates.webp'}" original_uri="img/lintemplates.webp" uri="engine_details/development/compiling/img/lintemplates.webp"></image>
            <paragraph>You don't even need to copy them, you can just reference the resulting
                files in the <literal>bin/</literal> directory of your Godot source folder, so the next
                time you build, you automatically have the custom templates referenced.</paragraph>
        </section>
        <section ids="cross-compiling-for-risc-v-devices" names="cross-compiling\ for\ risc-v\ devices">
            <title>Cross-compiling for RISC-V devices</title>
            <paragraph>To cross-compile Godot for RISC-V devices, we need to setup the following items:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph><reference name="riscv-gnu-toolchain" refuri="https://github.com/riscv-collab/riscv-gnu-toolchain/releases">riscv-gnu-toolchain</reference>.
                        While we are not going to use this directly, it provides us with a sysroot, as well
                        as header and libraries files that we will need. There are many versions to choose
                        from, however, the older the toolchain, the more compatible our final binaries will be.
                        If in doubt, <reference name="use this version" refuri="https://github.com/riscv-collab/riscv-gnu-toolchain/releases/tag/2023.07.07">use this version</reference>,
                        and download <literal>riscv64-glibc-ubuntu-20.04-gcc-nightly-2023.07.07-nightly.tar.gz</literal>. Extract
                        it somewhere and remember its path.</paragraph>
                </list_item>
                <list_item>
                    <paragraph><reference name="mold" refuri="https://github.com/rui314/mold/releases">mold</reference>. This fast linker,
                        is the only one that correctly links the resulting binary. Download it, extract it,
                        and make sure to add its <literal>bin</literal> folder to your PATH. Run
                        <literal>mold --help | grep support</literal> to check if your version of Mold supports RISC-V.
                        If you don't see RISC-V, your Mold may need to be updated.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>To make referencing our toolchain easier, we can set an environment
                variable like this:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">export RISCV_TOOLCHAIN_PATH="path to toolchain here"</literal_block>
            <paragraph>This way, we won't have to manually set the directory location
                each time we want to reference it.</paragraph>
            <paragraph>With all the above setup, we are now ready to build Godot.</paragraph>
            <paragraph>Go to the root of the source code, and execute the following build command:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">PATH="$RISCV_TOOLCHAIN_PATH/bin:$PATH" \
scons arch=rv64 use_llvm=yes linker=mold lto=none target=editor \
    ccflags="--sysroot=$RISCV_TOOLCHAIN_PATH/sysroot --gcc-toolchain=$RISCV_TOOLCHAIN_PATH -target riscv64-unknown-linux-gnu" \
    linkflags="--sysroot=$RISCV_TOOLCHAIN_PATH/sysroot --gcc-toolchain=$RISCV_TOOLCHAIN_PATH -target riscv64-unknown-linux-gnu"</literal_block>
            <note>
                <paragraph>RISC-V GCC has <reference name="bugs with its atomic operations" refuri="https://github.com/riscv-collab/riscv-gcc/issues/15">bugs with its atomic operations</reference>
                    which prevent it from compiling Godot correctly. That's why Clang is used instead. Make sure that
                    it <emphasis>can</emphasis> compile to RISC-V. You can verify by executing this command <literal>clang -print-targets</literal>,
                    make sure you see <literal>riscv64</literal> on the list of targets.</paragraph>
            </note>
            <warning>
                <paragraph>The code above includes adding <literal>$RISCV_TOOLCHAIN_PATH/bin</literal> to the PATH,
                    but only for the following <literal>scons</literal> command. Since riscv-gnu-toolchain uses
                    its own Clang located in the <literal>bin</literal> folder, adding <literal>$RISCV_TOOLCHAIN_PATH/bin</literal>
                    to your user's PATH environment variable may block you from accessing another
                    version of Clang if one is installed. For this reason it's not recommended to make
                    adding the bin folder permanent. You can also omit the <literal>PATH="$RISCV_TOOLCHAIN_PATH/bin:$PATH"</literal> line
                    if you want to use scons with self-installed version of Clang, but it may have
                    compatibility issues with riscv-gnu-toolchain.</paragraph>
            </warning>
            <paragraph>The command is similar in nature, but with some key changes. <literal>ccflags</literal> and
                <literal>linkflags</literal> append additional flags to the build. <literal>--sysroot</literal> points to
                a folder simulating a Linux system, it contains all the headers, libraries,
                and <literal>.so</literal> files Clang will use. <literal>--gcc-toolchain</literal> tells Clang where
                the complete toolchain is, and <literal>-target riscv64-unknown-linux-gnu</literal>
                indicates to Clang the target architecture, and OS we want to build for.</paragraph>
            <paragraph>If all went well, you should now see a <literal>bin</literal> directory, and within it,
                a binary similar to the following:</paragraph>
            <literal_block force="False" highlight_args="{}" language="text" linenos="False" xml:space="preserve">godot.linuxbsd.editor.rv64.llvm</literal_block>
            <paragraph>You can now copy this executable to your favorite RISC-V device,
                then launch it there by double-clicking, which should bring up
                the project manager.</paragraph>
            <paragraph>If you later decide to compile the export templates, copy the above
                build command but change the value of <literal>target</literal> to <literal>template_debug</literal> for
                a debug build, or <literal>template_release</literal> for a release build.</paragraph>
        </section>
        <section ids="using-clang-and-lld-for-faster-development" names="using\ clang\ and\ lld\ for\ faster\ development">
            <title>Using Clang and LLD for faster development</title>
            <paragraph>You can also use Clang and LLD to build Godot. This has two upsides compared to
                the default GCC + GNU ld setup:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>LLD links Godot significantly faster compared to GNU ld or gold. This leads to
                        faster iteration times.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Clang tends to give more useful error messages compared to GCC.</paragraph>
                </list_item>
            </bullet_list>
            <paragraph>To do so, install Clang and the <literal>lld</literal> package from your distribution's package manager
                then use the following SCons command:</paragraph>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd use_llvm=yes linker=lld</literal_block>
            <paragraph>After the build is completed, a new binary with a <literal>.llvm</literal> suffix will be
                created in the <literal>bin/</literal> folder.</paragraph>
            <paragraph>It's still recommended to use GCC for production builds as they can be compiled using
                link-time optimization, making the resulting binaries smaller and faster.</paragraph>
            <paragraph>If this error occurs:</paragraph>
            <literal_block force="False" highlight_args="{}" language="text" linenos="False" xml:space="preserve">/usr/bin/ld: cannot find -l:libatomic.a: No such file or directory</literal_block>
            <paragraph>There are two solutions:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>In your SCons command, add the parameter <literal>use_static_cpp=no</literal>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Follow <reference name="these instructions" refuri="https://github.com/ivmai/libatomic_ops#installation-and-usage">these instructions</reference> to configure, build, and
                        install <literal>libatomic_ops</literal>. Then, copy <literal>/usr/lib/libatomic_ops.a</literal> to <literal>/usr/lib/libatomic.a</literal>, or create a soft link
                        to <literal>libatomic_ops</literal> by command <literal>ln -s /usr/lib/libatomic_ops.a /usr/lib/libatomic.a</literal>. The soft link can ensure the
                        latest <literal>libatomic_ops</literal> will be used without the need to copy it every time when it is updated.</paragraph>
                </list_item>
            </bullet_list>
        </section>
        <section ids="using-mold-for-faster-development" names="using\ mold\ for\ faster\ development">
            <title>Using mold for faster development</title>
            <paragraph>For even faster linking compared to LLD, you can use <reference name="mold" refuri="https://github.com/rui314/mold">mold</reference>.
                mold can be used with either GCC or Clang.</paragraph>
            <paragraph>As of January 2023, mold is not readily available in Linux distribution
                repositories, so you will have to install its binaries manually.</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Download mold binaries from its <reference name="releases page" refuri="https://github.com/rui314/mold/releases/latest">releases page</reference>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Extract the <literal>.tar.gz</literal> file, then move the extracted folder to a location such as <literal>.local/share/mold</literal>.</paragraph>
                </list_item>
                <list_item>
                    <paragraph>Add <literal>$HOME/.local/share/mold/bin</literal> to your user's <literal>PATH</literal> environment variable.
                        For example, you can add the following line at the end of your <literal>$HOME/.bash_profile</literal> file:</paragraph>
                </list_item>
            </bullet_list>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">PATH="$HOME/.local/share/mold/bin:$PATH"</literal_block>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Open a new terminal (or run <literal>source "$HOME/.bash_profile"</literal>),
                        then use the following SCons command when compiling Godot:</paragraph>
                    <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd linker=mold</literal_block>
                </list_item>
            </bullet_list>
        </section>
        <section ids="using-system-libraries-for-faster-development" names="using\ system\ libraries\ for\ faster\ development">
            <title>Using system libraries for faster development</title>
            <paragraph><reference name="Godot bundles the source code of various third-party libraries." refuri="https://github.com/godotengine/godot/tree/master/thirdparty">Godot bundles the source code of various third-party libraries.</reference>
                You can choose to use system versions of third-party libraries instead.
                This makes the Godot binary faster to link, as third-party libraries are
                dynamically linked. Therefore, they don't need to be statically linked
                every time you build the engine (even on small incremental changes).</paragraph>
            <paragraph>However, not all Linux distributions have packages for third-party libraries
                available (or they may not be up-to-date).</paragraph>
            <paragraph>Moving to system libraries can reduce linking times by several seconds on slow
                CPUs, but it requires manual testing depending on your Linux distribution. Also,
                you may not be able to use system libraries for everything due to bugs in the
                system library packages (or in the build system, as this feature is less
                tested).</paragraph>
            <paragraph>To compile Godot with system libraries, install these dependencies <strong>on top</strong> of the ones
                listed in the <reference internal="True" refid="doc-compiling-for-linuxbsd-oneliners"><inline classes="std std-ref">Distro-specific one-liners</inline></reference>:</paragraph>
            <container classes="sphinx-tabs" type="tab-element">
                <div aria-label="Tabbed content" role="tablist">
                    <button aria-controls="panel-1-1-0" aria-selected="true" classes="sphinx-tabs-tab" ids="tab-1-1-0" name="1-0" role="tab" tabindex="0">Debian/Ubuntu</button>
                    <button aria-controls="panel-1-1-1" aria-selected="false" classes="sphinx-tabs-tab" ids="tab-1-1-1" name="1-1" role="tab" tabindex="-1">Fedora</button>
                </div>
                <div aria-labelledby="tab-1-1-0" classes="sphinx-tabs-panel" ids="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0">
                    <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo apt-get update
sudo apt-get install -y \
  libembree-dev \
  libenet-dev \
  libfreetype-dev \
  libpng-dev \
  zlib1g-dev \
  libgraphite2-dev \
  libharfbuzz-dev \
  libogg-dev \
  libtheora-dev \
  libvorbis-dev \
  libwebp-dev \
  libmbedtls-dev \
  libminiupnpc-dev \
  libpcre2-dev \
  libsdl3-dev \
  libzstd-dev \
  libsquish-dev \
  libicu-dev</literal_block>
                </div>
                <div aria-labelledby="tab-1-1-1" classes="sphinx-tabs-panel" hidden="true" ids="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0">
                    <literal_block force="False" language="shell" linenos="False" xml:space="preserve">sudo dnf install -y \
  embree-devel \
  enet-devel \
  glslang-devel \
  graphite2-devel \
  harfbuzz-devel \
  libicu-devel \
  libsquish-devel \
  libtheora-devel \
  libvorbis-devel \
  libwebp-devel \
  libzstd-devel \
  mbedtls-devel \
  miniupnpc-devel \
  SDL3-devel</literal_block>
                </div>
            </container>
            <paragraph>After installing all required packages, use the following command to build Godot:</paragraph>
            <comment xml:space="preserve">NOTE: Some `builtin_` options aren't used here because they break the build as of January 2023
(tested on Fedora 37).</comment>
            <literal_block force="False" language="shell" linenos="False" xml:space="preserve">scons platform=linuxbsd builtin_embree=no builtin_enet=no builtin_freetype=no builtin_graphite=no builtin_harfbuzz=no builtin_libogg=no builtin_libpng=no builtin_libtheora=no builtin_libvorbis=no builtin_libwebp=no builtin_mbedtls=no builtin_miniupnpc=no builtin_pcre2=no builtin_sdl=no builtin_zlib=no builtin_zstd=no</literal_block>
            <paragraph>On Debian stable, you will need to remove <title_reference>builtin_embree=no</title_reference> as the system-provided
                Embree version is too old to work with Godot's latest <title_reference>master</title_reference> branch
                (which requires Embree 4).</paragraph>
            <paragraph>You can view a list of all built-in libraries that have system alternatives by
                running <literal>scons -h</literal>, then looking for options starting with <literal>builtin_</literal>.</paragraph>
            <warning>
                <paragraph>When using system libraries, the resulting binary is <strong>not</strong> portable
                    across Linux distributions anymore. Do not use this approach for creating
                    binaries you intend to distribute to others, unless you're creating a
                    package for a Linux distribution.</paragraph>
            </warning>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
