<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE document PUBLIC "+//IDN docutils.sourceforge.net//DTD Docutils Generic//EN//XML" "http://docutils.sourceforge.net/docs/ref/docutils.dtd">
<!-- Generated by Docutils 0.21.2 -->
<document source="/home/runner/work/godot-docs-cn/godot-docs-cn/godot-docs/docs/engine_details/development/configuring_an_ide/clion.rst" translation_progress="{'total': 0, 'translated': 0}" xmlns:c="https://www.sphinx-doc.org/" xmlns:changeset="https://www.sphinx-doc.org/" xmlns:citation="https://www.sphinx-doc.org/" xmlns:cpp="https://www.sphinx-doc.org/" xmlns:index="https://www.sphinx-doc.org/" xmlns:js="https://www.sphinx-doc.org/" xmlns:math="https://www.sphinx-doc.org/" xmlns:py="https://www.sphinx-doc.org/" xmlns:rst="https://www.sphinx-doc.org/" xmlns:std="https://www.sphinx-doc.org/">
    <target refid="doc-configuring-an-ide-clion"></target>
    <section dupnames="clion" ids="clion doc-configuring-an-ide-clion" names="doc_configuring_an_ide_clion">
        <title>CLion</title>
        <paragraph><reference name="CLion" refuri="https://www.jetbrains.com/clion/">CLion</reference><target ids="id1" names="clion" refuri="https://www.jetbrains.com/clion/"></target> is a
            <reference name="JetBrains" refuri="https://www.jetbrains.com/">JetBrains</reference><target ids="jetbrains" names="jetbrains" refuri="https://www.jetbrains.com/"></target> IDE for C++ that's free for individual, non-commercial development.</paragraph>
        <section ids="importing-the-project" names="importing\ the\ project">
            <title>Importing the project</title>
            <paragraph>CLion can import a project's <reference name="compilation database file" refuri="https://clang.llvm.org/docs/JSONCompilationDatabase.html">compilation database file</reference><target ids="compilation-database-file" names="compilation\ database\ file" refuri="https://clang.llvm.org/docs/JSONCompilationDatabase.html"></target>, commonly named <literal>compile_commands.json</literal>. To generate the compilation database file, open the terminal, change to the Godot root directory, and run:</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">scons compiledb=yes compile_commands.json</literal_block>
            <paragraph>Then, open the Godot root directory with CLion and wait for the project to be fully
                indexed. If code completion, parameter information, or refactoring are not enabled,
                you will need to load the project with CMake. To do this, find the <literal>CMakeLists.txt</literal>
                file in the <literal>platform\android\java\nativeSrcsConfigs</literal> directory, right click and
                select <inline classes="role-button role-ui">Load CMake Project</inline>. Once the project reloads, a <literal>godot</literal> build configuration
                will be added. This configuration can be safely deleted as the CMake file will not
                build the project and only exists for loading the project in JetBrains IDEs.</paragraph>
            <block_quote>
                <note>
                    <paragraph>Windows Users:</paragraph>
                    <paragraph>For <literal>compile_commands.json</literal> to load correctly in CLion, you must first have the Visual Studio toolchain configured for CLion.</paragraph>
                    <bullet_list bullet="-">
                        <list_item>
                            <paragraph>Navigate to <strong>Preferences &gt; Build, Execution, Deployment &gt; Toolchains</strong></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>Click the <strong>+</strong> button and select  <literal>Visual Studio</literal></paragraph>
                        </list_item>
                        <list_item>
                            <paragraph>CLion will attempt to detect your Visual Studio installation. If it is unsuccessful, use the file icon to the right of <literal>Toolset:</literal> to select the directory with your Visual Studio installation.</paragraph>
                        </list_item>
                    </bullet_list>
                    <paragraph>You may exit and reload CLion and it will reload <literal>compile_commands.json</literal></paragraph>
                </note>
            </block_quote>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion_visual_studio_toolchain.webp'}" original_uri="img/clion_visual_studio_toolchain.webp" uri="engine_details/development/configuring_an_ide/img/clion_visual_studio_toolchain.webp"></image>
            </figure>
        </section>
        <section ids="compiling-and-debugging-the-project" names="compiling\ and\ debugging\ the\ project">
            <title>Compiling and debugging the project</title>
            <paragraph>CLion does not support compiling and debugging Godot via SCons out of the box. This can be achieved by creating a custom build target and run configuration in CLion. Before creating a custom build target, you must <reference internal="True" refuri="../compiling/index#toc-devel-compiling"><inline classes="std std-ref">compile Godot</inline></reference> once on the command line, to generate the Godot executable. Open the terminal, change into the Godot root directory, and execute:</paragraph>
            <literal_block force="False" language="gdscript" linenos="False" xml:space="preserve">scons dev_build=yes</literal_block>
            <paragraph>To add a custom build target that invokes SCons for compilation:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Open CLion and navigate to <strong>Preferences &gt; Build, Execution, Deployment &gt; Custom Build Targets</strong></paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-preferences.png'}" original_uri="img/clion-preferences.png" uri="engine_details/development/configuring_an_ide/img/clion-preferences.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Click <strong>Add target</strong> and give the target a name, e.g. <literal>Godot debug</literal>.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-target.png'}" original_uri="img/clion-target.png" uri="engine_details/development/configuring_an_ide/img/clion-target.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Click <strong>...</strong> next to the <strong>Build:</strong> selectbox, then click the <strong>+</strong> button in the <strong>External Tools</strong> dialog to add a new external tool.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-external-tools.png'}" original_uri="img/clion-external-tools.png" uri="engine_details/development/configuring_an_ide/img/clion-external-tools.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Give the tool a name, e.g. <literal>Build Godot debug</literal>, set <strong>Program</strong> to <literal>scons</literal>, set <strong>Arguments</strong> to the compilation settings you want (see <reference internal="True" refuri="../compiling/index#toc-devel-compiling"><inline classes="std std-ref">compiling Godot</inline></reference>), and set the <strong>Working directory</strong> to <literal>$ProjectFileDir$</literal>, which equals the Godot root directory. Click <strong>OK</strong> to create the tool.</paragraph>
                    <block_quote>
                        <note>
                            <paragraph>CLion does not expand shell commands like <literal>scons -j$(nproc)</literal>. Use concrete values instead, e.g. <literal>scons -j8</literal>.</paragraph>
                        </note>
                    </block_quote>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-create-build-tool.webp'}" original_uri="img/clion-create-build-tool.webp" uri="engine_details/development/configuring_an_ide/img/clion-create-build-tool.webp"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Back in the <strong>External Tools</strong> dialog, click the <strong>+</strong> again to add a second external tool for cleaning the Godot build via SCons. Give the tool a name, e.g. <literal>Clean Godot debug</literal>, set <strong>Program</strong> to <literal>scons</literal>, set <strong>Arguments</strong> to <literal>-c</literal> (which will clean the build), and set the <strong>Working directory</strong> to <literal>$ProjectFileDir$</literal>. Click <strong>OK</strong> to create the tool.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-create-clean-tool.png'}" original_uri="img/clion-create-clean-tool.png" uri="engine_details/development/configuring_an_ide/img/clion-create-clean-tool.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Close the <strong>External Tools</strong> dialog. In the <strong>Custom Build Target</strong> dialog for the custom <literal>Godot debug</literal> build target, select the <strong>Build Godot debug</strong> tool from the <strong>Build</strong> select box, and select the <strong>Clean Godot debug</strong> tool from the <strong>Clean</strong> select box. Click <strong>OK</strong> to create the custom build target.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-select-tools.png'}" original_uri="img/clion-select-tools.png" uri="engine_details/development/configuring_an_ide/img/clion-select-tools.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>In the main IDE window, click <strong>Add Configuration</strong>.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-add-configuration.png'}" original_uri="img/clion-add-configuration.png" uri="engine_details/development/configuring_an_ide/img/clion-add-configuration.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>In the <strong>Run/Debug Configuration</strong> dialog, click <strong>Add new...</strong>, then select <strong>Custom Build Application</strong> to create a new custom run/debug configuration.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-add-custom-build-application.png'}" original_uri="img/clion-add-custom-build-application.png" uri="engine_details/development/configuring_an_ide/img/clion-add-custom-build-application.png"></image>
            </figure>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Give the run/debug configuration a name, e.g. <literal>Godot debug</literal>, select the <literal>Godot debug</literal> custom build target as the <strong>Target</strong>. Select the Godot executable in the <literal>bin/</literal> folder as the <strong>Executable</strong>, and set the <strong>Program arguments</strong> to <literal>--editor --path path-to-your-project/</literal>, where <literal>path-to-your-project/</literal> should be a path pointing to an existing Godot project. If you omit the <literal>--path</literal> argument, you will only be able to debug the Godot Project Manager window. Click <strong>OK</strong> to create the run/debug configuration.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-run-configuration.png'}" original_uri="img/clion-run-configuration.png" uri="engine_details/development/configuring_an_ide/img/clion-run-configuration.png"></image>
            </figure>
            <paragraph>You can now build, run, debug, profile, and Valgrind check the Godot editor via the run configuration.</paragraph>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-build-run.png'}" original_uri="img/clion-build-run.png" uri="engine_details/development/configuring_an_ide/img/clion-build-run.png"></image>
            </figure>
            <paragraph>When playing a scene, the Godot editor will spawn a separate process. You can debug this process in CLion by going to <strong>Run &gt; Attach to process...</strong>, typing <literal>godot</literal>, and selecting the Godot process with the highest <strong>pid</strong> (process ID), which will usually be the running project.</paragraph>
        </section>
        <section ids="ignoring-object-and-library-files" names="ignoring\ object\ and\ library\ files">
            <title>Ignoring object and library files</title>
            <paragraph>After building Godot in CLion, you may see the object and library files showing up in the <strong>Project</strong> view.</paragraph>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-object-library-files-in-project-view.webp'}" original_uri="img/clion-object-library-files-in-project-view.webp" uri="engine_details/development/configuring_an_ide/img/clion-object-library-files-in-project-view.webp"></image>
            </figure>
            <paragraph>You can configure CLion to ignore those files:</paragraph>
            <bullet_list bullet="-">
                <list_item>
                    <paragraph>Open CLion and navigate to <strong>Preferences &gt; Editor &gt; File Types &gt; Ignored Files and Folders</strong></paragraph>
                </list_item>
                <list_item>
                    <paragraph>Click the <strong>+</strong> button to add <literal>*.o</literal> and <literal>*.a</literal> to the list. In Windows, you would add <literal>*.obj</literal> and <literal>*.dll</literal>.</paragraph>
                </list_item>
            </bullet_list>
            <figure align="center">
                <image candidates="{'*': 'engine_details/development/configuring_an_ide/img/clion-ignore-object-library-files.webp'}" original_uri="img/clion-ignore-object-library-files.webp" uri="engine_details/development/configuring_an_ide/img/clion-ignore-object-library-files.webp"></image>
            </figure>
            <paragraph>Now, the files should be ignored in the Project view.</paragraph>
            <substitution_definition names="weblate_widget"><reference refuri="https://hosted.weblate.org/engage/godot-engine/?utm_source=widget"><image alt="Translation status" candidates="{'?': 'https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png'}" height="66" uri="https://hosted.weblate.org/widgets/godot-engine/-/godot-docs/287x66-white.png" width="287"></image></reference></substitution_definition>
        </section>
    </section>
</document>
