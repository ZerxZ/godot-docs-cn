:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/InputEventMIDI.xml.

.. _class_InputEventMIDI:

InputEventMIDI
==============

**ç»§æ‰¿ï¼š** :ref:`InputEvent<class_InputEvent>` **<** :ref:`Resource<class_Resource>` **<** :ref:`RefCounted<class_RefCounted>` **<** :ref:`Object<class_Object>`

ä»£è¡¨æ¥è‡ª MIDI è®¾å¤‡çš„ MIDI æ¶ˆæ¯ï¼Œä¾‹å¦‚æ¥è‡ªéŸ³ä¹é”®ç›˜ã€‚

.. rst-class:: classref-introduction-group

æè¿°
----

InputEventMIDI å­˜å‚¨æœ‰å…³æ¥è‡ª `MIDI <https://en.wikipedia.org/wiki/MIDI>`__\ ï¼ˆä¹å™¨æ•°å­—æ¥å£ï¼‰è®¾å¤‡çš„æ¶ˆæ¯çš„ä¿¡æ¯ã€‚è¿™äº›è®¾å¤‡å¯èƒ½åŒ…æ‹¬éŸ³ä¹é”®ç›˜ã€åˆæˆå™¨å’Œé¼“æœºã€‚

MIDI æ¶ˆæ¯å¯ä»¥é€šè¿‡ 5 é’ˆ MIDI è¿æ¥å™¨æˆ– USB æ¥æ”¶ã€‚å¦‚æœä½ çš„è®¾å¤‡æ”¯æŒè¿™ä¸¤ç§æ–¹å¼ï¼Œè¯·åŠ¡å¿…æ£€æŸ¥è®¾å¤‡ä¸­çš„è®¾ç½®ä»¥æŸ¥çœ‹å®ƒæ­£åœ¨ä½¿ç”¨å“ªç§è¾“å‡ºã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼ŒGodot ä¸æ£€æµ‹ MIDI è®¾å¤‡ã€‚éœ€è¦é¦–å…ˆè°ƒç”¨ :ref:`OS.open_midi_inputs<class_OS_method_open_midi_inputs>`\ ã€‚å¯ä»¥ä½¿ç”¨ :ref:`OS.get_connected_midi_inputs<class_OS_method_get_connected_midi_inputs>` æ£€æŸ¥æ£€æµ‹åˆ°å“ªäº›è®¾å¤‡ï¼Œå¹¶ä½¿ç”¨ :ref:`OS.close_midi_inputs<class_OS_method_close_midi_inputs>` å…³é—­è¿æ¥ã€‚


.. tabs::

 .. code-tab:: gdscript

    func _ready():
        OS.open_midi_inputs()
        print(OS.get_connected_midi_inputs())
    
    func _input(input_event):
        if input_event is InputEventMIDI:
            _print_midi_info(input_event)
    
    func _print_midi_info(midi_event):
        print(midi_event)
        print("Channel ", midi_event.channel)
        print("Message ", midi_event.message)
        print("Pitch ", midi_event.pitch)
        print("Velocity ", midi_event.velocity)
        print("Instrument ", midi_event.instrument)
        print("Pressure ", midi_event.pressure)
        print("Controller number: ", midi_event.controller_number)
        print("Controller value: ", midi_event.controller_value)

 .. code-tab:: csharp

    public override void _Ready()
    {
        OS.OpenMidiInputs();
        GD.Print(OS.GetConnectedMidiInputs());
    }
    
    public override void _Input(InputEvent inputEvent)
    {
        if (inputEvent is InputEventMidi midiEvent)
        {
            PrintMIDIInfo(midiEvent);
        }
    }
    
    private void PrintMIDIInfo(InputEventMidi midiEvent)
    {
        GD.Print(midiEvent);
        GD.Print($"Channel {midiEvent.Channel}");
        GD.Print($"Message {midiEvent.Message}");
        GD.Print($"Pitch {midiEvent.Pitch}");
        GD.Print($"Velocity {midiEvent.Velocity}");
        GD.Print($"Instrument {midiEvent.Instrument}");
        GD.Print($"Pressure {midiEvent.Pressure}");
        GD.Print($"Controller number: {midiEvent.ControllerNumber}");
        GD.Print($"Controller value: {midiEvent.ControllerValue}");
    }



\ **æ³¨æ„ï¼š**\ Godot ä¸æ”¯æŒ MIDI è¾“å‡ºï¼Œå› æ­¤æ— æ³•ä» Godot å‘å‡º MIDI æ¶ˆæ¯ã€‚ä»…æ”¯æŒ MIDI è¾“å…¥ã€‚

.. rst-class:: classref-introduction-group

æ•™ç¨‹
----

- `MIDI æ¶ˆæ¯çŠ¶æ€å­—èŠ‚åˆ—è¡¨ <https://www.midi.org/specifications-old/item/table-2-expanded-messages-list-status-bytes>`__

- `ç»´åŸºç™¾ç§‘é€šç”¨ MIDI ä¹å™¨åˆ—è¡¨ <https://en.wikipedia.org/wiki/General_MIDI#Program_change_events>`__

- `ç»´åŸºç™¾ç§‘é’¢ç´ç´é”®é¢‘ç‡åˆ—è¡¨ <https://en.wikipedia.org/wiki/Piano_key_frequencies#List>`__

.. rst-class:: classref-reftable-group

å±æ€§
----

.. table::
   :widths: auto

   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`channel<class_InputEventMIDI_property_channel>`                     | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`controller_number<class_InputEventMIDI_property_controller_number>` | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`controller_value<class_InputEventMIDI_property_controller_value>`   | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`instrument<class_InputEventMIDI_property_instrument>`               | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`MIDIMessage<enum_@GlobalScope_MIDIMessage>` | :ref:`message<class_InputEventMIDI_property_message>`                     | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`pitch<class_InputEventMIDI_property_pitch>`                         | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`pressure<class_InputEventMIDI_property_pressure>`                   | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+
   | :ref:`int<class_int>`                             | :ref:`velocity<class_InputEventMIDI_property_velocity>`                   | ``0`` |
   +---------------------------------------------------+---------------------------------------------------------------------------+-------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

å±æ€§è¯´æ˜
--------

.. _class_InputEventMIDI_property_channel:

.. rst-class:: classref-property

:ref:`int<class_int>` **channel** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_channel>`

.. rst-class:: classref-property-setget

- |void| **set_channel**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_channel**\ (\ )

è¯¥æ¶ˆæ¯çš„ MIDI é€šé“ï¼ŒèŒƒå›´ä» ``0`` åˆ° ``15``\ ã€‚MIDI é€šé“ ``9`` æ˜¯ä¸ºæ‰“å‡»ä¹å™¨ä¿ç•™çš„ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_controller_number:

.. rst-class:: classref-property

:ref:`int<class_int>` **controller_number** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_controller_number>`

.. rst-class:: classref-property-setget

- |void| **set_controller_number**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_controller_number**\ (\ )

å¦‚æœ :ref:`message<class_InputEventMIDI_property_message>` ä¸º :ref:`@GlobalScope.MIDI_MESSAGE_CONTROL_CHANGE<class_@GlobalScope_constant_MIDI_MESSAGE_CONTROL_CHANGE>`\ ï¼Œæ§åˆ¶å™¨çš„å”¯ä¸€ç¼–å·ï¼›å¦åˆ™ä¸º ``0``\ ã€‚è¯¥å€¼å¯ç”¨äºè¯†åˆ«ç”¨äºéŸ³é‡ã€å¹³è¡¡å’Œå¹³ç§»çš„æ»‘å—ï¼Œä»¥åŠ MIDI è®¾å¤‡ä¸Šçš„å¼€å…³å’Œè¸æ¿ã€‚æœ‰å…³å°åˆ—è¡¨ï¼Œè¯·å‚é˜…\ `é€šç”¨ MIDI è§„èŒƒ <https://en.wikipedia.org/wiki/General_MIDI#Controller_events>`__\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_controller_value:

.. rst-class:: classref-property

:ref:`int<class_int>` **controller_value** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_controller_value>`

.. rst-class:: classref-property-setget

- |void| **set_controller_value**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_controller_value**\ (\ )

åº”ç”¨äºæ§åˆ¶å™¨çš„å€¼ã€‚å¦‚æœ :ref:`message<class_InputEventMIDI_property_message>` ä¸º :ref:`@GlobalScope.MIDI_MESSAGE_CONTROL_CHANGE<class_@GlobalScope_constant_MIDI_MESSAGE_CONTROL_CHANGE>`\ ï¼Œåˆ™è¯¥å€¼ä»‹äº ``0`` åˆ° ``127`` ä¹‹é—´ï¼Œå¦åˆ™ä¸º ``0``\ ã€‚å¦è§ :ref:`controller_value<class_InputEventMIDI_property_controller_value>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_instrument:

.. rst-class:: classref-property

:ref:`int<class_int>` **instrument** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_instrument>`

.. rst-class:: classref-property-setget

- |void| **set_instrument**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_instrument**\ (\ )

è¯¥ MIDI æ¶ˆæ¯ä¸Šä½¿ç”¨çš„ä¹å™¨ï¼ˆä¹Ÿç§°ä¸º *ç¨‹åº* æˆ– *é¢„è®¾*\ ï¼‰ã€‚è¯¥å€¼ä»‹äº ``0`` åˆ° ``127`` ä¹‹é—´ã€‚

è¦äº†è§£æ¯ä¸ªå€¼çš„å«ä¹‰ï¼Œè¯·å‚é˜…\ `é€šç”¨ MIDI ä¹å™¨åˆ—è¡¨ <https://en.wikipedia.org/wiki/General_MIDI#Program_change_events>`__\ ã€‚è¯·è®°ä½ï¼Œè¯¥åˆ—è¡¨ç›¸å·® 1ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä» 0 å¼€å§‹çš„ã€‚å€¼ ``0`` å¯¹åº”äºåŸå£°ä¸‰è§’é’¢ç´ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_message:

.. rst-class:: classref-property

:ref:`MIDIMessage<enum_@GlobalScope_MIDIMessage>` **message** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_message>`

.. rst-class:: classref-property-setget

- |void| **set_message**\ (\ value\: :ref:`MIDIMessage<enum_@GlobalScope_MIDIMessage>`\ )
- :ref:`MIDIMessage<enum_@GlobalScope_MIDIMessage>` **get_message**\ (\ )

è¡¨ç¤º MIDI æ¶ˆæ¯çš„ç±»å‹ï¼ˆè¯·å‚é˜… :ref:`MIDIMessage<enum_@GlobalScope_MIDIMessage>` æšä¸¾ï¼‰ã€‚

æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… `MIDI æ¶ˆæ¯çŠ¶æ€å­—èŠ‚åˆ—è¡¨å›¾è¡¨ <https://www.midi.org/specifications-old/item/table-2-expanded-messages-list-status-bytes>`__\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_pitch:

.. rst-class:: classref-property

:ref:`int<class_int>` **pitch** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_pitch>`

.. rst-class:: classref-property-setget

- |void| **set_pitch**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_pitch**\ (\ )

è¯¥ MIDI æ¶ˆæ¯çš„éŸ³é«˜ç´¢å¼•å·ã€‚è¯¥å€¼çš„èŒƒå›´ä» ``0`` åˆ° ``127``\ ã€‚

åœ¨é’¢ç´ä¸Šï¼Œ\ **ä¸­éŸ³ C**\ ä¸º ``60``\ ï¼Œåè·Ÿ **C å‡éŸ³**\ ï¼ˆ\ ``61``\ ï¼‰ï¼Œç„¶åæ˜¯ **D**\ ï¼ˆ\ ``62``\ ï¼‰ï¼Œç­‰ç­‰ã€‚æ¯ä¸ªå…«åº¦éŸ³é˜¶ä»¥ 12 ä¸ºåç§»é‡è¿›è¡Œåˆ†å‰²ã€‚è¯·å‚é˜… `é’¢ç´é”®é¢‘ç‡å›¾è¡¨ <https://en.wikipedia.org/wiki/Piano_key_frequencies>`__ å®Œæ•´åˆ—è¡¨çš„â€œMIDI éŸ³ç¬¦ç¼–å·â€åˆ—ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_pressure:

.. rst-class:: classref-property

:ref:`int<class_int>` **pressure** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_pressure>`

.. rst-class:: classref-property-setget

- |void| **set_pressure**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_pressure**\ (\ )

æŒ‰é”®çš„åŠ›åº¦ã€‚è¯¥å€¼çš„èŒƒå›´ä» ``0`` åˆ° ``127``\ ã€‚

\ **æ³¨æ„ï¼š**\ å¯¹äºè®¸å¤šè®¾å¤‡ï¼Œè¯¥å€¼å§‹ç»ˆä¸º ``0``\ ã€‚å…¶ä»–å¦‚éŸ³ä¹é”®ç›˜ç­‰è®¾å¤‡å¯ä»¥é€šè¿‡æ”¹ç”¨æ›´æ”¹ :ref:`velocity<class_InputEventMIDI_property_velocity>` æ¥æ¨¡æ‹Ÿå‹åŠ›ã€‚

.. rst-class:: classref-item-separator

----

.. _class_InputEventMIDI_property_velocity:

.. rst-class:: classref-property

:ref:`int<class_int>` **velocity** = ``0`` :ref:`ğŸ”—<class_InputEventMIDI_property_velocity>`

.. rst-class:: classref-property-setget

- |void| **set_velocity**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_velocity**\ (\ )

MIDI æ¶ˆæ¯çš„é€Ÿåº¦ã€‚è¿™ä¸ªå€¼åœ¨ ``0`` åˆ° ``127`` ä¹‹é—´ã€‚å¯¹äºéŸ³ä¹é”®ç›˜ï¼Œè¿™å¯¹åº”çš„æ˜¯æŒ‰é”®æœ‰å¤šå¿«ï¼Œå®é™…å¾ˆå°‘è¶…è¿‡ ``110``\ ã€‚

\ **æ³¨æ„ï¼š**\ éƒ¨åˆ† MIDI è®¾å¤‡å¯èƒ½ä¼šå‘é€é€Ÿåº¦ä¸º ``0`` çš„ :ref:`@GlobalScope.MIDI_MESSAGE_NOTE_ON<class_@GlobalScope_constant_MIDI_MESSAGE_NOTE_ON>`\ ï¼Œå¹¶æœŸæœ›å®ƒè¢«è§†ä¸ºå’Œ :ref:`@GlobalScope.MIDI_MESSAGE_NOTE_OFF<class_@GlobalScope_constant_MIDI_MESSAGE_NOTE_OFF>` æ¶ˆæ¯ä¸€æ ·ã€‚å¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥ç”¨å‡ è¡Œä»£ç æ¥å¤„ç†ï¼š

::

    func _input(event):
        if event is InputEventMIDI:
            if event.message == MIDI_MESSAGE_NOTE_ON and event.velocity > 0:
                print("Note pressed!")

.. |virtual| replace:: :abbr:`virtual (æœ¬æ–¹æ³•é€šå¸¸éœ€è¦ç”¨æˆ·è¦†ç›–æ‰èƒ½ç”Ÿæ•ˆã€‚)`
.. |const| replace:: :abbr:`const (æœ¬æ–¹æ³•æ— å‰¯ä½œç”¨ï¼Œä¸ä¼šä¿®æ”¹è¯¥å®ä¾‹çš„ä»»ä½•æˆå‘˜å˜é‡ã€‚)`
.. |vararg| replace:: :abbr:`vararg (æœ¬æ–¹æ³•é™¤äº†èƒ½æ¥å—åœ¨æ­¤å¤„æè¿°çš„å‚æ•°å¤–ï¼Œè¿˜èƒ½å¤Ÿç»§ç»­æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ã€‚)`
.. |constructor| replace:: :abbr:`constructor (æœ¬æ–¹æ³•ç”¨äºæ„é€ æŸä¸ªç±»å‹ã€‚)`
.. |static| replace:: :abbr:`static (è°ƒç”¨æœ¬æ–¹æ³•æ— éœ€å®ä¾‹ï¼Œå¯ç›´æ¥ä½¿ç”¨ç±»åè¿›è¡Œè°ƒç”¨ã€‚)`
.. |operator| replace:: :abbr:`operator (æœ¬æ–¹æ³•æè¿°çš„æ˜¯ä½¿ç”¨æœ¬ç±»å‹ä½œä¸ºå·¦æ“ä½œæ•°çš„æœ‰æ•ˆè¿ç®—ç¬¦ã€‚)`
.. |bitfield| replace:: :abbr:`BitField (è¿™ä¸ªå€¼æ˜¯ç”±ä¸‹åˆ—ä½æ ‡å¿—æ„æˆä½æ©ç çš„æ•´æ•°ã€‚)`
.. |void| replace:: :abbr:`void (æ— è¿”å›å€¼ã€‚)`
