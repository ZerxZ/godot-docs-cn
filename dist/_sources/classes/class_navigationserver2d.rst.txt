:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/4.2/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/4.2/doc/classes/NavigationServer2D.xml.

.. _class_NavigationServer2D:

NavigationServer2D
==================

**继承：** :ref:`Object<class_Object>`

用于访问低阶 2D 导航的服务器接口。

.. rst-class:: classref-introduction-group

描述
----

NavigationServer2D 是负责处理导航地图、区块、代理的服务器。不负责处理 :ref:`AStar2D<class_AStar2D>` 和 :ref:`AStarGrid2D<class_AStarGrid2D>` 的 A\* 导航。

地图由区块组成，区块由导航多边形组成。它们共同定义了 2D 空间中的可达区域。

\ **注意：**\ 大多数 **NavigationServer2D** 的更改都是在下一个物理帧进行的，不会立即生效。包括所有对地图、区块、代理的更改，无论是通过场景树中导航相关的节点作出的更改，还是通过脚本作出的更改。

两个区块必须共享一条相似的边才能相连。如果一条边的两个顶点与另一条边上相应顶点的距离都小于 ``edge_connection_margin``\ ，那么就会认为这两条边是相连的。

可以使用 :ref:`region_set_navigation_layers<class_NavigationServer2D_method_region_set_navigation_layers>` 为区块分配导航层，使用 :ref:`map_get_path<class_NavigationServer2D_method_map_get_path>` 请求路径时会对导航层进行检查。可用于允许或禁止某些对象进入特定的区域。

使用碰撞躲避系统就需要使用代理。你可以为代理设置目标速度，然后服务器就会发出回调，提供修改后的速度。

\ **注意：**\ 碰撞躲避系统并不考虑区块。直接使用修改后的速度可能会将代理移动到可达区域之外。这是碰撞躲避系统的缺陷，更复杂的场合可能需要使用物理引擎。

服务器会对所有调用进行跟踪，并在同步阶段执行。这意味着你可以放心地从任何线程请求对地图作出任何修改。

.. rst-class:: classref-introduction-group

教程
----

- `2D 导航演示 <https://godotengine.org/asset-library/asset/117>`__

- :doc:`使用 NavigationServer <../tutorials/navigation/navigation_using_navigationservers>`

.. rst-class:: classref-reftable-group

方法
----

.. table::
   :widths: auto

   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`agent_create<class_NavigationServer2D_method_agent_create>` **(** **)**                                                                                                                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`agent_get_avoidance_enabled<class_NavigationServer2D_method_agent_get_avoidance_enabled>` **(** :ref:`RID<class_RID>` agent **)** |const|                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`agent_get_map<class_NavigationServer2D_method_agent_get_map>` **(** :ref:`RID<class_RID>` agent **)** |const|                                                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`agent_get_paused<class_NavigationServer2D_method_agent_get_paused>` **(** :ref:`RID<class_RID>` agent **)** |const|                                                                                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`agent_is_map_changed<class_NavigationServer2D_method_agent_is_map_changed>` **(** :ref:`RID<class_RID>` agent **)** |const|                                                                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_avoidance_callback<class_NavigationServer2D_method_agent_set_avoidance_callback>` **(** :ref:`RID<class_RID>` agent, :ref:`Callable<class_Callable>` callback **)**                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_avoidance_enabled<class_NavigationServer2D_method_agent_set_avoidance_enabled>` **(** :ref:`RID<class_RID>` agent, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_avoidance_layers<class_NavigationServer2D_method_agent_set_avoidance_layers>` **(** :ref:`RID<class_RID>` agent, :ref:`int<class_int>` layers **)**                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_avoidance_mask<class_NavigationServer2D_method_agent_set_avoidance_mask>` **(** :ref:`RID<class_RID>` agent, :ref:`int<class_int>` mask **)**                                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_avoidance_priority<class_NavigationServer2D_method_agent_set_avoidance_priority>` **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` priority **)**                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_map<class_NavigationServer2D_method_agent_set_map>` **(** :ref:`RID<class_RID>` agent, :ref:`RID<class_RID>` map **)**                                                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_max_neighbors<class_NavigationServer2D_method_agent_set_max_neighbors>` **(** :ref:`RID<class_RID>` agent, :ref:`int<class_int>` count **)**                                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_max_speed<class_NavigationServer2D_method_agent_set_max_speed>` **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` max_speed **)**                                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_neighbor_distance<class_NavigationServer2D_method_agent_set_neighbor_distance>` **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` distance **)**                                                                                                                                                                                                      |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_paused<class_NavigationServer2D_method_agent_set_paused>` **(** :ref:`RID<class_RID>` agent, :ref:`bool<class_bool>` paused **)**                                                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_position<class_NavigationServer2D_method_agent_set_position>` **(** :ref:`RID<class_RID>` agent, :ref:`Vector2<class_Vector2>` position **)**                                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_radius<class_NavigationServer2D_method_agent_set_radius>` **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` radius **)**                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_time_horizon_agents<class_NavigationServer2D_method_agent_set_time_horizon_agents>` **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` time_horizon **)**                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_time_horizon_obstacles<class_NavigationServer2D_method_agent_set_time_horizon_obstacles>` **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` time_horizon **)**                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_velocity<class_NavigationServer2D_method_agent_set_velocity>` **(** :ref:`RID<class_RID>` agent, :ref:`Vector2<class_Vector2>` velocity **)**                                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`agent_set_velocity_forced<class_NavigationServer2D_method_agent_set_velocity_forced>` **(** :ref:`RID<class_RID>` agent, :ref:`Vector2<class_Vector2>` velocity **)**                                                                                                                                                                                                      |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`bake_from_source_geometry_data<class_NavigationServer2D_method_bake_from_source_geometry_data>` **(** :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon, :ref:`NavigationMeshSourceGeometryData2D<class_NavigationMeshSourceGeometryData2D>` source_geometry_data, :ref:`Callable<class_Callable>` callback=Callable() **)**                            |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`bake_from_source_geometry_data_async<class_NavigationServer2D_method_bake_from_source_geometry_data_async>` **(** :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon, :ref:`NavigationMeshSourceGeometryData2D<class_NavigationMeshSourceGeometryData2D>` source_geometry_data, :ref:`Callable<class_Callable>` callback=Callable() **)**                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`free_rid<class_NavigationServer2D_method_free_rid>` **(** :ref:`RID<class_RID>` rid **)**                                                                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`get_debug_enabled<class_NavigationServer2D_method_get_debug_enabled>` **(** **)** |const|                                                                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID[]<class_RID>`                             | :ref:`get_maps<class_NavigationServer2D_method_get_maps>` **(** **)** |const|                                                                                                                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`link_create<class_NavigationServer2D_method_link_create>` **(** **)**                                                                                                                                                                                                                                                                                                      |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`link_get_enabled<class_NavigationServer2D_method_link_get_enabled>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                       | :ref:`link_get_end_position<class_NavigationServer2D_method_link_get_end_position>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`link_get_enter_cost<class_NavigationServer2D_method_link_get_enter_cost>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                                   |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`link_get_map<class_NavigationServer2D_method_link_get_map>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                                                 |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`link_get_navigation_layers<class_NavigationServer2D_method_link_get_navigation_layers>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`link_get_owner_id<class_NavigationServer2D_method_link_get_owner_id>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                                       |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                       | :ref:`link_get_start_position<class_NavigationServer2D_method_link_get_start_position>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`link_get_travel_cost<class_NavigationServer2D_method_link_get_travel_cost>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                                 |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`link_is_bidirectional<class_NavigationServer2D_method_link_is_bidirectional>` **(** :ref:`RID<class_RID>` link **)** |const|                                                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_bidirectional<class_NavigationServer2D_method_link_set_bidirectional>` **(** :ref:`RID<class_RID>` link, :ref:`bool<class_bool>` bidirectional **)**                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_enabled<class_NavigationServer2D_method_link_set_enabled>` **(** :ref:`RID<class_RID>` link, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_end_position<class_NavigationServer2D_method_link_set_end_position>` **(** :ref:`RID<class_RID>` link, :ref:`Vector2<class_Vector2>` position **)**                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_enter_cost<class_NavigationServer2D_method_link_set_enter_cost>` **(** :ref:`RID<class_RID>` link, :ref:`float<class_float>` enter_cost **)**                                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_map<class_NavigationServer2D_method_link_set_map>` **(** :ref:`RID<class_RID>` link, :ref:`RID<class_RID>` map **)**                                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_navigation_layers<class_NavigationServer2D_method_link_set_navigation_layers>` **(** :ref:`RID<class_RID>` link, :ref:`int<class_int>` navigation_layers **)**                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_owner_id<class_NavigationServer2D_method_link_set_owner_id>` **(** :ref:`RID<class_RID>` link, :ref:`int<class_int>` owner_id **)**                                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_start_position<class_NavigationServer2D_method_link_set_start_position>` **(** :ref:`RID<class_RID>` link, :ref:`Vector2<class_Vector2>` position **)**                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`link_set_travel_cost<class_NavigationServer2D_method_link_set_travel_cost>` **(** :ref:`RID<class_RID>` link, :ref:`float<class_float>` travel_cost **)**                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`map_create<class_NavigationServer2D_method_map_create>` **(** **)**                                                                                                                                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`map_force_update<class_NavigationServer2D_method_map_force_update>` **(** :ref:`RID<class_RID>` map **)**                                                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID[]<class_RID>`                             | :ref:`map_get_agents<class_NavigationServer2D_method_map_get_agents>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`map_get_cell_size<class_NavigationServer2D_method_map_get_cell_size>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                       | :ref:`map_get_closest_point<class_NavigationServer2D_method_map_get_closest_point>` **(** :ref:`RID<class_RID>` map, :ref:`Vector2<class_Vector2>` to_point **)** |const|                                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`map_get_closest_point_owner<class_NavigationServer2D_method_map_get_closest_point_owner>` **(** :ref:`RID<class_RID>` map, :ref:`Vector2<class_Vector2>` to_point **)** |const|                                                                                                                                                                                            |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`map_get_edge_connection_margin<class_NavigationServer2D_method_map_get_edge_connection_margin>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`map_get_link_connection_radius<class_NavigationServer2D_method_map_get_link_connection_radius>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID[]<class_RID>`                             | :ref:`map_get_links<class_NavigationServer2D_method_map_get_links>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID[]<class_RID>`                             | :ref:`map_get_obstacles<class_NavigationServer2D_method_map_get_obstacles>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`PackedVector2Array<class_PackedVector2Array>` | :ref:`map_get_path<class_NavigationServer2D_method_map_get_path>` **(** :ref:`RID<class_RID>` map, :ref:`Vector2<class_Vector2>` origin, :ref:`Vector2<class_Vector2>` destination, :ref:`bool<class_bool>` optimize, :ref:`int<class_int>` navigation_layers=1 **)** |const|                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID[]<class_RID>`                             | :ref:`map_get_regions<class_NavigationServer2D_method_map_get_regions>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                                            |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`map_get_use_edge_connections<class_NavigationServer2D_method_map_get_use_edge_connections>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`map_is_active<class_NavigationServer2D_method_map_is_active>` **(** :ref:`RID<class_RID>` map **)** |const|                                                                                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`map_set_active<class_NavigationServer2D_method_map_set_active>` **(** :ref:`RID<class_RID>` map, :ref:`bool<class_bool>` active **)**                                                                                                                                                                                                                                      |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`map_set_cell_size<class_NavigationServer2D_method_map_set_cell_size>` **(** :ref:`RID<class_RID>` map, :ref:`float<class_float>` cell_size **)**                                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`map_set_edge_connection_margin<class_NavigationServer2D_method_map_set_edge_connection_margin>` **(** :ref:`RID<class_RID>` map, :ref:`float<class_float>` margin **)**                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`map_set_link_connection_radius<class_NavigationServer2D_method_map_set_link_connection_radius>` **(** :ref:`RID<class_RID>` map, :ref:`float<class_float>` radius **)**                                                                                                                                                                                                    |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`map_set_use_edge_connections<class_NavigationServer2D_method_map_set_use_edge_connections>` **(** :ref:`RID<class_RID>` map, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`obstacle_create<class_NavigationServer2D_method_obstacle_create>` **(** **)**                                                                                                                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`obstacle_get_avoidance_enabled<class_NavigationServer2D_method_obstacle_get_avoidance_enabled>` **(** :ref:`RID<class_RID>` obstacle **)** |const|                                                                                                                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`obstacle_get_map<class_NavigationServer2D_method_obstacle_get_map>` **(** :ref:`RID<class_RID>` obstacle **)** |const|                                                                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`obstacle_get_paused<class_NavigationServer2D_method_obstacle_get_paused>` **(** :ref:`RID<class_RID>` obstacle **)** |const|                                                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_avoidance_enabled<class_NavigationServer2D_method_obstacle_set_avoidance_enabled>` **(** :ref:`RID<class_RID>` obstacle, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_avoidance_layers<class_NavigationServer2D_method_obstacle_set_avoidance_layers>` **(** :ref:`RID<class_RID>` obstacle, :ref:`int<class_int>` layers **)**                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_map<class_NavigationServer2D_method_obstacle_set_map>` **(** :ref:`RID<class_RID>` obstacle, :ref:`RID<class_RID>` map **)**                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_paused<class_NavigationServer2D_method_obstacle_set_paused>` **(** :ref:`RID<class_RID>` obstacle, :ref:`bool<class_bool>` paused **)**                                                                                                                                                                                                                       |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_position<class_NavigationServer2D_method_obstacle_set_position>` **(** :ref:`RID<class_RID>` obstacle, :ref:`Vector2<class_Vector2>` position **)**                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_radius<class_NavigationServer2D_method_obstacle_set_radius>` **(** :ref:`RID<class_RID>` obstacle, :ref:`float<class_float>` radius **)**                                                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_velocity<class_NavigationServer2D_method_obstacle_set_velocity>` **(** :ref:`RID<class_RID>` obstacle, :ref:`Vector2<class_Vector2>` velocity **)**                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`obstacle_set_vertices<class_NavigationServer2D_method_obstacle_set_vertices>` **(** :ref:`RID<class_RID>` obstacle, :ref:`PackedVector2Array<class_PackedVector2Array>` vertices **)**                                                                                                                                                                                     |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`parse_source_geometry_data<class_NavigationServer2D_method_parse_source_geometry_data>` **(** :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon, :ref:`NavigationMeshSourceGeometryData2D<class_NavigationMeshSourceGeometryData2D>` source_geometry_data, :ref:`Node<class_Node>` root_node, :ref:`Callable<class_Callable>` callback=Callable() **)** |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`query_path<class_NavigationServer2D_method_query_path>` **(** :ref:`NavigationPathQueryParameters2D<class_NavigationPathQueryParameters2D>` parameters, :ref:`NavigationPathQueryResult2D<class_NavigationPathQueryResult2D>` result **)** |const|                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`region_create<class_NavigationServer2D_method_region_create>` **(** **)**                                                                                                                                                                                                                                                                                                  |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                       | :ref:`region_get_connection_pathway_end<class_NavigationServer2D_method_region_get_connection_pathway_end>` **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` connection **)** |const|                                                                                                                                                                                   |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                       | :ref:`region_get_connection_pathway_start<class_NavigationServer2D_method_region_get_connection_pathway_start>` **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` connection **)** |const|                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`region_get_connections_count<class_NavigationServer2D_method_region_get_connections_count>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`region_get_enabled<class_NavigationServer2D_method_region_get_enabled>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                                                   |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`region_get_enter_cost<class_NavigationServer2D_method_region_get_enter_cost>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                                             |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`RID<class_RID>`                               | :ref:`region_get_map<class_NavigationServer2D_method_region_get_map>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`region_get_navigation_layers<class_NavigationServer2D_method_region_get_navigation_layers>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                               | :ref:`region_get_owner_id<class_NavigationServer2D_method_region_get_owner_id>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                                                 |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                           | :ref:`region_get_travel_cost<class_NavigationServer2D_method_region_get_travel_cost>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                                           |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`region_get_use_edge_connections<class_NavigationServer2D_method_region_get_use_edge_connections>` **(** :ref:`RID<class_RID>` region **)** |const|                                                                                                                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                             | :ref:`region_owns_point<class_NavigationServer2D_method_region_owns_point>` **(** :ref:`RID<class_RID>` region, :ref:`Vector2<class_Vector2>` point **)** |const|                                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_enabled<class_NavigationServer2D_method_region_set_enabled>` **(** :ref:`RID<class_RID>` region, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                                          |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_enter_cost<class_NavigationServer2D_method_region_set_enter_cost>` **(** :ref:`RID<class_RID>` region, :ref:`float<class_float>` enter_cost **)**                                                                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_map<class_NavigationServer2D_method_region_set_map>` **(** :ref:`RID<class_RID>` region, :ref:`RID<class_RID>` map **)**                                                                                                                                                                                                                                        |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_navigation_layers<class_NavigationServer2D_method_region_set_navigation_layers>` **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` navigation_layers **)**                                                                                                                                                                                              |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_navigation_polygon<class_NavigationServer2D_method_region_set_navigation_polygon>` **(** :ref:`RID<class_RID>` region, :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon **)**                                                                                                                                                               |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_owner_id<class_NavigationServer2D_method_region_set_owner_id>` **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` owner_id **)**                                                                                                                                                                                                                         |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_transform<class_NavigationServer2D_method_region_set_transform>` **(** :ref:`RID<class_RID>` region, :ref:`Transform2D<class_Transform2D>` transform **)**                                                                                                                                                                                                      |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_travel_cost<class_NavigationServer2D_method_region_set_travel_cost>` **(** :ref:`RID<class_RID>` region, :ref:`float<class_float>` travel_cost **)**                                                                                                                                                                                                            |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`region_set_use_edge_connections<class_NavigationServer2D_method_region_set_use_edge_connections>` **(** :ref:`RID<class_RID>` region, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                | :ref:`set_debug_enabled<class_NavigationServer2D_method_set_debug_enabled>` **(** :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                                                                                                          |
   +-----------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

信号
----

.. _class_NavigationServer2D_signal_map_changed:

.. rst-class:: classref-signal

**map_changed** **(** :ref:`RID<class_RID>` map **)**

当导航地图更新时、地区移动或被修改时发出。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_signal_navigation_debug_changed:

.. rst-class:: classref-signal

**navigation_debug_changed** **(** **)**

当导航调试设置更改时发出。仅在调试版本中可用。

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

方法说明
--------

.. _class_NavigationServer2D_method_agent_create:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **agent_create** **(** **)**

创建代理。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_get_avoidance_enabled:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **agent_get_avoidance_enabled** **(** :ref:`RID<class_RID>` agent **)** |const|

如果指定的 ``agent`` 使用避障，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_get_map:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **agent_get_map** **(** :ref:`RID<class_RID>` agent **)** |const|

返回请求 ``agent`` 目前分配到的导航地图 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_get_paused:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **agent_get_paused** **(** :ref:`RID<class_RID>` agent **)** |const|

如果指定的 ``agent`` 处于暂停状态，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_is_map_changed:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **agent_is_map_changed** **(** :ref:`RID<class_RID>` agent **)** |const|

如果该地图在上一帧发生了改变，则返回 true。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_avoidance_callback:

.. rst-class:: classref-method

void **agent_set_avoidance_callback** **(** :ref:`RID<class_RID>` agent, :ref:`Callable<class_Callable>` callback **)**

设置在 ``agent`` 的每个避障处理步骤之后调用的回调 :ref:`Callable<class_Callable>`\ 。计算出的 ``safe_velocity`` 将在物理计算之前通过信号发送。

\ **注意：**\ 只要代理还在导航地图上且未被释放，创建的回调就会始终独立于 SceneTree 状态进行处理。要为某个代理禁用回调的发送，请再次使用一个空的 :ref:`Callable<class_Callable>` 来调用 :ref:`agent_set_avoidance_callback<class_NavigationServer2D_method_agent_set_avoidance_callback>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_avoidance_enabled:

.. rst-class:: classref-method

void **agent_set_avoidance_enabled** **(** :ref:`RID<class_RID>` agent, :ref:`bool<class_bool>` enabled **)**

如果 ``enabled`` 为 ``true``\ ，则指定的 ``agent`` 使用避障。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_avoidance_layers:

.. rst-class:: classref-method

void **agent_set_avoidance_layers** **(** :ref:`RID<class_RID>` agent, :ref:`int<class_int>` layers **)**

设置该代理的 ``avoidance_layers`` 位掩码。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_avoidance_mask:

.. rst-class:: classref-method

void **agent_set_avoidance_mask** **(** :ref:`RID<class_RID>` agent, :ref:`int<class_int>` mask **)**

设置该代理的 ``avoidance_mask`` 位掩码。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_avoidance_priority:

.. rst-class:: classref-method

void **agent_set_avoidance_priority** **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` priority **)**

设置该代理的 ``avoidance_priority``\ ，优先级 ``priority`` 在 0.0（最低优先级）到 1.0（最高优先级）之间。

\ ``agent`` 指定的代理不会针对 ``avoidance_mask`` 存在匹配但 `` avoidance_priority`` 更低的代理调整速度。相应地，优先级更低的代理则会对其速度进行更大的调整，从而避免与这个代理发生碰撞。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_map:

.. rst-class:: classref-method

void **agent_set_map** **(** :ref:`RID<class_RID>` agent, :ref:`RID<class_RID>` map **)**

将代理放入地图中。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_max_neighbors:

.. rst-class:: classref-method

void **agent_set_max_neighbors** **(** :ref:`RID<class_RID>` agent, :ref:`int<class_int>` count **)**

设置在导航中，该代理所考虑的其他代理的最大数量。这个数越大，模拟的运行时间越长。如果这个数太小，则模拟会不安全。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_max_speed:

.. rst-class:: classref-method

void **agent_set_max_speed** **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` max_speed **)**

设置该代理的最大速度。必须为正数。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_neighbor_distance:

.. rst-class:: classref-method

void **agent_set_neighbor_distance** **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` distance **)**

设置在导航中，该代理所考虑的其他代理的最大距离。这个数越大，模拟的运行时间越长。如果这个数太小，则模拟会不安全。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_paused:

.. rst-class:: classref-method

void **agent_set_paused** **(** :ref:`RID<class_RID>` agent, :ref:`bool<class_bool>` paused **)**

如果 ``paused`` 为 true，则不会对指定的 ``agent`` 进行处理，例如计算避障速度以及收到避障回调。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_position:

.. rst-class:: classref-method

void **agent_set_position** **(** :ref:`RID<class_RID>` agent, :ref:`Vector2<class_Vector2>` position **)**

设置该代理在世界空间中的位置。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_radius:

.. rst-class:: classref-method

void **agent_set_radius** **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` radius **)**

设置该代理的半径。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_time_horizon_agents:

.. rst-class:: classref-method

void **agent_set_time_horizon_agents** **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` time_horizon **)**

考虑其他代理的前提下，该代理的速度的最短安全时间，这个速度是通过仿真得到的。数值越大，代理响应其他代理的速度就越快，但该代理选择速度的自由度也就越小。太高的取值会大大降低代理的移动速度。必须为正数。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_time_horizon_obstacles:

.. rst-class:: classref-method

void **agent_set_time_horizon_obstacles** **(** :ref:`RID<class_RID>` agent, :ref:`float<class_float>` time_horizon **)**

考虑其他静态避障障碍物的前提下，该代理的速度的最短安全时间，这个速度是通过仿真得到的。数值越大，代理响应存在的静态避障障碍物的速度就越快，但该代理选择速度的自由度也就越小。太高的取值会大大降低代理的移动速度。必须为正数。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_velocity:

.. rst-class:: classref-method

void **agent_set_velocity** **(** :ref:`RID<class_RID>` agent, :ref:`Vector2<class_Vector2>` velocity **)**

将 ``velocity`` 设置为指定代理 ``agent`` 的新的需求速度。避障仿真会尽可能尝试满足这个速度，但为了躲避与其他代理和障碍物的碰撞也会对它进行修改。将代理传送至新的较远的位置时，请改用 :ref:`agent_set_velocity_forced<class_NavigationServer2D_method_agent_set_velocity_forced>` 重置内部速度状态。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_agent_set_velocity_forced:

.. rst-class:: classref-method

void **agent_set_velocity_forced** **(** :ref:`RID<class_RID>` agent, :ref:`Vector2<class_Vector2>` velocity **)**

将指定代理 ``agent`` 的避障仿真内部速度替换为 ``velocity``\ 。将代理传送至新的较远的位置时，应该在同一帧里使用这个函数。频繁调用这个函数可能让代理卡住。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_bake_from_source_geometry_data:

.. rst-class:: classref-method

void **bake_from_source_geometry_data** **(** :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon, :ref:`NavigationMeshSourceGeometryData2D<class_NavigationMeshSourceGeometryData2D>` source_geometry_data, :ref:`Callable<class_Callable>` callback=Callable() **)**

使用提供的 ``source_geometry_data`` 中的数据烘焙提供的 ``navigation_polygon``\ 。该过程完成后，将调用可选的 ``callback``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_bake_from_source_geometry_data_async:

.. rst-class:: classref-method

void **bake_from_source_geometry_data_async** **(** :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon, :ref:`NavigationMeshSourceGeometryData2D<class_NavigationMeshSourceGeometryData2D>` source_geometry_data, :ref:`Callable<class_Callable>` callback=Callable() **)**

使用提供的 ``source_geometry_data`` 中的数据烘焙提供的 ``navigation_polygon``\ ，并作为在后台线程上运行的异步任务。该过程完成后，将调用可选的 ``callback``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_free_rid:

.. rst-class:: classref-method

void **free_rid** **(** :ref:`RID<class_RID>` rid **)**

销毁给定的 RID。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_get_debug_enabled:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **get_debug_enabled** **(** **)** |const|

如果该 NavigationServer 启用了调试，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_get_maps:

.. rst-class:: classref-method

:ref:`RID[]<class_RID>` **get_maps** **(** **)** |const|

返回该 NavigationServer 上所有已创建的导航地图的 :ref:`RID<class_RID>`\ 。会同时返回已创建的 2D 和 3D 导航地图，因为理论上它们之间是没有区别的。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_create:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **link_create** **(** **)**

在地图上新建两个地点之间的链接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_enabled:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **link_get_enabled** **(** :ref:`RID<class_RID>` link **)** |const|

如果指定的 ``link`` 已启用，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_end_position:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **link_get_end_position** **(** :ref:`RID<class_RID>` link **)** |const|

返回链接 ``link`` 的结束位置。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_enter_cost:

.. rst-class:: classref-method

:ref:`float<class_float>` **link_get_enter_cost** **(** :ref:`RID<class_RID>` link **)** |const|

返回 ``link`` 链接的进入消耗。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_map:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **link_get_map** **(** :ref:`RID<class_RID>` link **)** |const|

返回请求的导航链接 ``link`` 当前分配的导航地图的 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_navigation_layers:

.. rst-class:: classref-method

:ref:`int<class_int>` **link_get_navigation_layers** **(** :ref:`RID<class_RID>` link **)** |const|

返回 ``link`` 的导航层。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_owner_id:

.. rst-class:: classref-method

:ref:`int<class_int>` **link_get_owner_id** **(** :ref:`RID<class_RID>` link **)** |const|

返回管理该链接的对象的 ``ObjectID``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_start_position:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **link_get_start_position** **(** :ref:`RID<class_RID>` link **)** |const|

返回 ``link`` 链接的入口位置。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_get_travel_cost:

.. rst-class:: classref-method

:ref:`float<class_float>` **link_get_travel_cost** **(** :ref:`RID<class_RID>` link **)** |const|

返回 ``link`` 链接的移动消耗。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_is_bidirectional:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **link_is_bidirectional** **(** :ref:`RID<class_RID>` link **)** |const|

返回该 ``link`` 是否能够双向通行。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_bidirectional:

.. rst-class:: classref-method

void **link_set_bidirectional** **(** :ref:`RID<class_RID>` link, :ref:`bool<class_bool>` bidirectional **)**

设置该 ``link`` 是否能够双向通行。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_enabled:

.. rst-class:: classref-method

void **link_set_enabled** **(** :ref:`RID<class_RID>` link, :ref:`bool<class_bool>` enabled **)**

如果 ``enabled`` 为 ``true``\ ，则指定的 ``link`` 会在它的当前导航地图中生效。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_end_position:

.. rst-class:: classref-method

void **link_set_end_position** **(** :ref:`RID<class_RID>` link, :ref:`Vector2<class_Vector2>` position **)**

设置 ``link`` 的出口位置。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_enter_cost:

.. rst-class:: classref-method

void **link_set_enter_cost** **(** :ref:`RID<class_RID>` link, :ref:`float<class_float>` enter_cost **)**

设置 ``link`` 的进入消耗 ``enter_cost``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_map:

.. rst-class:: classref-method

void **link_set_map** **(** :ref:`RID<class_RID>` link, :ref:`RID<class_RID>` map **)**

设置该链接的导航地图 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_navigation_layers:

.. rst-class:: classref-method

void **link_set_navigation_layers** **(** :ref:`RID<class_RID>` link, :ref:`int<class_int>` navigation_layers **)**

设置该链接的导航层。可以在（使用 :ref:`map_get_path<class_NavigationServer2D_method_map_get_path>`\ ）进行路径请求时选择链接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_owner_id:

.. rst-class:: classref-method

void **link_set_owner_id** **(** :ref:`RID<class_RID>` link, :ref:`int<class_int>` owner_id **)**

设置管理该链接的对象的 ``ObjectID``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_start_position:

.. rst-class:: classref-method

void **link_set_start_position** **(** :ref:`RID<class_RID>` link, :ref:`Vector2<class_Vector2>` position **)**

设置 ``link`` 的入口位置。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_link_set_travel_cost:

.. rst-class:: classref-method

void **link_set_travel_cost** **(** :ref:`RID<class_RID>` link, :ref:`float<class_float>` travel_cost **)**

设置 ``link`` 的移动消耗 ``travel_cost``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_create:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **map_create** **(** **)**

创建一张新地图。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_force_update:

.. rst-class:: classref-method

void **map_force_update** **(** :ref:`RID<class_RID>` map **)**

该函数将立即强制指定的导航 ``map`` :ref:`RID<class_RID>` 的同步。默认情况下，导航地图仅在每个物理帧结束时同步。该函数可用于立即（重新）计算该导航地图的所有导航网格和区块连接。这使得可以在同一帧中对修改后的地图的导航路径立即执行查询（如果需要，可以执行多次）。

由于技术上的限制，当前的 NavigationServer 命令队列将被冲刷。这意味着所有已在当前物理帧中入队的更新命令都会被执行，即使是那些用于其他地图、不属于指定地图的区块和代理的更新命令。 昂贵计算的导航网格和地图的区块连接将仅针对指定地图进行。其他地图将在物理帧结束时接收正常同步。如果指定的地图在强制更新后又收到了修改，则它将在其他地图收到更新时再次更新。

避障处理和 ``safe_velocity`` 信号的分发不受该函数影响，仍继续发生在物理帧结束时的所有地图和代理上。

\ **注意：**\ 能力越大，责任越大。该函数仅该用于用户真正知道自己在做什么并且有充分理由的情况。强制立即更新导航地图需要锁定 NavigationServer 并冲刷整个 NavigationServer 命令队列。这不仅会严重影响游戏的性能，而且如果缺乏远见且使用不当，还会引入 bug。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_agents:

.. rst-class:: classref-method

:ref:`RID[]<class_RID>` **map_get_agents** **(** :ref:`RID<class_RID>` map **)** |const|

返回所有与请求的导航地图 ``map`` 关联的导航代理的 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_cell_size:

.. rst-class:: classref-method

:ref:`float<class_float>` **map_get_cell_size** **(** :ref:`RID<class_RID>` map **)** |const|

返回地图的单元格大小，用于将导航网格的顶点进行栅格化。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_closest_point:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **map_get_closest_point** **(** :ref:`RID<class_RID>` map, :ref:`Vector2<class_Vector2>` to_point **)** |const|

返回导航网格表面上与提供的 ``to_point`` 距离最近的点。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_closest_point_owner:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **map_get_closest_point_owner** **(** :ref:`RID<class_RID>` map, :ref:`Vector2<class_Vector2>` to_point **)** |const|

返回由 :ref:`map_get_closest_point<class_NavigationServer2D_method_map_get_closest_point>` 返回的点的所有者地区的 RID。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_edge_connection_margin:

.. rst-class:: classref-method

:ref:`float<class_float>` **map_get_edge_connection_margin** **(** :ref:`RID<class_RID>` map **)** |const|

返回地图的边界连接边距。边界连接边距是用于连接两个地区的距离。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_link_connection_radius:

.. rst-class:: classref-method

:ref:`float<class_float>` **map_get_link_connection_radius** **(** :ref:`RID<class_RID>` map **)** |const|

返回该地图的链接连接半径。该距离是任何链接将搜索要连接的导航网格多边形的最大范围。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_links:

.. rst-class:: classref-method

:ref:`RID[]<class_RID>` **map_get_links** **(** :ref:`RID<class_RID>` map **)** |const|

返回当前分配给请求的导航地图 ``map`` 的所有导航链接的 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_obstacles:

.. rst-class:: classref-method

:ref:`RID[]<class_RID>` **map_get_obstacles** **(** :ref:`RID<class_RID>` map **)** |const|

返回当前分配给请求的导航地图 ``map`` 的所有导航障碍物的 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_path:

.. rst-class:: classref-method

:ref:`PackedVector2Array<class_PackedVector2Array>` **map_get_path** **(** :ref:`RID<class_RID>` map, :ref:`Vector2<class_Vector2>` origin, :ref:`Vector2<class_Vector2>` destination, :ref:`bool<class_bool>` optimize, :ref:`int<class_int>` navigation_layers=1 **)** |const|

返回从原点到达目的地的导航路径。\ ``navigation_layers`` 是被允许在路径中的所有区块导航层的位掩码。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_regions:

.. rst-class:: classref-method

:ref:`RID[]<class_RID>` **map_get_regions** **(** :ref:`RID<class_RID>` map **)** |const|

返回当前分配给所请求的导航 ``map`` 的所有导航区块的 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_get_use_edge_connections:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **map_get_use_edge_connections** **(** :ref:`RID<class_RID>` map **)** |const|

返回是否允许导航地图 ``map`` 使用边缘连接与位于导航地图边缘连接边距范围内的其他导航区块相连接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_is_active:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **map_is_active** **(** :ref:`RID<class_RID>` map **)** |const|

如果地图处于活动状态，则返回 true。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_set_active:

.. rst-class:: classref-method

void **map_set_active** **(** :ref:`RID<class_RID>` map, :ref:`bool<class_bool>` active **)**

设置地图的激活态。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_set_cell_size:

.. rst-class:: classref-method

void **map_set_cell_size** **(** :ref:`RID<class_RID>` map, :ref:`float<class_float>` cell_size **)**

设置用于栅格化导航网格顶点的地图单元格大小。必须与所使用的导航网格单元格大小相匹配。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_set_edge_connection_margin:

.. rst-class:: classref-method

void **map_set_edge_connection_margin** **(** :ref:`RID<class_RID>` map, :ref:`float<class_float>` margin **)**

设置用于焊接兼容地区边界的地图边界连接边距。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_set_link_connection_radius:

.. rst-class:: classref-method

void **map_set_link_connection_radius** **(** :ref:`RID<class_RID>` map, :ref:`float<class_float>` radius **)**

设置该地图用于连接链接和导航多边形的链接连接半径。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_map_set_use_edge_connections:

.. rst-class:: classref-method

void **map_set_use_edge_connections** **(** :ref:`RID<class_RID>` map, :ref:`bool<class_bool>` enabled **)**

设置导航地图 ``map`` 的边缘连接使用情况。如果 ``enabled`` 为 ``true``\ ，则导航地图允许导航区块使用边缘连接与位于导航地图边缘连接边距范围内的其他导航区块相连接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_create:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **obstacle_create** **(** **)**

新建导航障碍物。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_get_avoidance_enabled:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **obstacle_get_avoidance_enabled** **(** :ref:`RID<class_RID>` obstacle **)** |const|

如果给定的 ``obstacle`` 启用了避障，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_get_map:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **obstacle_get_map** **(** :ref:`RID<class_RID>` obstacle **)** |const|

返回请求的障碍物 ``obstacle`` 当前分配的导航地图 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_get_paused:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **obstacle_get_paused** **(** :ref:`RID<class_RID>` obstacle **)** |const|

如果指定的 ``obstacle`` 被暂停，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_avoidance_enabled:

.. rst-class:: classref-method

void **obstacle_set_avoidance_enabled** **(** :ref:`RID<class_RID>` obstacle, :ref:`bool<class_bool>` enabled **)**

如果 ``enabled`` 为 ``true``\ ，则提供的障碍物 ``obstacle`` 会影响使用代理的避障。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_avoidance_layers:

.. rst-class:: classref-method

void **obstacle_set_avoidance_layers** **(** :ref:`RID<class_RID>` obstacle, :ref:`int<class_int>` layers **)**

设置障碍物的避障层 ``avoidance_layers`` 位掩码。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_map:

.. rst-class:: classref-method

void **obstacle_set_map** **(** :ref:`RID<class_RID>` obstacle, :ref:`RID<class_RID>` map **)**

为障碍物设置导航地图 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_paused:

.. rst-class:: classref-method

void **obstacle_set_paused** **(** :ref:`RID<class_RID>` obstacle, :ref:`bool<class_bool>` paused **)**

如果 ``paused`` 为 true，则不会处理指定的障碍物 ``obstacle``\ ，例如不会影响避障速度。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_position:

.. rst-class:: classref-method

void **obstacle_set_position** **(** :ref:`RID<class_RID>` obstacle, :ref:`Vector2<class_Vector2>` position **)**

设置障碍物在世界空间中的位置。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_radius:

.. rst-class:: classref-method

void **obstacle_set_radius** **(** :ref:`RID<class_RID>` obstacle, :ref:`float<class_float>` radius **)**

设置动态障碍物的半径。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_velocity:

.. rst-class:: classref-method

void **obstacle_set_velocity** **(** :ref:`RID<class_RID>` obstacle, :ref:`Vector2<class_Vector2>` velocity **)**

将动态障碍物 ``obstacle`` 的速度设置为 ``velocity``\ 。能够让其他代理更好地预测该动态障碍物的移动。仅在与障碍物半径一同使用时有效。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_obstacle_set_vertices:

.. rst-class:: classref-method

void **obstacle_set_vertices** **(** :ref:`RID<class_RID>` obstacle, :ref:`PackedVector2Array<class_PackedVector2Array>` vertices **)**

设置障碍物的轮廓顶点。如果顶点顺时针缠绕，则障碍物会将代理向内部推挤，否则向外推挤。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_parse_source_geometry_data:

.. rst-class:: classref-method

void **parse_source_geometry_data** **(** :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon, :ref:`NavigationMeshSourceGeometryData2D<class_NavigationMeshSourceGeometryData2D>` source_geometry_data, :ref:`Node<class_Node>` root_node, :ref:`Callable<class_Callable>` callback=Callable() **)**

根据 ``navigation_polygon`` 的属性解析 :ref:`SceneTree<class_SceneTree>` 中的源几何体。会使用解析的结果数据对提供的 ``source_geometry_data`` 资源进行更新。后续可以在使用 :ref:`bake_from_source_geometry_data<class_NavigationServer2D_method_bake_from_source_geometry_data>` 烘焙导航网格时使用该资源。解析过程完成后，会调用可选的 ``callback``\ 。

\ **注意：**\ 因为 SceneTree 并不是线程安全的，所以这个函数需要在主线程执行或使用延迟调用。

\ **性能：**\ 从 :ref:`Mesh<class_Mesh>` 资源读取数据数组虽然很方便，但会对帧率造成负面影响。这些数据需要从 GPU 获取，卡住正在处理的 :ref:`RenderingServer<class_RenderingServer>`\ 。出于性能考量，请优先使用碰撞形状或在完全在代码中创建数据数组。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_query_path:

.. rst-class:: classref-method

void **query_path** **(** :ref:`NavigationPathQueryParameters2D<class_NavigationPathQueryParameters2D>` parameters, :ref:`NavigationPathQueryResult2D<class_NavigationPathQueryResult2D>` result **)** |const|

在给定导航地图中查询路径。起点、目标点以及其他参数通过 :ref:`NavigationPathQueryParameters2D<class_NavigationPathQueryParameters2D>` 定义。会使用路径和其他查询中请求的信息更新提供的 :ref:`NavigationPathQueryResult2D<class_NavigationPathQueryResult2D>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_create:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **region_create** **(** **)**

创建一个新的地区。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_connection_pathway_end:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **region_get_connection_pathway_end** **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` connection **)** |const|

返回连接门的终点。\ ``connection`` 是一个索引，介于 0 和 :ref:`region_get_connections_count<class_NavigationServer2D_method_region_get_connections_count>` 的返回值之间。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_connection_pathway_start:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **region_get_connection_pathway_start** **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` connection **)** |const|

返回连接门的起点。\ ``connection`` 是一个索引，介于 0 和 :ref:`region_get_connections_count<class_NavigationServer2D_method_region_get_connections_count>` 的返回值之间。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_connections_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **region_get_connections_count** **(** :ref:`RID<class_RID>` region **)** |const|

返回 ``region`` 地区与其他地区在地图上有多少连接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_enabled:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **region_get_enabled** **(** :ref:`RID<class_RID>` region **)** |const|

如果指定的 ``region`` 已启用，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_enter_cost:

.. rst-class:: classref-method

:ref:`float<class_float>` **region_get_enter_cost** **(** :ref:`RID<class_RID>` region **)** |const|

返回 ``region`` 地区的进入消耗。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_map:

.. rst-class:: classref-method

:ref:`RID<class_RID>` **region_get_map** **(** :ref:`RID<class_RID>` region **)** |const|

返回请求的 ``region`` 地区所关联的导航地图的 :ref:`RID<class_RID>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_navigation_layers:

.. rst-class:: classref-method

:ref:`int<class_int>` **region_get_navigation_layers** **(** :ref:`RID<class_RID>` region **)** |const|

返回该地区的导航层。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_owner_id:

.. rst-class:: classref-method

:ref:`int<class_int>` **region_get_owner_id** **(** :ref:`RID<class_RID>` region **)** |const|

返回管理该地区对象的 ``ObjectID``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_travel_cost:

.. rst-class:: classref-method

:ref:`float<class_float>` **region_get_travel_cost** **(** :ref:`RID<class_RID>` region **)** |const|

返回 ``region`` 地区的移动消耗。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_get_use_edge_connections:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **region_get_use_edge_connections** **(** :ref:`RID<class_RID>` region **)** |const|

返回导航区块 ``region`` 是否被设置为使用边缘连接与位于导航地图边缘连接边距范围内的其他导航区块相连接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_owns_point:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **region_owns_point** **(** :ref:`RID<class_RID>` region, :ref:`Vector2<class_Vector2>` point **)** |const|

如果提供的世界空间中的 ``point`` 当前由提供的导航区块 ``region`` 拥有，则返回 ``true``\ 。在这里的上下文中，“拥有”意味着与来自其他导航区块的所有其他导航网格相比，该区块的导航网格多边形面中有一个距离该点最近的可能位置，这些其他导航区块也已在提供的区块的导航地图上注册。

如果有多个导航网格存在符合条件的位置并且距离相等，那么其多边形先被处理的导航区块将赢得所有权。多边形的处理顺序与导航区块在 NavigationServer 上的注册顺序一致。

\ **注意：**\ 如果来自不同导航区块的导航网格存在重叠（通常应当避免），可能会得到预料之外的结果。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_enabled:

.. rst-class:: classref-method

void **region_set_enabled** **(** :ref:`RID<class_RID>` region, :ref:`bool<class_bool>` enabled **)**

如果 ``enabled`` 为 ``true``\ ，则指定的 ``region`` 会在它的当前导航地图中生效。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_enter_cost:

.. rst-class:: classref-method

void **region_set_enter_cost** **(** :ref:`RID<class_RID>` region, :ref:`float<class_float>` enter_cost **)**

设置 ``region`` 地区的进入消耗 ``enter_cost``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_map:

.. rst-class:: classref-method

void **region_set_map** **(** :ref:`RID<class_RID>` region, :ref:`RID<class_RID>` map **)**

设置该地区的地图。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_navigation_layers:

.. rst-class:: classref-method

void **region_set_navigation_layers** **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` navigation_layers **)**

设置地区的导航层。能够在路径请求中选择地区（使用 :ref:`map_get_path<class_NavigationServer2D_method_map_get_path>` 时）。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_navigation_polygon:

.. rst-class:: classref-method

void **region_set_navigation_polygon** **(** :ref:`RID<class_RID>` region, :ref:`NavigationPolygon<class_NavigationPolygon>` navigation_polygon **)**

设置该地区的导航多边形 ``navigation_polygon``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_owner_id:

.. rst-class:: classref-method

void **region_set_owner_id** **(** :ref:`RID<class_RID>` region, :ref:`int<class_int>` owner_id **)**

设置管理该地区对象的 ``ObjectID``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_transform:

.. rst-class:: classref-method

void **region_set_transform** **(** :ref:`RID<class_RID>` region, :ref:`Transform2D<class_Transform2D>` transform **)**

设置该地区的全局变换。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_travel_cost:

.. rst-class:: classref-method

void **region_set_travel_cost** **(** :ref:`RID<class_RID>` region, :ref:`float<class_float>` travel_cost **)**

设置 ``region`` 地区的移动消耗 ``travel_cost``\ 。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_region_set_use_edge_connections:

.. rst-class:: classref-method

void **region_set_use_edge_connections** **(** :ref:`RID<class_RID>` region, :ref:`bool<class_bool>` enabled **)**

如果 ``enabled`` 为 ``true``\ ，则导航区块 ``region`` 将使用边缘连接来与位于导航地图边缘连接边距范围内的其他导航区块相连接。

.. rst-class:: classref-item-separator

----

.. _class_NavigationServer2D_method_set_debug_enabled:

.. rst-class:: classref-method

void **set_debug_enabled** **(** :ref:`bool<class_bool>` enabled **)**

如果为 ``true``\ ，则该 NavigationServer 启用了调试模式。

.. |virtual| replace:: :abbr:`virtual (本方法通常需要用户覆盖才能生效。)`
.. |const| replace:: :abbr:`const (本方法没有副作用。不会修改该实例的任何成员变量。)`
.. |vararg| replace:: :abbr:`vararg (本方法除了在此处描述的参数外，还能够继续接受任意数量的参数。)`
.. |constructor| replace:: :abbr:`constructor (本方法用于构造某个类型。)`
.. |static| replace:: :abbr:`static (调用本方法无需实例，所以可以直接使用类名调用。)`
.. |operator| replace:: :abbr:`operator (本方法描述的是使用本类型作为左操作数的有效操作符。)`
.. |bitfield| replace:: :abbr:`BitField (这个值是由下列标志构成的位掩码整数。)`
