:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/4.2/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/4.2/doc/classes/Animation.xml.

.. _class_Animation:

Animation
=========

**继承：** :ref:`Resource<class_Resource>` **<** :ref:`RefCounted<class_RefCounted>` **<** :ref:`Object<class_Object>`

存放的是用于对引擎中的任何对象进行动画处理的数据。

.. rst-class:: classref-introduction-group

描述
----

这个资源存放的是用于对引擎中的任何对象进行动画处理的数据。动画分为轨道，轨道必须与节点关联。向轨道添加定时关键帧（事件）后，节点的状态可以随时间变化。


.. tabs::

 .. code-tab:: gdscript

    # 创建动画，让“Enemy”节点在 2.0 秒内
    # 向右移动 100 像素。
    var animation = Animation.new()
    var track_index = animation.add_track(Animation.TYPE_VALUE)
    animation.track_set_path(track_index, "Enemy:position:x")
    animation.track_insert_key(track_index, 0.0, 0)
    animation.track_insert_key(track_index, 2.0, 100)
    animation.length = 2.0

 .. code-tab:: csharp

    # 创建动画，让“Enemy”节点在 2.0 秒内
    # 向右移动 100 像素。
    var animation = new Animation();
    int trackIndex = animation.AddTrack(Animation.TrackType.Value);
    animation.TrackSetPath(trackIndex, "Enemy:position:x");
    animation.TrackInsertKey(trackIndex, 0.0f, 0);
    animation.TrackInsertKey(trackIndex, 2.0f, 100);
    animation.Length = 2.0f;



动画只是数据的容器，必须添加至 :ref:`AnimationPlayer<class_AnimationPlayer>` 等节点才能进行播放。动画轨道分为不同的类型，不同的类型有各自不同的专属方法。可用的类型请查看 :ref:`TrackType<enum_Animation_TrackType>`\ 。

\ **注意：**\ 对于 3D 的位置、旋转、缩放，推荐使用专门的 :ref:`TYPE_POSITION_3D<class_Animation_constant_TYPE_POSITION_3D>`\ 、\ :ref:`TYPE_ROTATION_3D<class_Animation_constant_TYPE_ROTATION_3D>`\ 、\ :ref:`TYPE_SCALE_3D<class_Animation_constant_TYPE_SCALE_3D>` 轨道类型，不要使用 :ref:`TYPE_VALUE<class_Animation_constant_TYPE_VALUE>`\ ，性能更高。

.. rst-class:: classref-introduction-group

教程
----

- :doc:`动画教程索引 <../tutorials/animation/index>`

.. rst-class:: classref-reftable-group

属性
----

.. table::
   :widths: auto

   +------------------------------------------+------------------------------------------------------+---------+
   | :ref:`float<class_float>`                | :ref:`length<class_Animation_property_length>`       | ``1.0`` |
   +------------------------------------------+------------------------------------------------------+---------+
   | :ref:`LoopMode<enum_Animation_LoopMode>` | :ref:`loop_mode<class_Animation_property_loop_mode>` | ``0``   |
   +------------------------------------------+------------------------------------------------------+---------+
   | :ref:`float<class_float>`                | :ref:`step<class_Animation_property_step>`           | ``0.1`` |
   +------------------------------------------+------------------------------------------------------+---------+

.. rst-class:: classref-reftable-group

方法
----

.. table::
   :widths: auto

   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`add_track<class_Animation_method_add_track>` **(** :ref:`TrackType<enum_Animation_TrackType>` type, :ref:`int<class_int>` at_position=-1 **)**                                                                                                                                                       |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`StringName<class_StringName>`                        | :ref:`animation_track_get_key_animation<class_Animation_method_animation_track_get_key_animation>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                      |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`animation_track_insert_key<class_Animation_method_animation_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`StringName<class_StringName>` animation **)**                                                                                            |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`animation_track_set_key_animation<class_Animation_method_animation_track_set_key_animation>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`StringName<class_StringName>` animation **)**                                                                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`audio_track_get_key_end_offset<class_Animation_method_audio_track_get_key_end_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                            |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`audio_track_get_key_start_offset<class_Animation_method_audio_track_get_key_start_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                        |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Resource<class_Resource>`                            | :ref:`audio_track_get_key_stream<class_Animation_method_audio_track_get_key_stream>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                    |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`audio_track_insert_key<class_Animation_method_audio_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Resource<class_Resource>` stream, :ref:`float<class_float>` start_offset=0, :ref:`float<class_float>` end_offset=0 **)**                         |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                                    | :ref:`audio_track_is_use_blend<class_Animation_method_audio_track_is_use_blend>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                       |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`audio_track_set_key_end_offset<class_Animation_method_audio_track_set_key_end_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**                                                                                                  |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`audio_track_set_key_start_offset<class_Animation_method_audio_track_set_key_start_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**                                                                                              |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`audio_track_set_key_stream<class_Animation_method_audio_track_set_key_stream>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Resource<class_Resource>` stream **)**                                                                                                    |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`audio_track_set_use_blend<class_Animation_method_audio_track_set_use_blend>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` enable **)**                                                                                                                                             |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                              | :ref:`bezier_track_get_key_in_handle<class_Animation_method_bezier_track_get_key_in_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                            |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector2<class_Vector2>`                              | :ref:`bezier_track_get_key_out_handle<class_Animation_method_bezier_track_get_key_out_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                          |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`bezier_track_get_key_value<class_Animation_method_bezier_track_get_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                    |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`bezier_track_insert_key<class_Animation_method_bezier_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`float<class_float>` value, :ref:`Vector2<class_Vector2>` in_handle=Vector2(0, 0), :ref:`Vector2<class_Vector2>` out_handle=Vector2(0, 0) **)** |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`bezier_track_interpolate<class_Animation_method_bezier_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time **)** |const|                                                                                                                                       |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`bezier_track_set_key_in_handle<class_Animation_method_bezier_track_set_key_in_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` in_handle, :ref:`float<class_float>` balanced_value_time_ratio=1.0 **)**                                  |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`bezier_track_set_key_out_handle<class_Animation_method_bezier_track_set_key_out_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` out_handle, :ref:`float<class_float>` balanced_value_time_ratio=1.0 **)**                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`bezier_track_set_key_value<class_Animation_method_bezier_track_set_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` value **)**                                                                                                           |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`blend_shape_track_insert_key<class_Animation_method_blend_shape_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`float<class_float>` amount **)**                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`blend_shape_track_interpolate<class_Animation_method_blend_shape_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                         |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`clear<class_Animation_method_clear>` **(** **)**                                                                                                                                                                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`compress<class_Animation_method_compress>` **(** :ref:`int<class_int>` page_size=8192, :ref:`int<class_int>` fps=120, :ref:`float<class_float>` split_tolerance=4.0 **)**                                                                                                                            |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`copy_track<class_Animation_method_copy_track>` **(** :ref:`int<class_int>` track_idx, :ref:`Animation<class_Animation>` to_animation **)**                                                                                                                                                           |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`find_track<class_Animation_method_find_track>` **(** :ref:`NodePath<class_NodePath>` path, :ref:`TrackType<enum_Animation_TrackType>` type **)** |const|                                                                                                                                             |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`get_track_count<class_Animation_method_get_track_count>` **(** **)** |const|                                                                                                                                                                                                                         |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`StringName<class_StringName>`                        | :ref:`method_track_get_name<class_Animation_method_method_track_get_name>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                              |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Array<class_Array>`                                  | :ref:`method_track_get_params<class_Animation_method_method_track_get_params>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                          |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`position_track_insert_key<class_Animation_method_position_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Vector3<class_Vector3>` position **)**                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector3<class_Vector3>`                              | :ref:`position_track_interpolate<class_Animation_method_position_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`remove_track<class_Animation_method_remove_track>` **(** :ref:`int<class_int>` track_idx **)**                                                                                                                                                                                                       |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`rotation_track_insert_key<class_Animation_method_rotation_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Quaternion<class_Quaternion>` rotation **)**                                                                                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Quaternion<class_Quaternion>`                        | :ref:`rotation_track_interpolate<class_Animation_method_rotation_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`scale_track_insert_key<class_Animation_method_scale_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Vector3<class_Vector3>` scale **)**                                                                                                              |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Vector3<class_Vector3>`                              | :ref:`scale_track_interpolate<class_Animation_method_scale_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`track_find_key<class_Animation_method_track_find_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`FindMode<enum_Animation_FindMode>` find_mode=0 **)** |const|                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                                    | :ref:`track_get_interpolation_loop_wrap<class_Animation_method_track_get_interpolation_loop_wrap>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`InterpolationType<enum_Animation_InterpolationType>` | :ref:`track_get_interpolation_type<class_Animation_method_track_get_interpolation_type>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`track_get_key_count<class_Animation_method_track_get_key_count>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                 |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`track_get_key_time<class_Animation_method_track_get_key_time>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                                    |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`float<class_float>`                                  | :ref:`track_get_key_transition<class_Animation_method_track_get_key_transition>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                        |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Variant<class_Variant>`                              | :ref:`track_get_key_value<class_Animation_method_track_get_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                                  |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`NodePath<class_NodePath>`                            | :ref:`track_get_path<class_Animation_method_track_get_path>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                           |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`TrackType<enum_Animation_TrackType>`                 | :ref:`track_get_type<class_Animation_method_track_get_type>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                           |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                                      | :ref:`track_insert_key<class_Animation_method_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Variant<class_Variant>` key, :ref:`float<class_float>` transition=1 **)**                                                                                    |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                                    | :ref:`track_is_compressed<class_Animation_method_track_is_compressed>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                 |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                                    | :ref:`track_is_enabled<class_Animation_method_track_is_enabled>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                       |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                                    | :ref:`track_is_imported<class_Animation_method_track_is_imported>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_move_down<class_Animation_method_track_move_down>` **(** :ref:`int<class_int>` track_idx **)**                                                                                                                                                                                                 |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_move_to<class_Animation_method_track_move_to>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` to_idx **)**                                                                                                                                                                       |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_move_up<class_Animation_method_track_move_up>` **(** :ref:`int<class_int>` track_idx **)**                                                                                                                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_remove_key<class_Animation_method_track_remove_key>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)**                                                                                                                                                                |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_remove_key_at_time<class_Animation_method_track_remove_key_at_time>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time **)**                                                                                                                                               |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_enabled<class_Animation_method_track_set_enabled>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                            |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_imported<class_Animation_method_track_set_imported>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` imported **)**                                                                                                                                                         |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_interpolation_loop_wrap<class_Animation_method_track_set_interpolation_loop_wrap>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` interpolation **)**                                                                                                                      |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_interpolation_type<class_Animation_method_track_set_interpolation_type>` **(** :ref:`int<class_int>` track_idx, :ref:`InterpolationType<enum_Animation_InterpolationType>` interpolation **)**                                                                                             |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_key_time<class_Animation_method_track_set_key_time>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` time **)**                                                                                                                            |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_key_transition<class_Animation_method_track_set_key_transition>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` transition **)**                                                                                                          |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_key_value<class_Animation_method_track_set_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key, :ref:`Variant<class_Variant>` value **)**                                                                                                                         |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_set_path<class_Animation_method_track_set_path>` **(** :ref:`int<class_int>` track_idx, :ref:`NodePath<class_NodePath>` path **)**                                                                                                                                                             |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`track_swap<class_Animation_method_track_swap>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` with_idx **)**                                                                                                                                                                           |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`UpdateMode<enum_Animation_UpdateMode>`               | :ref:`value_track_get_update_mode<class_Animation_method_value_track_get_update_mode>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                 |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Variant<class_Variant>`                              | :ref:`value_track_interpolate<class_Animation_method_value_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                                     |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | void                                                       | :ref:`value_track_set_update_mode<class_Animation_method_value_track_set_update_mode>` **(** :ref:`int<class_int>` track_idx, :ref:`UpdateMode<enum_Animation_UpdateMode>` mode **)**                                                                                                                      |
   +------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

枚举
----

.. _enum_Animation_TrackType:

.. rst-class:: classref-enumeration

enum **TrackType**:

.. _class_Animation_constant_TYPE_VALUE:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_VALUE** = ``0``

值轨道设置节点属性中的值，但仅限于那些可以被插值的属性。对于 3D 位置/旋转/缩放，出于性能原因，建议使用专用的 :ref:`TYPE_POSITION_3D<class_Animation_constant_TYPE_POSITION_3D>`\ 、\ :ref:`TYPE_ROTATION_3D<class_Animation_constant_TYPE_ROTATION_3D>` 和 :ref:`TYPE_SCALE_3D<class_Animation_constant_TYPE_SCALE_3D>` 轨道类型而不是 :ref:`TYPE_VALUE<class_Animation_constant_TYPE_VALUE>`\ 。

.. _class_Animation_constant_TYPE_POSITION_3D:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_POSITION_3D** = ``1``

3D 位置轨道（值存储在 :ref:`Vector3<class_Vector3>` 中）。

.. _class_Animation_constant_TYPE_ROTATION_3D:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_ROTATION_3D** = ``2``

3D 旋转轨道（值存储在 :ref:`Quaternion<class_Quaternion>` 中）。

.. _class_Animation_constant_TYPE_SCALE_3D:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_SCALE_3D** = ``3``

3D 缩放轨道（值存储在 :ref:`Vector3<class_Vector3>` 中）。

.. _class_Animation_constant_TYPE_BLEND_SHAPE:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_BLEND_SHAPE** = ``4``

混合形状轨道。

.. _class_Animation_constant_TYPE_METHOD:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_METHOD** = ``5``

方法轨道会在各个关键帧上使用给定参数的调用函数。

.. _class_Animation_constant_TYPE_BEZIER:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_BEZIER** = ``6``

贝塞尔轨道可以用来根据自定义曲线对数值进行插值。它们也可以用来对向量和颜色的子属性进行动画处理（例如 :ref:`Color<class_Color>` 的 Alpha 值）。

.. _class_Animation_constant_TYPE_AUDIO:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_AUDIO** = ``7``

音频轨道可以用来通过任意类型的 :ref:`AudioStreamPlayer<class_AudioStreamPlayer>` 播放音频流。该流可以在动画中进行修剪和预览。

.. _class_Animation_constant_TYPE_ANIMATION:

.. rst-class:: classref-enumeration-constant

:ref:`TrackType<enum_Animation_TrackType>` **TYPE_ANIMATION** = ``8``

动画轨道会在其他 :ref:`AnimationPlayer<class_AnimationPlayer>` 节点中播放动画。

.. rst-class:: classref-item-separator

----

.. _enum_Animation_InterpolationType:

.. rst-class:: classref-enumeration

enum **InterpolationType**:

.. _class_Animation_constant_INTERPOLATION_NEAREST:

.. rst-class:: classref-enumeration-constant

:ref:`InterpolationType<enum_Animation_InterpolationType>` **INTERPOLATION_NEAREST** = ``0``

无插值（最邻近的值）。

.. _class_Animation_constant_INTERPOLATION_LINEAR:

.. rst-class:: classref-enumeration-constant

:ref:`InterpolationType<enum_Animation_InterpolationType>` **INTERPOLATION_LINEAR** = ``1``

线性插值。

.. _class_Animation_constant_INTERPOLATION_CUBIC:

.. rst-class:: classref-enumeration-constant

:ref:`InterpolationType<enum_Animation_InterpolationType>` **INTERPOLATION_CUBIC** = ``2``

三次插值。这看起来比线性插值更平滑，但插值成本更高。对于从外部软件导入的复杂 3D 动画，坚持使用 :ref:`INTERPOLATION_LINEAR<class_Animation_constant_INTERPOLATION_LINEAR>`\ ，即使它需要使用更高的动画帧率作为回报。

.. _class_Animation_constant_INTERPOLATION_LINEAR_ANGLE:

.. rst-class:: classref-enumeration-constant

:ref:`InterpolationType<enum_Animation_InterpolationType>` **INTERPOLATION_LINEAR_ANGLE** = ``3``

具有最短路径旋转的线性插值。

\ **注意：**\ 结果值总是归一化的，可能与关键帧的值不匹配。

.. _class_Animation_constant_INTERPOLATION_CUBIC_ANGLE:

.. rst-class:: classref-enumeration-constant

:ref:`InterpolationType<enum_Animation_InterpolationType>` **INTERPOLATION_CUBIC_ANGLE** = ``4``

具有最短路径旋转的三次插值。

\ **注意：**\ 结果值总是归一化的，可能与关键帧的值不匹配。

.. rst-class:: classref-item-separator

----

.. _enum_Animation_UpdateMode:

.. rst-class:: classref-enumeration

enum **UpdateMode**:

.. _class_Animation_constant_UPDATE_CONTINUOUS:

.. rst-class:: classref-enumeration-constant

:ref:`UpdateMode<enum_Animation_UpdateMode>` **UPDATE_CONTINUOUS** = ``0``

在关键帧之间更新并保持值。

.. _class_Animation_constant_UPDATE_DISCRETE:

.. rst-class:: classref-enumeration-constant

:ref:`UpdateMode<enum_Animation_UpdateMode>` **UPDATE_DISCRETE** = ``1``

在关键帧更新。

.. _class_Animation_constant_UPDATE_CAPTURE:

.. rst-class:: classref-enumeration-constant

:ref:`UpdateMode<enum_Animation_UpdateMode>` **UPDATE_CAPTURE** = ``2``

与线性插值相同，但如果第一个关键帧不在第 0 秒，则会从当前值进行插值（即在运行时动态插值）。

.. rst-class:: classref-item-separator

----

.. _enum_Animation_LoopMode:

.. rst-class:: classref-enumeration

enum **LoopMode**:

.. _class_Animation_constant_LOOP_NONE:

.. rst-class:: classref-enumeration-constant

:ref:`LoopMode<enum_Animation_LoopMode>` **LOOP_NONE** = ``0``

在动画的两端，动画将停止播放。

.. _class_Animation_constant_LOOP_LINEAR:

.. rst-class:: classref-enumeration-constant

:ref:`LoopMode<enum_Animation_LoopMode>` **LOOP_LINEAR** = ``1``

在动画的两端，动画会在不改变播放方向的情况下重复播放。

.. _class_Animation_constant_LOOP_PINGPONG:

.. rst-class:: classref-enumeration-constant

:ref:`LoopMode<enum_Animation_LoopMode>` **LOOP_PINGPONG** = ``2``

在动画的两端重复进行播放和反向播放。

.. rst-class:: classref-item-separator

----

.. _enum_Animation_LoopedFlag:

.. rst-class:: classref-enumeration

enum **LoopedFlag**:

.. _class_Animation_constant_LOOPED_FLAG_NONE:

.. rst-class:: classref-enumeration-constant

:ref:`LoopedFlag<enum_Animation_LoopedFlag>` **LOOPED_FLAG_NONE** = ``0``

该标志指示动画在没有任何循环的情况下继续进行。

.. _class_Animation_constant_LOOPED_FLAG_END:

.. rst-class:: classref-enumeration-constant

:ref:`LoopedFlag<enum_Animation_LoopedFlag>` **LOOPED_FLAG_END** = ``1``

该标志表示动画已到达动画的末尾并且刚好在循环处理之后。

.. _class_Animation_constant_LOOPED_FLAG_START:

.. rst-class:: classref-enumeration-constant

:ref:`LoopedFlag<enum_Animation_LoopedFlag>` **LOOPED_FLAG_START** = ``2``

该标志表示动画已经到达动画的开始并且刚好在循环处理之后。

.. rst-class:: classref-item-separator

----

.. _enum_Animation_FindMode:

.. rst-class:: classref-enumeration

enum **FindMode**:

.. _class_Animation_constant_FIND_MODE_NEAREST:

.. rst-class:: classref-enumeration-constant

:ref:`FindMode<enum_Animation_FindMode>` **FIND_MODE_NEAREST** = ``0``

查找最近的时间键。

.. _class_Animation_constant_FIND_MODE_APPROX:

.. rst-class:: classref-enumeration-constant

:ref:`FindMode<enum_Animation_FindMode>` **FIND_MODE_APPROX** = ``1``

仅查找与时间相近的键。

.. _class_Animation_constant_FIND_MODE_EXACT:

.. rst-class:: classref-enumeration-constant

:ref:`FindMode<enum_Animation_FindMode>` **FIND_MODE_EXACT** = ``2``

仅查找与时间匹配的键。

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

属性说明
--------

.. _class_Animation_property_length:

.. rst-class:: classref-property

:ref:`float<class_float>` **length** = ``1.0``

.. rst-class:: classref-property-setget

- void **set_length** **(** :ref:`float<class_float>` value **)**
- :ref:`float<class_float>` **get_length** **(** **)**

动画的总长度（单位为秒）。

\ **注意：**\ 长度不以最后一个关键帧为界，因为这个关键帧可能位于结束前或结束后，以确保正确的插值和循环。

.. rst-class:: classref-item-separator

----

.. _class_Animation_property_loop_mode:

.. rst-class:: classref-property

:ref:`LoopMode<enum_Animation_LoopMode>` **loop_mode** = ``0``

.. rst-class:: classref-property-setget

- void **set_loop_mode** **(** :ref:`LoopMode<enum_Animation_LoopMode>` value **)**
- :ref:`LoopMode<enum_Animation_LoopMode>` **get_loop_mode** **(** **)**

确定动画播放期间动画时间轴两端的行为。 这用于动画循环的正确插值，以及提示播放器必须重新启动动画。

.. rst-class:: classref-item-separator

----

.. _class_Animation_property_step:

.. rst-class:: classref-property

:ref:`float<class_float>` **step** = ``0.1``

.. rst-class:: classref-property-setget

- void **set_step** **(** :ref:`float<class_float>` value **)**
- :ref:`float<class_float>` **get_step** **(** **)**

动画步长值。

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

方法说明
--------

.. _class_Animation_method_add_track:

.. rst-class:: classref-method

:ref:`int<class_int>` **add_track** **(** :ref:`TrackType<enum_Animation_TrackType>` type, :ref:`int<class_int>` at_position=-1 **)**

向动画添加轨道。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_animation_track_get_key_animation:

.. rst-class:: classref-method

:ref:`StringName<class_StringName>` **animation_track_get_key_animation** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键处的动画名称。\ ``track_idx`` 必须是动画轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_animation_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **animation_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`StringName<class_StringName>` animation **)**

在给定的 ``time``\ （以秒为单位）插入一个值为 ``animation`` 的键。\ ``track_idx`` 必须是动画轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_animation_track_set_key_animation:

.. rst-class:: classref-method

void **animation_track_set_key_animation** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`StringName<class_StringName>` animation **)**

将 ``key_idx`` 标识的键设置为值 ``animation``\ 。\ ``track_idx`` 必须是动画轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_get_key_end_offset:

.. rst-class:: classref-method

:ref:`float<class_float>` **audio_track_get_key_end_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键的结束偏移量。\ ``track_idx`` 必须是音频轨道的索引。

结束偏移量是在音频流结束时截断的秒数。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_get_key_start_offset:

.. rst-class:: classref-method

:ref:`float<class_float>` **audio_track_get_key_start_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键的起始偏移量。\ ``track_idx`` 必须是音频轨道的索引。

起始偏移量是在音频流开始时截断的秒数。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_get_key_stream:

.. rst-class:: classref-method

:ref:`Resource<class_Resource>` **audio_track_get_key_stream** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键的音频流。\ ``track_idx`` 必须是音频轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **audio_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Resource<class_Resource>` stream, :ref:`float<class_float>` start_offset=0, :ref:`float<class_float>` end_offset=0 **)**

在 ``time`` 秒处插入音频轨道关键帧。\ ``track_idx`` 必须是音频轨道的索引。

\ ``stream`` 是要播放的 :ref:`AudioStream<class_AudioStream>` 资源。\ ``start_offset`` 是音频流开头截断的秒数，而 ``end_offset`` 是在结尾处截断的秒数。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_is_use_blend:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **audio_track_is_use_blend** **(** :ref:`int<class_int>` track_idx **)** |const|

如果 ``track_idx`` 处的轨道将与其他动画混合，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_set_key_end_offset:

.. rst-class:: classref-method

void **audio_track_set_key_end_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**

将由 ``key_idx`` 标识的键的结束偏移量设置为值 ``offset``\ 。\ ``track_idx`` 必须是音频轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_set_key_start_offset:

.. rst-class:: classref-method

void **audio_track_set_key_start_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**

将由 ``key_idx`` 标识的键的起始偏移量设置为值 ``offset``\ 。\ ``track_idx`` 必须是音频轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_set_key_stream:

.. rst-class:: classref-method

void **audio_track_set_key_stream** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Resource<class_Resource>` stream **)**

将由 ``key_idx`` 标识的键的流设置为值 ``stream``\ 。\ ``track_idx`` 必须是音频轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_audio_track_set_use_blend:

.. rst-class:: classref-method

void **audio_track_set_use_blend** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` enable **)**

设置轨道是否将与其他动画混合。如果为 ``true``\ ，音频播放音量会根据混合值而变化。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_get_key_in_handle:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **bezier_track_get_key_in_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 识别的键的入点手柄，\ ``track_idx`` 必须是贝赛尔曲线轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_get_key_out_handle:

.. rst-class:: classref-method

:ref:`Vector2<class_Vector2>` **bezier_track_get_key_out_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 识别的键的出点手柄，\ ``track_idx`` 必须是贝赛尔曲线轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_get_key_value:

.. rst-class:: classref-method

:ref:`float<class_float>` **bezier_track_get_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 识别的键的值，\ ``track_idx`` 必须是贝塞尔轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **bezier_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`float<class_float>` value, :ref:`Vector2<class_Vector2>` in_handle=Vector2(0, 0), :ref:`Vector2<class_Vector2>` out_handle=Vector2(0, 0) **)**

在给定的时间 ``time`` 秒处插入贝塞尔轨道键。\ ``track_idx`` 必须是贝塞尔轨道的索引。

\ ``in_handle`` 是添加的贝塞尔曲线点的左侧权重，\ ``out_handle`` 是右侧权重，而 ``value`` 是这个点的实际值。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_interpolate:

.. rst-class:: classref-method

:ref:`float<class_float>` **bezier_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time **)** |const|

返回给定 ``time`` 处的插值（以秒为单位）。\ ``track_idx`` 必须是贝塞尔轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_set_key_in_handle:

.. rst-class:: classref-method

void **bezier_track_set_key_in_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` in_handle, :ref:`float<class_float>` balanced_value_time_ratio=1.0 **)**

将 ``key_idx`` 所标识的键的入点手柄设置为 ``in_handle`` 值。\ ``track_idx`` 必须是贝塞尔轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_set_key_out_handle:

.. rst-class:: classref-method

void **bezier_track_set_key_out_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` out_handle, :ref:`float<class_float>` balanced_value_time_ratio=1.0 **)**

将由 ``key_idx`` 确定的关键帧的出点手柄设置为 ``out_handle``\ 。参数 ``track_idx`` 必须是贝塞尔轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_bezier_track_set_key_value:

.. rst-class:: classref-method

void **bezier_track_set_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` value **)**

将 ``key_idx`` 所标识的键值设置为给定值。\ ``track_idx`` 必须是贝塞尔轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_blend_shape_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **blend_shape_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`float<class_float>` amount **)**

在给定的混合形状轨道中插入一个关键帧。返回键索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_blend_shape_track_interpolate:

.. rst-class:: classref-method

:ref:`float<class_float>` **blend_shape_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回位于给定时间（以秒为单位）的插值后的混合形状值。\ ``track_idx`` 必须是混合形状轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_clear:

.. rst-class:: classref-method

void **clear** **(** **)**

清除动画（清除所有轨道并重置所有）。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_compress:

.. rst-class:: classref-method

void **compress** **(** :ref:`int<class_int>` page_size=8192, :ref:`int<class_int>` fps=120, :ref:`float<class_float>` split_tolerance=4.0 **)**

就地压缩动画及其所有轨道。这将使 :ref:`track_is_compressed<class_Animation_method_track_is_compressed>` 一旦在这个 **Animation** 上被调用就会返回 ``true``\ 。压缩后的轨道在播放时需要更少的内存，并且这被设计用于从外部3D软件导入的复杂的3D动画（比如过场动画）。压缩是有损失的，但现实中通常不会注意到这种差异。

\ **注意：**\ 压缩轨道有各种限制（比如不能从编辑器中编辑），所以只有在你真正需要时才使用压缩动画。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_copy_track:

.. rst-class:: classref-method

void **copy_track** **(** :ref:`int<class_int>` track_idx, :ref:`Animation<class_Animation>` to_animation **)**

向 ``to_animation`` 添加一个新轨道，该轨道是该动画中给定轨道的副本。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_find_track:

.. rst-class:: classref-method

:ref:`int<class_int>` **find_track** **(** :ref:`NodePath<class_NodePath>` path, :ref:`TrackType<enum_Animation_TrackType>` type **)** |const|

返回指定轨迹的索引。如果没有找到，返回 -1。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_get_track_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_track_count** **(** **)** |const|

返回动画中的轨道数。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_method_track_get_name:

.. rst-class:: classref-method

:ref:`StringName<class_StringName>` **method_track_get_name** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回一个方法轨道的方法名。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_method_track_get_params:

.. rst-class:: classref-method

:ref:`Array<class_Array>` **method_track_get_params** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回给定方法轨道中给定键的方法要调用的参数值。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_position_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **position_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Vector3<class_Vector3>` position **)**

在给定的 3D 位置轨道中插入关键帧。返回该关键帧的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_position_track_interpolate:

.. rst-class:: classref-method

:ref:`Vector3<class_Vector3>` **position_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回位于给定时间（以秒为单位）的插值后的位置值。\ ``track_idx`` 必须是 3D 位置轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_remove_track:

.. rst-class:: classref-method

void **remove_track** **(** :ref:`int<class_int>` track_idx **)**

通过指定轨道索引来移除一个轨道。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_rotation_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **rotation_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Quaternion<class_Quaternion>` rotation **)**

在给定的 3D 旋转轨道中插入关键帧。返回该关键帧的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_rotation_track_interpolate:

.. rst-class:: classref-method

:ref:`Quaternion<class_Quaternion>` **rotation_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回位于给定时间（以秒为单位）的插值后的旋转值。\ ``track_idx`` 必须是 3D 旋转轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_scale_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **scale_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Vector3<class_Vector3>` scale **)**

在给定的 3D 缩放轨道中插入关键帧。返回该关键帧的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_scale_track_interpolate:

.. rst-class:: classref-method

:ref:`Vector3<class_Vector3>` **scale_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回位于给定时间（以秒为单位）的插值后的缩放值。\ ``track_idx`` 必须是 3D 缩放轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_find_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **track_find_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`FindMode<enum_Animation_FindMode>` find_mode=0 **)** |const|

按时间查找给定轨道中的关键帧索引。也可选择只在给定大约/准确时间的情况下查找。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_interpolation_loop_wrap:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **track_get_interpolation_loop_wrap** **(** :ref:`int<class_int>` track_idx **)** |const|

如果 ``track_idx`` 处的轨道环绕插值循环，则返回 ``true``\ 。新建的轨道默认都会环绕插值循环。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_interpolation_type:

.. rst-class:: classref-method

:ref:`InterpolationType<enum_Animation_InterpolationType>` **track_get_interpolation_type** **(** :ref:`int<class_int>` track_idx **)** |const|

返回给定轨道的插值类型。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_key_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **track_get_key_count** **(** :ref:`int<class_int>` track_idx **)** |const|

返回给定轨道中关键帧的数量。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_key_time:

.. rst-class:: classref-method

:ref:`float<class_float>` **track_get_key_time** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回关键帧所在的时间。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_key_transition:

.. rst-class:: classref-method

:ref:`float<class_float>` **track_get_key_transition** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回给定关键帧的过渡曲线（缓动）（见内置数学函数 :ref:`@GlobalScope.ease<class_@GlobalScope_method_ease>`\ ）。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_key_value:

.. rst-class:: classref-method

:ref:`Variant<class_Variant>` **track_get_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回给定轨道中给定关键帧的值。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_path:

.. rst-class:: classref-method

:ref:`NodePath<class_NodePath>` **track_get_path** **(** :ref:`int<class_int>` track_idx **)** |const|

获取轨道的路径。有关路径格式的详细信息，请参阅 :ref:`track_set_path<class_Animation_method_track_set_path>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_get_type:

.. rst-class:: classref-method

:ref:`TrackType<enum_Animation_TrackType>` **track_get_type** **(** :ref:`int<class_int>` track_idx **)** |const|

获取轨道的类型。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_insert_key:

.. rst-class:: classref-method

:ref:`int<class_int>` **track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Variant<class_Variant>` key, :ref:`float<class_float>` transition=1 **)**

在给定的轨道中插入一个通用关键帧。返回关键帧索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_is_compressed:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **track_is_compressed** **(** :ref:`int<class_int>` track_idx **)** |const|

如果轨道被压缩，则返回 ``true``\ ，否则返回 ``false``\ 。另见 :ref:`compress<class_Animation_method_compress>`\ 。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_is_enabled:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **track_is_enabled** **(** :ref:`int<class_int>` track_idx **)** |const|

如果启用了索引 ``track_idx`` 处的轨道，则返回 ``true``\ 。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_is_imported:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **track_is_imported** **(** :ref:`int<class_int>` track_idx **)** |const|

如果给定的轨道是被导入的，返回 ``true``\ 。否则返回 ``false``\ 。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_move_down:

.. rst-class:: classref-method

void **track_move_down** **(** :ref:`int<class_int>` track_idx **)**

将轨道下移。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_move_to:

.. rst-class:: classref-method

void **track_move_to** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` to_idx **)**

将轨道 ``track_idx`` 的索引位置改为 ``to_idx`` 中定义的位置。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_move_up:

.. rst-class:: classref-method

void **track_move_up** **(** :ref:`int<class_int>` track_idx **)**

将轨道上移。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_remove_key:

.. rst-class:: classref-method

void **track_remove_key** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)**

在指定的轨道上按索引移除一个键。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_remove_key_at_time:

.. rst-class:: classref-method

void **track_remove_key_at_time** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time **)**

在给定轨道中的 ``time`` 移除一个键。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_enabled:

.. rst-class:: classref-method

void **track_set_enabled** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` enabled **)**

启用/禁用给定的轨道。轨道默认为启用。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_imported:

.. rst-class:: classref-method

void **track_set_imported** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` imported **)**

将指定的轨道设置为导入或不导入。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_interpolation_loop_wrap:

.. rst-class:: classref-method

void **track_set_interpolation_loop_wrap** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` interpolation **)**

如果为 ``true``\ ，则 ``track_idx`` 处的轨道环绕插值循环。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_interpolation_type:

.. rst-class:: classref-method

void **track_set_interpolation_type** **(** :ref:`int<class_int>` track_idx, :ref:`InterpolationType<enum_Animation_InterpolationType>` interpolation **)**

设置指定轨道的插值类型。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_key_time:

.. rst-class:: classref-method

void **track_set_key_time** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` time **)**

设置现有关键帧的时间。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_key_transition:

.. rst-class:: classref-method

void **track_set_key_transition** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` transition **)**

设置指定关键帧的过渡曲线（缓动）（参阅内置数学函数 :ref:`@GlobalScope.ease<class_@GlobalScope_method_ease>`\ ）。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_key_value:

.. rst-class:: classref-method

void **track_set_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key, :ref:`Variant<class_Variant>` value **)**

设置现有关键帧的值。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_set_path:

.. rst-class:: classref-method

void **track_set_path** **(** :ref:`int<class_int>` track_idx, :ref:`NodePath<class_NodePath>` path **)**

设置轨道的路径。路径必须是指向场景树节点的有效路径，必须从将要实现动画的节点的父节点开始指定。控制属性或骨骼的轨道必须在路径后面加上它们的名字，用 ``":"`` 分隔。

例如，\ ``"character/skeleton:ankle"`` 或 ``"character/mesh:transform/local"``\ 。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_track_swap:

.. rst-class:: classref-method

void **track_swap** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` with_idx **)**

将轨道 ``track_idx`` 的索引位置与轨道 ``with_idx`` 的索引位置互换。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_value_track_get_update_mode:

.. rst-class:: classref-method

:ref:`UpdateMode<enum_Animation_UpdateMode>` **value_track_get_update_mode** **(** :ref:`int<class_int>` track_idx **)** |const|

返回值轨道的更新模式。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_value_track_interpolate:

.. rst-class:: classref-method

:ref:`Variant<class_Variant>` **value_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回位于给定时间（以秒为单位）的插值后的值。\ ``track_idx`` 必须是值轨道的索引。

.. rst-class:: classref-item-separator

----

.. _class_Animation_method_value_track_set_update_mode:

.. rst-class:: classref-method

void **value_track_set_update_mode** **(** :ref:`int<class_int>` track_idx, :ref:`UpdateMode<enum_Animation_UpdateMode>` mode **)**

设置值轨道的更新模式（请参阅 :ref:`UpdateMode<enum_Animation_UpdateMode>`\ ）。

.. |virtual| replace:: :abbr:`virtual (本方法通常需要用户覆盖才能生效。)`
.. |const| replace:: :abbr:`const (本方法没有副作用。不会修改该实例的任何成员变量。)`
.. |vararg| replace:: :abbr:`vararg (本方法除了在此处描述的参数外，还能够继续接受任意数量的参数。)`
.. |constructor| replace:: :abbr:`constructor (本方法用于构造某个类型。)`
.. |static| replace:: :abbr:`static (调用本方法无需实例，所以可以直接使用类名调用。)`
.. |operator| replace:: :abbr:`operator (本方法描述的是使用本类型作为左操作数的有效操作符。)`
.. |bitfield| replace:: :abbr:`BitField (这个值是由下列标志构成的位掩码整数。)`
