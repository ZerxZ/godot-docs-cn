:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/UndoRedo.xml.

.. _class_UndoRedo:

UndoRedo
========

**ç»§æ‰¿ï¼š** :ref:`Object<class_Object>`

ä¸ºå®ç°æ’¤é”€å’Œé‡åšæ“ä½œæä¾›é«˜é˜¶æ¥å£ã€‚

.. rst-class:: classref-introduction-group

æè¿°
----

UndoRedo çš„åŸç†æ˜¯åœ¨â€œåŠ¨ä½œâ€ä¸­æ³¨å†Œæ–¹æ³•å’Œå±æ€§çš„å˜åŒ–ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåŠ¨ä½œï¼Œç„¶åæä¾›æ‰§è¡Œï¼ˆdoï¼‰å’Œæ’¤é”€ï¼ˆundoï¼‰è¿™ä¸ªåŠ¨ä½œéœ€è¦è¿›è¡Œçš„å‡½æ•°è°ƒç”¨å’Œå±æ€§æ›´æ”¹ï¼Œç„¶åæäº¤è¯¥åŠ¨ä½œã€‚

åŠ¨ä½œæäº¤åå°±ä¼šæ‰§è¡Œæ‰€æœ‰ ``do_*`` æ–¹æ³•ã€‚å¦‚æœä½¿ç”¨ :ref:`undo<class_UndoRedo_method_undo>` æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œ ``undo_*`` æ–¹æ³•ã€‚å¦‚æœä½¿ç”¨ :ref:`redo<class_UndoRedo_method_redo>` æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šå†æ¬¡æ‰§è¡Œæ‰€æœ‰ ``do_*`` æ–¹æ³•ã€‚

ä»¥ä¸‹æ˜¯æ·»åŠ åŠ¨ä½œçš„ç¤ºä¾‹ï¼š


.. tabs::

 .. code-tab:: gdscript

    var undo_redo = UndoRedo.new()
    
    func do_something():
        pass # åœ¨æ­¤å¤„ç¼–å†™ä½ çš„ä»£ç ã€‚
    
    func undo_something():
        pass # åœ¨æ­¤å¤„ç¼–å†™æ¢å¤â€œdo_something()â€é‡Œæ‰€åšäº‹æƒ…çš„ä»£ç ã€‚
    
    func _on_my_button_pressed():
        var node = get_node("MyNode2D")
        undo_redo.create_action("ç§»åŠ¨èŠ‚ç‚¹")
        undo_redo.add_do_method(do_something)
        undo_redo.add_undo_method(undo_something)
        undo_redo.add_do_property(node, "position", Vector2(100,100))
        undo_redo.add_undo_property(node, "position", node.position)
        undo_redo.commit_action()

 .. code-tab:: csharp

    private UndoRedo _undoRedo;
    
    public override void _Ready()
    {
        _undoRedo = new UndoRedo();
    }
    
    public void DoSomething()
    {
        // åœ¨æ­¤å¤„ç¼–å†™ä½ çš„ä»£ç ã€‚
    }
    
    public void UndoSomething()
    {
        // åœ¨æ­¤å¤„ç¼–å†™æ¢å¤â€œDoSomething()â€é‡Œæ‰€åšäº‹æƒ…çš„ä»£ç ã€‚
    }
    
    private void OnMyButtonPressed()
    {
        var node = GetNode<Node2D>("MyNode2D");
        _undoRedo.CreateAction("ç§»åŠ¨èŠ‚ç‚¹");
        _undoRedo.AddDoMethod(new Callable(this, MethodName.DoSomething));
        _undoRedo.AddUndoMethod(new Callable(this, MethodName.UndoSomething));
        _undoRedo.AddDoProperty(node, "position", new Vector2(100, 100));
        _undoRedo.AddUndoProperty(node, "position", node.Position);
        _undoRedo.CommitAction();
    }



è°ƒç”¨ ``add_(un)do_*`` æ–¹æ³•ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆè°ƒç”¨ :ref:`create_action<class_UndoRedo_method_create_action>`\ ã€‚è°ƒç”¨ä¹‹ååˆ™éœ€è¦è°ƒç”¨ :ref:`commit_action<class_UndoRedo_method_commit_action>`\ ã€‚

å¦‚æœä½ ä¸éœ€è¦æ³¨å†Œæ–¹æ³•ï¼Œåˆ™å¯ä»¥å°† :ref:`add_do_method<class_UndoRedo_method_add_do_method>` å’Œ :ref:`add_undo_method<class_UndoRedo_method_add_undo_method>` çœå»ï¼›å±æ€§åŒç†ã€‚ä½ ä¹Ÿå¯ä»¥æ³¨å†Œå¤šä¸ªæ–¹æ³•/å±æ€§ã€‚

å¦‚æœä½ è¦åˆ¶ä½œ :ref:`EditorPlugin<class_EditorPlugin>`\ ï¼Œå¸Œæœ›é›†æˆç¼–è¾‘å™¨çš„æ’¤é”€å†å²ï¼Œè¯·æ”¹ç”¨ :ref:`EditorUndoRedoManager<class_EditorUndoRedoManager>`\ ã€‚

å¦‚æœä½ æ‰€æ³¨å†Œçš„ä¸åŒå±æ€§/æ–¹æ³•ä¹‹é—´æœ‰ç›¸äº’ä¾èµ–ï¼Œè¯·æ³¨æ„é»˜è®¤æƒ…å†µä¸‹æ’¤é”€æ“ä½œçš„è°ƒç”¨é¡ºåºå’Œæ·»åŠ é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚å› æ­¤è¯·ä¸è¦å°† do æ“ä½œå’Œ undo æ“ä½œå†™åœ¨ä¸€èµ·ï¼Œæœ€å¥½è¿˜æ˜¯å’Œä¸‹é¢ä¸€æ · do å’Œ do ä¸€èµ·å†™ï¼Œundo å’Œ undo ä¸€èµ·å†™ã€‚


.. tabs::

 .. code-tab:: gdscript

    undo_redo.create_action("æ·»åŠ å¯¹è±¡")
    
    # DO
    undo_redo.add_do_method(_create_object)
    undo_redo.add_do_method(_add_object_to_singleton)
    
    # UNDO
    undo_redo.add_undo_method(_remove_object_from_singleton)
    undo_redo.add_undo_method(_destroy_that_object)
    
    undo_redo.commit_action()

 .. code-tab:: csharp

    _undo_redo.CreateAction("æ·»åŠ å¯¹è±¡");
    
    // DO
    _undo_redo.AddDoMethod(new Callable(this, MethodName.CreateObject));
    _undo_redo.AddDoMethod(new Callable(this, MethodName.AddObjectToSingleton));
    
    // UNDO
    _undo_redo.AddUndoMethod(new Callable(this, MethodName.RemoveObjectFromSingleton));
    _undo_redo.AddUndoMethod(new Callable(this, MethodName.DestroyThatObject));
    
    _undo_redo.CommitAction();



.. rst-class:: classref-reftable-group

å±æ€§
----

.. table::
   :widths: auto

   +-----------------------+-----------------------------------------------------+-------+
   | :ref:`int<class_int>` | :ref:`max_steps<class_UndoRedo_property_max_steps>` | ``0`` |
   +-----------------------+-----------------------------------------------------+-------+

.. rst-class:: classref-reftable-group

æ–¹æ³•
----

.. table::
   :widths: auto

   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`add_do_method<class_UndoRedo_method_add_do_method>`\ (\ callable\: :ref:`Callable<class_Callable>`\ )                                                                                                          |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`add_do_property<class_UndoRedo_method_add_do_property>`\ (\ object\: :ref:`Object<class_Object>`, property\: :ref:`StringName<class_StringName>`, value\: :ref:`Variant<class_Variant>`\ )                     |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`add_do_reference<class_UndoRedo_method_add_do_reference>`\ (\ object\: :ref:`Object<class_Object>`\ )                                                                                                          |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`add_undo_method<class_UndoRedo_method_add_undo_method>`\ (\ callable\: :ref:`Callable<class_Callable>`\ )                                                                                                      |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`add_undo_property<class_UndoRedo_method_add_undo_property>`\ (\ object\: :ref:`Object<class_Object>`, property\: :ref:`StringName<class_StringName>`, value\: :ref:`Variant<class_Variant>`\ )                 |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`add_undo_reference<class_UndoRedo_method_add_undo_reference>`\ (\ object\: :ref:`Object<class_Object>`\ )                                                                                                      |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`clear_history<class_UndoRedo_method_clear_history>`\ (\ increase_version\: :ref:`bool<class_bool>` = true\ )                                                                                                   |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`commit_action<class_UndoRedo_method_commit_action>`\ (\ execute\: :ref:`bool<class_bool>` = true\ )                                                                                                            |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`create_action<class_UndoRedo_method_create_action>`\ (\ name\: :ref:`String<class_String>`, merge_mode\: :ref:`MergeMode<enum_UndoRedo_MergeMode>` = 0, backward_undo_ops\: :ref:`bool<class_bool>` = false\ ) |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`end_force_keep_in_merge_ends<class_UndoRedo_method_end_force_keep_in_merge_ends>`\ (\ )                                                                                                                        |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>` | :ref:`get_action_name<class_UndoRedo_method_get_action_name>`\ (\ id\: :ref:`int<class_int>`\ )                                                                                                                      |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`       | :ref:`get_current_action<class_UndoRedo_method_get_current_action>`\ (\ )                                                                                                                                            |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>` | :ref:`get_current_action_name<class_UndoRedo_method_get_current_action_name>`\ (\ ) |const|                                                                                                                          |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`       | :ref:`get_history_count<class_UndoRedo_method_get_history_count>`\ (\ )                                                                                                                                              |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`       | :ref:`get_version<class_UndoRedo_method_get_version>`\ (\ ) |const|                                                                                                                                                  |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`     | :ref:`has_redo<class_UndoRedo_method_has_redo>`\ (\ ) |const|                                                                                                                                                        |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`     | :ref:`has_undo<class_UndoRedo_method_has_undo>`\ (\ ) |const|                                                                                                                                                        |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`     | :ref:`is_committing_action<class_UndoRedo_method_is_committing_action>`\ (\ ) |const|                                                                                                                                |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`     | :ref:`redo<class_UndoRedo_method_redo>`\ (\ )                                                                                                                                                                        |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                      | :ref:`start_force_keep_in_merge_ends<class_UndoRedo_method_start_force_keep_in_merge_ends>`\ (\ )                                                                                                                    |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`     | :ref:`undo<class_UndoRedo_method_undo>`\ (\ )                                                                                                                                                                        |
   +-----------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

ä¿¡å·
----

.. _class_UndoRedo_signal_version_changed:

.. rst-class:: classref-signal

**version_changed**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_signal_version_changed>`

å½“ :ref:`undo<class_UndoRedo_method_undo>` æˆ– :ref:`redo<class_UndoRedo_method_redo>` è¢«è°ƒç”¨æ—¶è°ƒç”¨ã€‚

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æšä¸¾
----

.. _enum_UndoRedo_MergeMode:

.. rst-class:: classref-enumeration

enum **MergeMode**: :ref:`ğŸ”—<enum_UndoRedo_MergeMode>`

.. _class_UndoRedo_constant_MERGE_DISABLE:

.. rst-class:: classref-enumeration-constant

:ref:`MergeMode<enum_UndoRedo_MergeMode>` **MERGE_DISABLE** = ``0``

ä½¿â€œdoâ€/â€œundoâ€æ“ä½œä¿æŒåœ¨å•ç‹¬çš„åŠ¨ä½œä¸­ã€‚

.. _class_UndoRedo_constant_MERGE_ENDS:

.. rst-class:: classref-enumeration-constant

:ref:`MergeMode<enum_UndoRedo_MergeMode>` **MERGE_ENDS** = ``1``

Merges this action with the previous one if they have the same name. Keeps only the first action's "undo" operations and the last action's "do" operations. Useful for sequential changes to a single value.

.. _class_UndoRedo_constant_MERGE_ALL:

.. rst-class:: classref-enumeration-constant

:ref:`MergeMode<enum_UndoRedo_MergeMode>` **MERGE_ALL** = ``2``

Merges this action with the previous one if they have the same name.

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

å±æ€§è¯´æ˜
--------

.. _class_UndoRedo_property_max_steps:

.. rst-class:: classref-property

:ref:`int<class_int>` **max_steps** = ``0`` :ref:`ğŸ”—<class_UndoRedo_property_max_steps>`

.. rst-class:: classref-property-setget

- |void| **set_max_steps**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_max_steps**\ (\ )

æ’¤é”€/é‡åšå†å²ä¸­èƒ½å¤Ÿå­˜å‚¨çš„æœ€å¤§æ­¥æ•°ã€‚å¦‚æœå­˜å‚¨çš„æ­¥æ•°è¶…å‡ºäº†è¿™ä¸ªé™åˆ¶ï¼Œå°±ä¼šå°†æœ€æ—©çš„æ­¥éª¤ä»å†å²ä¸­ç§»é™¤ï¼Œæ— æ³•å†é€šè¿‡è°ƒç”¨ :ref:`undo<class_UndoRedo_method_undo>` åˆ°è¾¾ã€‚å°äºç­‰äº ``0`` è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ã€‚

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æ–¹æ³•è¯´æ˜
--------

.. _class_UndoRedo_method_add_do_method:

.. rst-class:: classref-method

|void| **add_do_method**\ (\ callable\: :ref:`Callable<class_Callable>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_add_do_method>`

æ³¨å†Œ :ref:`Callable<class_Callable>`\ ï¼Œä¼šåœ¨æäº¤åŠ¨ä½œæ—¶è°ƒç”¨ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_add_do_property:

.. rst-class:: classref-method

|void| **add_do_property**\ (\ object\: :ref:`Object<class_Object>`, property\: :ref:`StringName<class_StringName>`, value\: :ref:`Variant<class_Variant>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_add_do_property>`

æ³¨å†Œ ``property``\ ï¼Œä¼šåœ¨æäº¤åŠ¨ä½œæ—¶å°†å…¶å€¼æ›´æ”¹ä¸º ``value``\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_add_do_reference:

.. rst-class:: classref-method

|void| **add_do_reference**\ (\ object\: :ref:`Object<class_Object>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_add_do_reference>`

æ³¨å†Œå¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ é™¤â€œdoâ€å†å²æ—¶ä¼šæ“¦é™¤è¯¥å¼•ç”¨ã€‚é€‚ç”¨äºâ€œdoâ€åŠ¨ä½œæ·»åŠ çš„å¯¹è±¡å’Œâ€œundoâ€åŠ¨ä½œç§»é™¤çš„å¯¹è±¡ã€‚

åˆ é™¤â€œdoâ€å†å²æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡ä¸º :ref:`RefCounted<class_RefCounted>`\ ï¼Œåˆ™ä¼šè§£é™¤å¼•ç”¨ã€‚å¦åˆ™ä¼šæ‰§è¡Œé‡Šæ”¾ã€‚è¯·å‹¿ç”¨äºèµ„æºã€‚

::

    var node = Node2D.new()
    undo_redo.create_action("æ·»åŠ èŠ‚ç‚¹")
    undo_redo.add_do_method(add_child.bind(node))
    undo_redo.add_do_reference(node)
    undo_redo.add_undo_method(remove_child.bind(node))
    undo_redo.commit_action()

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_add_undo_method:

.. rst-class:: classref-method

|void| **add_undo_method**\ (\ callable\: :ref:`Callable<class_Callable>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_add_undo_method>`

æ³¨å†Œ :ref:`Callable<class_Callable>`\ ï¼Œä¼šåœ¨æ’¤é”€åŠ¨ä½œæ—¶è°ƒç”¨ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_add_undo_property:

.. rst-class:: classref-method

|void| **add_undo_property**\ (\ object\: :ref:`Object<class_Object>`, property\: :ref:`StringName<class_StringName>`, value\: :ref:`Variant<class_Variant>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_add_undo_property>`

æ³¨å†Œ ``property``\ ï¼Œä¼šåœ¨æ’¤é”€åŠ¨ä½œæ—¶å°†å…¶å€¼æ›´æ”¹ä¸º ``value``\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_add_undo_reference:

.. rst-class:: classref-method

|void| **add_undo_reference**\ (\ object\: :ref:`Object<class_Object>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_add_undo_reference>`

æ³¨å†Œå¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ é™¤â€œundoâ€å†å²æ—¶ä¼šæ“¦é™¤è¯¥å¼•ç”¨ã€‚é€‚ç”¨äºâ€œundoâ€åŠ¨ä½œæ·»åŠ çš„å¯¹è±¡å’Œâ€œdoâ€åŠ¨ä½œç§»é™¤çš„å¯¹è±¡ã€‚

åˆ é™¤â€œundoâ€å†å²æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡ä¸º :ref:`RefCounted<class_RefCounted>`\ ï¼Œåˆ™ä¼šè§£é™¤å¼•ç”¨ã€‚å¦åˆ™ä¼šæ‰§è¡Œé‡Šæ”¾ã€‚è¯·å‹¿ç”¨äºèµ„æºã€‚

::

    var node = $Node2D
    undo_redo.create_action("ç§»é™¤èŠ‚ç‚¹")
    undo_redo.add_do_method(remove_child.bind(node))
    undo_redo.add_undo_method(add_child.bind(node))
    undo_redo.add_undo_reference(node)
    undo_redo.commit_action()

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_clear_history:

.. rst-class:: classref-method

|void| **clear_history**\ (\ increase_version\: :ref:`bool<class_bool>` = true\ ) :ref:`ğŸ”—<class_UndoRedo_method_clear_history>`

æ¸…é™¤æ’¤é”€/é‡åšå†å²å’Œç›¸å…³çš„å¼•ç”¨ã€‚

å°† ``false`` ä¼ é€’ç»™ ``increase_version`` å°†é˜²æ­¢åœ¨æ¸…é™¤å†å²è®°å½•æ—¶å¢åŠ ç‰ˆæœ¬å·ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_commit_action:

.. rst-class:: classref-method

|void| **commit_action**\ (\ execute\: :ref:`bool<class_bool>` = true\ ) :ref:`ğŸ”—<class_UndoRedo_method_commit_action>`

æäº¤åŠ¨ä½œã€‚å¦‚æœ ``execute`` ä¸º ``true``\ ï¼ˆé»˜è®¤æƒ…å†µï¼‰ï¼Œåˆ™ä¼šåœ¨è°ƒç”¨æ­¤å‡½æ•°æ—¶è°ƒç”¨/è®¾ç½®æ‰€æœ‰â€œæ‰§è¡Œï¼ˆdoï¼‰â€æ–¹æ³•/å±æ€§ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_create_action:

.. rst-class:: classref-method

|void| **create_action**\ (\ name\: :ref:`String<class_String>`, merge_mode\: :ref:`MergeMode<enum_UndoRedo_MergeMode>` = 0, backward_undo_ops\: :ref:`bool<class_bool>` = false\ ) :ref:`ğŸ”—<class_UndoRedo_method_create_action>`

åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ¨ä½œã€‚è°ƒç”¨åï¼Œè¯·æ‰§è¡Œæ‰€æœ‰ä½ éœ€è¦çš„ :ref:`add_do_method<class_UndoRedo_method_add_do_method>`\ ã€\ :ref:`add_undo_method<class_UndoRedo_method_add_undo_method>`\ ã€\ :ref:`add_do_property<class_UndoRedo_method_add_do_property>` å’Œ :ref:`add_undo_property<class_UndoRedo_method_add_undo_property>` è°ƒç”¨ï¼Œç„¶åå†ç”¨ :ref:`commit_action<class_UndoRedo_method_commit_action>` æäº¤è¿™ä¸ªåŠ¨ä½œã€‚

åŠ¨ä½œçš„åˆå¹¶æ–¹å¼ç”± ``merge_mode`` å†³å®šã€‚è¯¦è§ :ref:`MergeMode<enum_UndoRedo_MergeMode>`\ ã€‚

åŠ¨ä½œä¸­æ’¤é”€æ“ä½œçš„é¡ºåºç”± ``backward_undo_ops`` å†³å®šã€‚\ ``backward_undo_ops`` ä¸º ``false`` æ—¶ï¼Œæ’¤é”€é€‰é¡¹çš„é¡ºåºå’Œæ·»åŠ é¡ºåºä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…ˆæ·»åŠ çš„æ“ä½œä¼šå…ˆæ’¤é”€ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_end_force_keep_in_merge_ends:

.. rst-class:: classref-method

|void| **end_force_keep_in_merge_ends**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_method_end_force_keep_in_merge_ends>`

åœæ­¢å°†æ“ä½œæ ‡è®°ä¸ºè¦å¤„ç†ï¼Œå³ä½¿è¯¥åŠ¨ä½œåœ¨ :ref:`MERGE_ENDS<class_UndoRedo_constant_MERGE_ENDS>` æ¨¡å¼ä¸‹ä¸å¦ä¸€ä¸ªåŠ¨ä½œåˆå¹¶ã€‚è¯·å‚é˜… :ref:`start_force_keep_in_merge_ends<class_UndoRedo_method_start_force_keep_in_merge_ends>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_get_action_name:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_action_name**\ (\ id\: :ref:`int<class_int>`\ ) :ref:`ğŸ”—<class_UndoRedo_method_get_action_name>`

æ ¹æ®ç´¢å¼•è·å–åŠ¨ä½œåç§°ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_get_current_action:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_current_action**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_method_get_current_action>`

è·å–å½“å‰åŠ¨ä½œçš„ç´¢å¼•ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_get_current_action_name:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_current_action_name**\ (\ ) |const| :ref:`ğŸ”—<class_UndoRedo_method_get_current_action_name>`

è·å–å½“å‰åŠ¨ä½œçš„åç§°ï¼Œç­‰ä»·äº ``get_action_name(get_current_action())``\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_get_history_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_history_count**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_method_get_history_count>`

è¿”å›å†å²ä¸­æœ‰å¤šå°‘å…ƒç´ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_get_version:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_version**\ (\ ) |const| :ref:`ğŸ”—<class_UndoRedo_method_get_version>`

è·å–ç‰ˆæœ¬ã€‚æ¯æ¬¡æäº¤ä¸€ä¸ªæ–°çš„æ“ä½œï¼Œ\ **UndoRedo** çš„ç‰ˆæœ¬å·éƒ½ä¼šè‡ªåŠ¨å¢åŠ ã€‚

è¿™ä¸»è¦ç”¨äºæ£€æŸ¥ä¿å­˜çš„ç‰ˆæœ¬æ˜¯å¦å‘ç”Ÿäº†æ›´æ”¹ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_has_redo:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **has_redo**\ (\ ) |const| :ref:`ğŸ”—<class_UndoRedo_method_has_redo>`

æœ‰â€œé‡åšâ€åŠ¨ä½œå¯ç”¨æ—¶è¿”å› ``true``\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_has_undo:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **has_undo**\ (\ ) |const| :ref:`ğŸ”—<class_UndoRedo_method_has_undo>`

æœ‰â€œæ’¤é”€â€åŠ¨ä½œå¯ç”¨æ—¶è¿”å› ``true``\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_is_committing_action:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **is_committing_action**\ (\ ) |const| :ref:`ğŸ”—<class_UndoRedo_method_is_committing_action>`

å¦‚æœ **UndoRedo** å½“å‰æ­£åœ¨æäº¤åŠ¨ä½œï¼Œå³è¿è¡Œå…¶â€œdoâ€çš„æ–¹æ³•æˆ–å±æ€§å˜åŒ–ï¼Œåˆ™è¿”å› ``true``\ ï¼ˆè¯·å‚é˜… :ref:`commit_action<class_UndoRedo_method_commit_action>`\ ï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_redo:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **redo**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_method_redo>`

é‡åšä¸Šä¸€ä¸ªåŠ¨ä½œã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_start_force_keep_in_merge_ends:

.. rst-class:: classref-method

|void| **start_force_keep_in_merge_ends**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_method_start_force_keep_in_merge_ends>`

æ ‡è®°è¦å¤„ç†çš„ä¸‹ä¸€ä¸ªâ€œæ‰§è¡Œâ€å’Œâ€œæ’¤æ¶ˆâ€æ“ä½œï¼Œå³ä½¿è¯¥åŠ¨ä½œåœ¨ :ref:`MERGE_ENDS<class_UndoRedo_constant_MERGE_ENDS>` æ¨¡å¼ä¸‹ä¸å¦ä¸€ä¸ªåŠ¨ä½œåˆå¹¶ã€‚ä½¿ç”¨ :ref:`end_force_keep_in_merge_ends<class_UndoRedo_method_end_force_keep_in_merge_ends>` è¿”å›åˆ°æ­£å¸¸æ“ä½œã€‚

.. rst-class:: classref-item-separator

----

.. _class_UndoRedo_method_undo:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **undo**\ (\ ) :ref:`ğŸ”—<class_UndoRedo_method_undo>`

æ’¤é”€ä¸Šä¸€ä¸ªåŠ¨ä½œã€‚

.. |virtual| replace:: :abbr:`virtual (æœ¬æ–¹æ³•é€šå¸¸éœ€è¦ç”¨æˆ·è¦†ç›–æ‰èƒ½ç”Ÿæ•ˆã€‚)`
.. |const| replace:: :abbr:`const (æœ¬æ–¹æ³•æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¸ä¼šä¿®æ”¹è¯¥å®ä¾‹çš„ä»»ä½•æˆå‘˜å˜é‡ã€‚)`
.. |vararg| replace:: :abbr:`vararg (æœ¬æ–¹æ³•é™¤äº†èƒ½æ¥å—åœ¨æ­¤å¤„æè¿°çš„å‚æ•°å¤–ï¼Œè¿˜èƒ½å¤Ÿç»§ç»­æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ã€‚)`
.. |constructor| replace:: :abbr:`constructor (æœ¬æ–¹æ³•ç”¨äºæ„é€ æŸä¸ªç±»å‹ã€‚)`
.. |static| replace:: :abbr:`static (è°ƒç”¨æœ¬æ–¹æ³•æ— éœ€å®ä¾‹ï¼Œå¯ç›´æ¥ä½¿ç”¨ç±»åè¿›è¡Œè°ƒç”¨ã€‚)`
.. |operator| replace:: :abbr:`operator (æœ¬æ–¹æ³•æè¿°çš„æ˜¯ä½¿ç”¨æœ¬ç±»å‹ä½œä¸ºå·¦æ“ä½œæ•°çš„æœ‰æ•ˆæ“ä½œç¬¦ã€‚)`
.. |bitfield| replace:: :abbr:`BitField (è¿™ä¸ªå€¼æ˜¯ç”±ä¸‹åˆ—æ ‡å¿—æ„æˆçš„ä½æ©ç æ•´æ•°ã€‚)`
.. |void| replace:: :abbr:`void (æ— è¿”å›å€¼ã€‚)`
