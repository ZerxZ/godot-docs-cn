:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/modules/websocket/doc_classes/WebSocketPeer.xml.

.. _class_WebSocketPeer:

WebSocketPeer
=============

**ç»§æ‰¿ï¼š** :ref:`PacketPeer<class_PacketPeer>` **<** :ref:`RefCounted<class_RefCounted>` **<** :ref:`Object<class_Object>`

WebSocket è¿æ¥ã€‚

.. rst-class:: classref-introduction-group

æè¿°
----

è¿™ä¸ªç±»ä»£è¡¨ WebSocket è¿æ¥ï¼Œå¯ä»¥ç”¨ä½œ WebSocket å®¢æˆ·ç«¯ï¼ˆå…¼å®¹ RFC 6455ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œ WebSocket æœåŠ¡å™¨çš„è¿œç¨‹å¯¹ç­‰ä½“ã€‚

å‘é€ WebSocket äºŒè¿›åˆ¶å¸§è¯·ä½¿ç”¨ :ref:`PacketPeer.put_packet<class_PacketPeer_method_put_packet>`\ ï¼Œå‘é€ WebSocket æ–‡æœ¬å¸§è¯·ä½¿ç”¨ :ref:`send<class_WebSocketPeer_method_send>`\ ï¼ˆä¸åŸºäºæ–‡æœ¬çš„ API äº¤äº’æ—¶è¯·ä¼˜å…ˆé€‰æ‹©æ–‡æœ¬å¸§ï¼‰ã€‚å¯ä»¥é€šè¿‡ :ref:`was_string_packet<class_WebSocketPeer_method_was_string_packet>` æ£€æŸ¥æœ€è¿‘ä¸€ä¸ªæ•°æ®åŒ…çš„å¸§ç±»å‹ã€‚

å¼€å¯ WebSocket å®¢æˆ·ç«¯çš„æ–¹æ³•æ˜¯ï¼šé¦–å…ˆè°ƒç”¨ :ref:`connect_to_url<class_WebSocketPeer_method_connect_to_url>`\ ï¼Œç„¶åå®šæœŸè°ƒç”¨ :ref:`poll<class_WebSocketPeer_method_poll>`\ ï¼ˆä¾‹å¦‚åœ¨ :ref:`Node<class_Node>` çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼‰ã€‚æŸ¥è¯¢å¥—æ¥å­—çš„çŠ¶æ€è¯·ä½¿ç”¨ :ref:`get_ready_state<class_WebSocketPeer_method_get_ready_state>`\ ï¼Œè·å–æŒ‚èµ·çš„æ•°æ®åŒ…æ•°é‡è¯·ä½¿ç”¨ :ref:`PacketPeer.get_available_packet_count<class_PacketPeer_method_get_available_packet_count>`\ ï¼Œè·å–æŒ‚èµ·çš„æ•°æ®åŒ…è¯·ä½¿ç”¨ :ref:`PacketPeer.get_packet<class_PacketPeer_method_get_packet>`\ ã€‚


.. tabs::

 .. code-tab:: gdscript

    extends Node
    
    var socket = WebSocketPeer.new()
    
    func _ready():
        socket.connect_to_url("wss://example.com")
    
    func _process(delta):
        socket.poll()
        var state = socket.get_ready_state()
        if state == WebSocketPeer.STATE_OPEN:
            while socket.get_available_packet_count():
                print("æ•°æ®åŒ…ï¼š", socket.get_packet())
        elif state == WebSocketPeer.STATE_CLOSING:
            # ç»§ç»­è½®è¯¢æ‰èƒ½æ­£ç¡®å…³é—­ã€‚
            pass
        elif state == WebSocketPeer.STATE_CLOSED:
            var code = socket.get_close_code()
            var reason = socket.get_close_reason()
            print("WebSocket å·²å…³é—­ï¼Œä»£ç ï¼š%dï¼ŒåŸå›  %sã€‚å¹²å‡€å¾—ä½“ï¼š%s" % [code, reason, code != -1])
            set_process(false) # åœæ­¢å¤„ç†ã€‚



å¦‚æœè¦ä½œä¸º WebSocket æœåŠ¡å™¨çš„å¯¹ç­‰ä½“ä½¿ç”¨ï¼Œè¯·å‚è€ƒ :ref:`accept_stream<class_WebSocketPeer_method_accept_stream>` åŠåœ¨çº¿æ•™ç¨‹ã€‚

.. rst-class:: classref-reftable-group

å±æ€§
----

.. table::
   :widths: auto

   +---------------------------------------------------+--------------------------------------------------------------------------------+-------------------------+
   | :ref:`PackedStringArray<class_PackedStringArray>` | :ref:`handshake_headers<class_WebSocketPeer_property_handshake_headers>`       | ``PackedStringArray()`` |
   +---------------------------------------------------+--------------------------------------------------------------------------------+-------------------------+
   | :ref:`int<class_int>`                             | :ref:`inbound_buffer_size<class_WebSocketPeer_property_inbound_buffer_size>`   | ``65535``               |
   +---------------------------------------------------+--------------------------------------------------------------------------------+-------------------------+
   | :ref:`int<class_int>`                             | :ref:`max_queued_packets<class_WebSocketPeer_property_max_queued_packets>`     | ``2048``                |
   +---------------------------------------------------+--------------------------------------------------------------------------------+-------------------------+
   | :ref:`int<class_int>`                             | :ref:`outbound_buffer_size<class_WebSocketPeer_property_outbound_buffer_size>` | ``65535``               |
   +---------------------------------------------------+--------------------------------------------------------------------------------+-------------------------+
   | :ref:`PackedStringArray<class_PackedStringArray>` | :ref:`supported_protocols<class_WebSocketPeer_property_supported_protocols>`   | ``PackedStringArray()`` |
   +---------------------------------------------------+--------------------------------------------------------------------------------+-------------------------+

.. rst-class:: classref-reftable-group

æ–¹æ³•
----

.. table::
   :widths: auto

   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`  | :ref:`accept_stream<class_WebSocketPeer_method_accept_stream>`\ (\ stream\: :ref:`StreamPeer<class_StreamPeer>`\ )                                                           |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                                 | :ref:`close<class_WebSocketPeer_method_close>`\ (\ code\: :ref:`int<class_int>` = 1000, reason\: :ref:`String<class_String>` = ""\ )                                         |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`  | :ref:`connect_to_url<class_WebSocketPeer_method_connect_to_url>`\ (\ url\: :ref:`String<class_String>`, tls_client_options\: :ref:`TLSOptions<class_TLSOptions>` = null\ )   |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                  | :ref:`get_close_code<class_WebSocketPeer_method_get_close_code>`\ (\ ) |const|                                                                                               |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>`            | :ref:`get_close_reason<class_WebSocketPeer_method_get_close_reason>`\ (\ ) |const|                                                                                           |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>`            | :ref:`get_connected_host<class_WebSocketPeer_method_get_connected_host>`\ (\ ) |const|                                                                                       |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                  | :ref:`get_connected_port<class_WebSocketPeer_method_get_connected_port>`\ (\ ) |const|                                                                                       |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                  | :ref:`get_current_outbound_buffered_amount<class_WebSocketPeer_method_get_current_outbound_buffered_amount>`\ (\ ) |const|                                                   |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`State<enum_WebSocketPeer_State>` | :ref:`get_ready_state<class_WebSocketPeer_method_get_ready_state>`\ (\ ) |const|                                                                                             |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>`            | :ref:`get_requested_url<class_WebSocketPeer_method_get_requested_url>`\ (\ ) |const|                                                                                         |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>`            | :ref:`get_selected_protocol<class_WebSocketPeer_method_get_selected_protocol>`\ (\ ) |const|                                                                                 |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                                 | :ref:`poll<class_WebSocketPeer_method_poll>`\ (\ )                                                                                                                           |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`  | :ref:`send<class_WebSocketPeer_method_send>`\ (\ message\: :ref:`PackedByteArray<class_PackedByteArray>`, write_mode\: :ref:`WriteMode<enum_WebSocketPeer_WriteMode>` = 1\ ) |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`  | :ref:`send_text<class_WebSocketPeer_method_send_text>`\ (\ message\: :ref:`String<class_String>`\ )                                                                          |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                                 | :ref:`set_no_delay<class_WebSocketPeer_method_set_no_delay>`\ (\ enabled\: :ref:`bool<class_bool>`\ )                                                                        |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`                | :ref:`was_string_packet<class_WebSocketPeer_method_was_string_packet>`\ (\ ) |const|                                                                                         |
   +----------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æšä¸¾
----

.. _enum_WebSocketPeer_WriteMode:

.. rst-class:: classref-enumeration

enum **WriteMode**: :ref:`ğŸ”—<enum_WebSocketPeer_WriteMode>`

.. _class_WebSocketPeer_constant_WRITE_MODE_TEXT:

.. rst-class:: classref-enumeration-constant

:ref:`WriteMode<enum_WebSocketPeer_WriteMode>` **WRITE_MODE_TEXT** = ``0``

æŒ‡å®š WebSockets æ¶ˆæ¯åº”ä½œä¸ºæ–‡æœ¬æœ‰æ•ˆè½½è·ä¼ è¾“ï¼ˆåªå…è®¸æœ‰æ•ˆçš„ UTF-8ï¼‰ã€‚

.. _class_WebSocketPeer_constant_WRITE_MODE_BINARY:

.. rst-class:: classref-enumeration-constant

:ref:`WriteMode<enum_WebSocketPeer_WriteMode>` **WRITE_MODE_BINARY** = ``1``

æŒ‡å®š WebSockets æ¶ˆæ¯åº”ä»¥äºŒè¿›åˆ¶æœ‰æ•ˆè½½è·çš„å½¢å¼ä¼ è¾“ï¼ˆå…è®¸ä»»ä½•å­—èŠ‚ç»„åˆï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _enum_WebSocketPeer_State:

.. rst-class:: classref-enumeration

enum **State**: :ref:`ğŸ”—<enum_WebSocketPeer_State>`

.. _class_WebSocketPeer_constant_STATE_CONNECTING:

.. rst-class:: classref-enumeration-constant

:ref:`State<enum_WebSocketPeer_State>` **STATE_CONNECTING** = ``0``

å·²åˆ›å»ºå¥—æ¥å­—ã€‚è¿æ¥å°šæœªæ‰“å¼€ã€‚

.. _class_WebSocketPeer_constant_STATE_OPEN:

.. rst-class:: classref-enumeration-constant

:ref:`State<enum_WebSocketPeer_State>` **STATE_OPEN** = ``1``

è¿æ¥å·²æ‰“å¼€ï¼Œé€šè®¯å°±ç»ªã€‚

.. _class_WebSocketPeer_constant_STATE_CLOSING:

.. rst-class:: classref-enumeration-constant

:ref:`State<enum_WebSocketPeer_State>` **STATE_CLOSING** = ``2``

è¿æ¥æ­£åœ¨å…³é—­è¿‡ç¨‹ä¸­ã€‚è¿™æ„å‘³ç€å·²ç»å‘è¿œç¨‹å¯¹ç­‰ä½“å‘é€äº†å…³é—­è¯·æ±‚ï¼Œä½†è¿˜æ²¡æœ‰æ”¶åˆ°ç¡®è®¤ã€‚

.. _class_WebSocketPeer_constant_STATE_CLOSED:

.. rst-class:: classref-enumeration-constant

:ref:`State<enum_WebSocketPeer_State>` **STATE_CLOSED** = ``3``

è¿æ¥å·²å…³é—­æˆ–æ— æ³•æ‰“å¼€ã€‚

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

å±æ€§è¯´æ˜
--------

.. _class_WebSocketPeer_property_handshake_headers:

.. rst-class:: classref-property

:ref:`PackedStringArray<class_PackedStringArray>` **handshake_headers** = ``PackedStringArray()`` :ref:`ğŸ”—<class_WebSocketPeer_property_handshake_headers>`

.. rst-class:: classref-property-setget

- |void| **set_handshake_headers**\ (\ value\: :ref:`PackedStringArray<class_PackedStringArray>`\ )
- :ref:`PackedStringArray<class_PackedStringArray>` **get_handshake_headers**\ (\ )

åœ¨ WebSocket æ¡æ‰‹è¿‡ç¨‹ä¸­è¦å‘é€çš„é¢å¤– HTTP æ ‡å¤´ã€‚

\ **æ³¨æ„ï¼š**\ ç”±äºæµè§ˆå™¨çš„é™åˆ¶ï¼Œåœ¨ Web å¯¼å‡ºä¸­ä¸æ”¯æŒã€‚

**Note:** The returned array is *copied* and any changes to it will not update the original property value. See :ref:`PackedStringArray<class_PackedStringArray>` for more details.

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_property_inbound_buffer_size:

.. rst-class:: classref-property

:ref:`int<class_int>` **inbound_buffer_size** = ``65535`` :ref:`ğŸ”—<class_WebSocketPeer_property_inbound_buffer_size>`

.. rst-class:: classref-property-setget

- |void| **set_inbound_buffer_size**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_inbound_buffer_size**\ (\ )

è¾“å…¥ç¼“å†²åŒºçš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆå¤§è‡´æ˜¯å°†åˆ†é…ç»™å…¥ç«™æ•°æ®åŒ…çš„æœ€å¤§å†…å­˜é‡ï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_property_max_queued_packets:

.. rst-class:: classref-property

:ref:`int<class_int>` **max_queued_packets** = ``2048`` :ref:`ğŸ”—<class_WebSocketPeer_property_max_queued_packets>`

.. rst-class:: classref-property-setget

- |void| **set_max_queued_packets**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_max_queued_packets**\ (\ )

é˜Ÿåˆ—ä¸­å…è®¸çš„æœ€å¤§æ•°æ®åŒ…æ•°é‡ï¼ˆåŒ…æ‹¬å…¥ç«™å’Œå‡ºç«™ï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_property_outbound_buffer_size:

.. rst-class:: classref-property

:ref:`int<class_int>` **outbound_buffer_size** = ``65535`` :ref:`ğŸ”—<class_WebSocketPeer_property_outbound_buffer_size>`

.. rst-class:: classref-property-setget

- |void| **set_outbound_buffer_size**\ (\ value\: :ref:`int<class_int>`\ )
- :ref:`int<class_int>` **get_outbound_buffer_size**\ (\ )

è¾“å…¥ç¼“å†²åŒºçš„å¤§å°ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆå¤§è‡´æ˜¯å°†åˆ†é…ç»™å‡ºç«™æ•°æ®åŒ…çš„æœ€å¤§å†…å­˜é‡ï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_property_supported_protocols:

.. rst-class:: classref-property

:ref:`PackedStringArray<class_PackedStringArray>` **supported_protocols** = ``PackedStringArray()`` :ref:`ğŸ”—<class_WebSocketPeer_property_supported_protocols>`

.. rst-class:: classref-property-setget

- |void| **set_supported_protocols**\ (\ value\: :ref:`PackedStringArray<class_PackedStringArray>`\ )
- :ref:`PackedStringArray<class_PackedStringArray>` **get_supported_protocols**\ (\ )

WebSocket æ¡æ‰‹æœŸé—´å…è®¸çš„ WebSocket å­åè®®ã€‚

**Note:** The returned array is *copied* and any changes to it will not update the original property value. See :ref:`PackedStringArray<class_PackedStringArray>` for more details.

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æ–¹æ³•è¯´æ˜
--------

.. _class_WebSocketPeer_method_accept_stream:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **accept_stream**\ (\ stream\: :ref:`StreamPeer<class_StreamPeer>`\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_accept_stream>`

ä»¥ WebSocket æœåŠ¡å™¨çš„åä¹‰ï¼Œæ¥å—æ­£åœ¨æ‰§è¡Œ HTTP æ¡æ‰‹çš„å¯¹ç­‰ä½“è¿æ¥ã€‚\ ``stream`` å¿…é¡»æ˜¯ä» :ref:`TCPServer.take_connection<class_TCPServer_method_take_connection>` è·å–çš„æœ‰æ•ˆ TCP æµï¼Œæˆ–è€…æ˜¯ä» :ref:`StreamPeerTLS.accept_stream<class_StreamPeerTLS_method_accept_stream>` æ¥å—çš„ TLS æµã€‚

\ **æ³¨æ„ï¼š**\ ç”±äºæµè§ˆå™¨çš„é™åˆ¶ï¼ŒWeb å¯¼å‡ºä¸­ä¸æ”¯æŒæ­¤æ–¹æ³•ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_close:

.. rst-class:: classref-method

|void| **close**\ (\ code\: :ref:`int<class_int>` = 1000, reason\: :ref:`String<class_String>` = ""\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_close>`

å…³é—­è¯¥ WebSocket è¿æ¥ã€‚\ ``code`` æ˜¯å…³é—­çš„çŠ¶æ€ç ï¼ˆæœ‰æ•ˆçŠ¶æ€ä»£ç çš„åˆ—è¡¨è§ RFC 6455 ç¬¬ 7.4 èŠ‚ï¼‰ã€‚\ ``reason`` æ˜¯äººç±»å¯è¯»çš„å…³é—­è¿æ¥åŸå› ï¼ˆå¯ä»¥æ˜¯ä»»ä½•å°äº 123 å­—èŠ‚çš„ UTF-8 å­—ç¬¦ä¸²ï¼‰ã€‚å¦‚æœ ``code`` ä¸ºè´Ÿæ•°ï¼Œåˆ™è¿æ¥ä¼šç«‹å³å…³é—­ï¼Œä¸é€šçŸ¥è¿œç¨‹å¯¹ç­‰ä½“ã€‚

\ **æ³¨æ„ï¼š**\ ä¸ºäº†å®ç°å¹²å‡€å¾—ä½“çš„å…³é—­ï¼Œä½ éœ€è¦åœ¨è¾¾åˆ° :ref:`STATE_CLOSED<class_WebSocketPeer_constant_STATE_CLOSED>` ä¹‹å‰ä¿æŒè½®è¯¢ã€‚

\ **æ³¨æ„ï¼š**\ Web å¯¼å‡ºå¯èƒ½ä¸æ”¯æŒéƒ¨åˆ†çŠ¶æ€ç ã€‚è¯¦æƒ…è¯·å‚è€ƒå…·ä½“æµè§ˆå™¨çš„æ–‡æ¡£ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_connect_to_url:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **connect_to_url**\ (\ url\: :ref:`String<class_String>`, tls_client_options\: :ref:`TLSOptions<class_TLSOptions>` = null\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_connect_to_url>`

è¿æ¥åˆ°ç»™å®šçš„ URLã€‚ä½¿ç”¨ ``wss://`` åè®®è¿æ¥æ—¶ä¼šæ ¡éªŒ TLS è¯ä¹¦ä¸ä¸»æœºåã€‚ä¼ å…¥å¯é€‰çš„ ``tls_client_options`` å‚æ•°å¯ä»¥è‡ªå®šä¹‰ä¿¡ä»»çš„è¯ä¹¦é¢å‘æœºæ„ï¼Œä¹Ÿå¯ä»¥ç¦ç”¨é€šç”¨åæ ¡éªŒã€‚è§ :ref:`TLSOptions.client<class_TLSOptions_method_client>` å’Œ :ref:`TLSOptions.client_unsafe<class_TLSOptions_method_client_unsafe>`\ ã€‚

\ **æ³¨æ„ï¼š**\ è¦é¿å… Web ä¸­çš„æ··åˆå†…å®¹è­¦å‘Šæˆ–é”™è¯¯ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ä»¥ ``wss://``\ ï¼ˆå®‰å…¨ï¼‰å¼€å¤´çš„ ``url`` è€Œä¸æ˜¯ ``ws://``\ ã€‚é‡‡ç”¨è¿™ç§åšæ³•æ—¶ï¼Œè¯·ç¡®ä¿ä½¿ç”¨ä¸æœåŠ¡å™¨ TLS è¯ä¹¦ç›¸åŒ¹é…çš„ä¸»æœºåŸŸåå…¨ç§°ã€‚\ ``wss://`` è¿æ¥è¯·å‹¿ç›´æ¥ä½¿ç”¨ IP åœ°å€è¿æ¥ï¼Œå› ä¸ºä¸ä¼šä¸ TLS è¯ä¹¦åŒ¹é…ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_close_code:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_close_code**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_close_code>`

è¿”å›æ”¶åˆ°çš„ WebSocket å…³é—­å¸§çŠ¶æ€ç ï¼Œå¦‚æœè¿æ¥æ²¡æœ‰å¹²å‡€åœ°å…³é—­åˆ™è¿”å› ``-1``\ ã€‚\ :ref:`get_ready_state<class_WebSocketPeer_method_get_ready_state>` è¿”å› :ref:`STATE_CLOSED<class_WebSocketPeer_constant_STATE_CLOSED>` æ‰èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_close_reason:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_close_reason**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_close_reason>`

è¿”å›æ”¶åˆ°çš„ WebSocket å…³é—­å¸§çŠ¶æ€åŸå› å­—ç¬¦ä¸²ã€‚\ :ref:`get_ready_state<class_WebSocketPeer_method_get_ready_state>` è¿”å› :ref:`STATE_CLOSED<class_WebSocketPeer_constant_STATE_CLOSED>` æ‰èƒ½è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_connected_host:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_connected_host**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_connected_host>`

è¿”å›å·²è¿æ¥å¯¹ç­‰ä½“çš„ IP åœ°å€ã€‚

\ **æ³¨æ„ï¼š**\ åœ¨ Web å¯¼å‡ºä¸­ä¸å¯ç”¨ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_connected_port:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_connected_port**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_connected_port>`

è¿”å›å·²è¿æ¥å¯¹ç­‰ä½“çš„è¿œç¨‹ç«¯å£ã€‚

\ **æ³¨æ„ï¼š**\ åœ¨ Web å¯¼å‡ºä¸­ä¸å¯ç”¨ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_current_outbound_buffered_amount:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_current_outbound_buffered_amount**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_current_outbound_buffered_amount>`

è¿”å› websocket è¾“å‡ºç¼“å†²åŒºä¸­çš„å½“å‰æ•°æ®é‡ã€‚\ **æ³¨æ„ï¼š**\ Web å¯¼å‡ºä½¿ç”¨ WebSocket.bufferedAmountï¼Œè€Œå…¶ä»–å¹³å°ä½¿ç”¨å†…éƒ¨ç¼“å†²åŒºã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_ready_state:

.. rst-class:: classref-method

:ref:`State<enum_WebSocketPeer_State>` **get_ready_state**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_ready_state>`

è¿”å›è¯¥è¿æ¥çš„å°±ç»ªçŠ¶æ€ï¼Œè§ :ref:`State<enum_WebSocketPeer_State>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_requested_url:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_requested_url**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_requested_url>`

è¿”å›è¯¥å¯¹ç­‰ä½“è¯·æ±‚çš„ URLã€‚è¯¥ URL ç”±ä¼ ç»™ :ref:`connect_to_url<class_WebSocketPeer_method_connect_to_url>` çš„ ``url`` å¾—å‡ºï¼Œä½œä¸ºæœåŠ¡å™¨æ—¶åˆ™ä» HTTP æ ‡å¤´è·å–ï¼ˆå³ä½¿ç”¨ :ref:`accept_stream<class_WebSocketPeer_method_accept_stream>` æ—¶ï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_get_selected_protocol:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_selected_protocol**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_get_selected_protocol>`

è¿”å›è¿™ä¸ªè¿æ¥æ‰€é€‰ç”¨çš„ WebSocket å­åè®®ï¼Œå¦‚æœæœªé€‰æ‹©å­åè®®åˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_poll:

.. rst-class:: classref-method

|void| **poll**\ (\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_poll>`

æ›´æ–°è¿æ¥çŠ¶æ€å¹¶æ¥æ”¶ä¼ å…¥çš„æ•°æ®åŒ…ã€‚è¯·å®šæœŸè°ƒç”¨æ­¤å‡½æ•°ï¼Œä¿æŒå…¶æ¸…æ´çŠ¶æ€ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_send:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **send**\ (\ message\: :ref:`PackedByteArray<class_PackedByteArray>`, write_mode\: :ref:`WriteMode<enum_WebSocketPeer_WriteMode>` = 1\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_send>`

ä½¿ç”¨æœŸæœ›çš„ ``write_mode`` å‘é€ç»™å®šçš„ ``message``\ ã€‚å‘é€ :ref:`String<class_String>` æ—¶ï¼Œè¯·ä¼˜å…ˆä½¿ç”¨ :ref:`send_text<class_WebSocketPeer_method_send_text>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_send_text:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **send_text**\ (\ message\: :ref:`String<class_String>`\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_send_text>`

ä½¿ç”¨ WebSocket æ–‡æœ¬æ¨¡å¼å‘é€ç»™å®šçš„ ``message``\ ã€‚ä¸ç¬¬ä¸‰æ–¹æ–‡æœ¬ API äº¤äº’æ—¶è¯·ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªæ–¹æ³•è€Œä¸æ˜¯ :ref:`PacketPeer.put_packet<class_PacketPeer_method_put_packet>`\ ï¼ˆä¾‹å¦‚ä½¿ç”¨ :ref:`JSON<class_JSON>` æ ¼å¼çš„æ¶ˆæ¯æ—¶ï¼‰ã€‚

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_set_no_delay:

.. rst-class:: classref-method

|void| **set_no_delay**\ (\ enabled\: :ref:`bool<class_bool>`\ ) :ref:`ğŸ”—<class_WebSocketPeer_method_set_no_delay>`

Disable Nagle's algorithm on the underlying TCP socket (default). See :ref:`StreamPeerTCP.set_no_delay<class_StreamPeerTCP_method_set_no_delay>` for more information.

\ **Note:** Not available in the Web export.

.. rst-class:: classref-item-separator

----

.. _class_WebSocketPeer_method_was_string_packet:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **was_string_packet**\ (\ ) |const| :ref:`ğŸ”—<class_WebSocketPeer_method_was_string_packet>`

å¦‚æœæœ€åæ”¶åˆ°çš„æ•°æ®åŒ…æ˜¯ä½œä¸ºæ–‡æœ¬æœ‰æ•ˆè½½è·å‘é€çš„ï¼Œè¿”å› ``true``\ ã€‚è§ :ref:`WriteMode<enum_WebSocketPeer_WriteMode>`\ ã€‚

.. |virtual| replace:: :abbr:`virtual (æœ¬æ–¹æ³•é€šå¸¸éœ€è¦ç”¨æˆ·è¦†ç›–æ‰èƒ½ç”Ÿæ•ˆã€‚)`
.. |const| replace:: :abbr:`const (æœ¬æ–¹æ³•æ— å‰¯ä½œç”¨ï¼Œä¸ä¼šä¿®æ”¹è¯¥å®ä¾‹çš„ä»»ä½•æˆå‘˜å˜é‡ã€‚)`
.. |vararg| replace:: :abbr:`vararg (æœ¬æ–¹æ³•é™¤äº†èƒ½æ¥å—åœ¨æ­¤å¤„æè¿°çš„å‚æ•°å¤–ï¼Œè¿˜èƒ½å¤Ÿç»§ç»­æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ã€‚)`
.. |constructor| replace:: :abbr:`constructor (æœ¬æ–¹æ³•ç”¨äºæ„é€ æŸä¸ªç±»å‹ã€‚)`
.. |static| replace:: :abbr:`static (è°ƒç”¨æœ¬æ–¹æ³•æ— éœ€å®ä¾‹ï¼Œå¯ç›´æ¥ä½¿ç”¨ç±»åè¿›è¡Œè°ƒç”¨ã€‚)`
.. |operator| replace:: :abbr:`operator (æœ¬æ–¹æ³•æè¿°çš„æ˜¯ä½¿ç”¨æœ¬ç±»å‹ä½œä¸ºå·¦æ“ä½œæ•°çš„æœ‰æ•ˆè¿ç®—ç¬¦ã€‚)`
.. |bitfield| replace:: :abbr:`BitField (è¿™ä¸ªå€¼æ˜¯ç”±ä¸‹åˆ—ä½æ ‡å¿—æ„æˆä½æ©ç çš„æ•´æ•°ã€‚)`
.. |void| replace:: :abbr:`void (æ— è¿”å›å€¼ã€‚)`
