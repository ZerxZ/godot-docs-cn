:github_url: hide

.. meta::
	:keywords: network

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/MultiplayerAPIExtension.xml.

.. _class_MultiplayerAPIExtension:

MultiplayerAPIExtension
=======================

**ç»§æ‰¿ï¼š** :ref:`MultiplayerAPI<class_MultiplayerAPI>` **<** :ref:`RefCounted<class_RefCounted>` **<** :ref:`Object<class_Object>`

ç”¨äºæ‰©å±• :ref:`MultiplayerAPI<class_MultiplayerAPI>` çš„åŸºç±»ã€‚

.. rst-class:: classref-introduction-group

æè¿°
----

è¯¥ç±»å¯ç”¨äºé€šè¿‡è„šæœ¬æˆ–æ‰©å±•æ¥å¢å¼ºæˆ–æ›¿æ¢é»˜è®¤çš„ :ref:`MultiplayerAPI<class_MultiplayerAPI>` å®ç°ã€‚

ä¸‹é¢çš„ä¾‹å­é€šè¿‡è®°å½•æ¯ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„ RPC å’Œä¸ºå¤åˆ¶è€Œé…ç½®çš„æ¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¢å¼ºäº†é»˜è®¤çš„å®ç°ï¼ˆ\ :ref:`SceneMultiplayer<class_SceneMultiplayer>`\ ï¼‰ã€‚


.. tabs::

 .. code-tab:: gdscript

    extends MultiplayerAPIExtension
    class_name LogMultiplayer
    
    # æˆ‘ä»¬æƒ³å¢å¼ºé»˜è®¤çš„ SceneMultiplayerã€‚
    var base_multiplayer = SceneMultiplayer.new()
    
    func _init():
        # ä»…ä¼ é€’åŸºæœ¬ä¿¡å·ï¼ˆå¤åˆ¶åˆ° var ä»¥é¿å…å¾ªç¯å¼•ç”¨ï¼‰
        var cts = connected_to_server
        var cf = connection_failed
        var pc = peer_connected
        var pd = peer_disconnected
        base_multiplayer.connected_to_server.connect(func(): cts.emit())
        base_multiplayer.connection_failed.connect(func(): cf.emit())
        base_multiplayer.peer_connected.connect(func(id): pc.emit(id))
        base_multiplayer.peer_disconnected.connect(func(id): pd.emit(id))
    
    func _poll():
        return base_multiplayer.poll()
    
    # è®°å½•æ­£åœ¨è¿›è¡Œçš„ RPC å¹¶å°†å…¶è½¬å‘åˆ°é»˜è®¤çš„å¤šäººæ¸¸æˆã€‚
    func _rpc(peer: int, object: Object, method: StringName, args: Array) -> Error:
        print("è·å–ç”¨äº %d çš„ RPCï¼š%s::%s(%s)" % [peer, object, method, args])
        return base_multiplayer.rpc(peer, object, method, args)
    
    # è®°å½•é…ç½®æ·»åŠ ã€‚ä¾‹å¦‚ï¼Œæ ¹è·¯å¾„ï¼ˆnullptrã€NodePathï¼‰ï¼Œå¤åˆ¶ï¼ˆNodeã€Spawner|Synchronizerï¼‰ï¼Œè‡ªå®šä¹‰ã€‚
    func _object_configuration_add(object, config: Variant) -> Error:
        if config is MultiplayerSynchronizer:
            print("æ·»åŠ ç”¨äº %s çš„åŒæ­¥é…ç½®ã€‚åŒæ­¥å™¨ï¼š%s" % [object, config])
        elif config is MultiplayerSpawner:
            print("å°†èŠ‚ç‚¹ %s æ·»åŠ åˆ°å‡ºç”Ÿåˆ—è¡¨ã€‚å‡ºç”Ÿå™¨ï¼š%s" % [object, config])
        return base_multiplayer.object_configuration_add(object, config)
    
    # è®°å½•é…ç½®ç§»é™¤ã€‚ä¾‹å¦‚ï¼Œæ ¹è·¯å¾„ï¼ˆnullptrã€NodePathï¼‰ï¼Œå¤åˆ¶ï¼ˆNodeã€Spawner|Synchronizerï¼‰ï¼Œè‡ªå®šä¹‰ã€‚
    func _object_configuration_remove(object, config: Variant) -> Error:
        if config is MultiplayerSynchronizer:
            print("ç§»é™¤ç”¨äº %s çš„åŒæ­¥é…ç½®ã€‚åŒæ­¥å™¨ï¼š%s" % [object, config])
        elif config is MultiplayerSpawner:
            print("å°†èŠ‚ç‚¹ %s ä»å‡ºç”Ÿåˆ—è¡¨ç§»é™¤ã€‚å‡ºç”Ÿå™¨ï¼š%s" % [object, config])
        return base_multiplayer.object_configuration_remove(object, config)
    
    # è¿™äº›å¯ä»¥æ˜¯å¯é€‰çš„ï¼Œä½†åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦å¢å¼º SceneMultiplayerï¼Œæ‰€ä»¥è½¬å‘æ‰€æœ‰å†…å®¹ã€‚
    func _set_multiplayer_peer(p_peer: MultiplayerPeer):
        base_multiplayer.multiplayer_peer = p_peer
    
    func _get_multiplayer_peer() -> MultiplayerPeer:
        return base_multiplayer.multiplayer_peer
    
    func _get_unique_id() -> int:
        return base_multiplayer.get_unique_id()
    
    func _get_peer_ids() -> PackedInt32Array:
        return base_multiplayer.get_peers()



ç„¶ååœ¨ä½ çš„ä¸»åœºæ™¯æˆ–åœ¨è‡ªåŠ¨åŠ è½½ä¸­è°ƒç”¨ :ref:`SceneTree.set_multiplayer<class_SceneTree_method_set_multiplayer>`\ ï¼Œä»¥å¼€å§‹ä½¿ç”¨ä½ çš„è‡ªå®šä¹‰ :ref:`MultiplayerAPI<class_MultiplayerAPI>`\ ï¼š


.. tabs::

 .. code-tab:: gdscript

    # autoload.gd
    func _enter_tree():
        # å°†æˆ‘ä»¬çš„è‡ªå®šä¹‰å¤šäººæ¸¸æˆè®¾ç½®ä¸º SceneTree ä¸­çš„ä¸»è¦çš„å¤šäººæ¸¸æˆã€‚
    get_tree().set_multiplayer(LogMultiplayer.new())



åŸç”Ÿæ‰©å±•ä¹Ÿå¯ä»¥åœ¨åˆå§‹åŒ–æœŸé—´ï¼Œä½¿ç”¨ :ref:`MultiplayerAPI.set_default_interface<class_MultiplayerAPI_method_set_default_interface>` æ–¹æ³•å°†è‡ªå·±é…ç½®ä¸ºé»˜è®¤å®ç°ã€‚

.. rst-class:: classref-reftable-group

æ–¹æ³•
----

.. table::
   :widths: auto

   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`MultiplayerPeer<class_MultiplayerPeer>`   | :ref:`_get_multiplayer_peer<class_MultiplayerAPIExtension_private_method__get_multiplayer_peer>`\ (\ ) |virtual|                                                                                                                   |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`PackedInt32Array<class_PackedInt32Array>` | :ref:`_get_peer_ids<class_MultiplayerAPIExtension_private_method__get_peer_ids>`\ (\ ) |virtual| |const|                                                                                                                           |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                           | :ref:`_get_remote_sender_id<class_MultiplayerAPIExtension_private_method__get_remote_sender_id>`\ (\ ) |virtual| |const|                                                                                                           |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                           | :ref:`_get_unique_id<class_MultiplayerAPIExtension_private_method__get_unique_id>`\ (\ ) |virtual| |const|                                                                                                                         |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`           | :ref:`_object_configuration_add<class_MultiplayerAPIExtension_private_method__object_configuration_add>`\ (\ object\: :ref:`Object<class_Object>`, configuration\: :ref:`Variant<class_Variant>`\ ) |virtual|                      |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`           | :ref:`_object_configuration_remove<class_MultiplayerAPIExtension_private_method__object_configuration_remove>`\ (\ object\: :ref:`Object<class_Object>`, configuration\: :ref:`Variant<class_Variant>`\ ) |virtual|                |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`           | :ref:`_poll<class_MultiplayerAPIExtension_private_method__poll>`\ (\ ) |virtual|                                                                                                                                                   |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>`           | :ref:`_rpc<class_MultiplayerAPIExtension_private_method__rpc>`\ (\ peer\: :ref:`int<class_int>`, object\: :ref:`Object<class_Object>`, method\: :ref:`StringName<class_StringName>`, args\: :ref:`Array<class_Array>`\ ) |virtual| |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                                          | :ref:`_set_multiplayer_peer<class_MultiplayerAPIExtension_private_method__set_multiplayer_peer>`\ (\ multiplayer_peer\: :ref:`MultiplayerPeer<class_MultiplayerPeer>`\ ) |virtual|                                                 |
   +-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æ–¹æ³•è¯´æ˜
--------

.. _class_MultiplayerAPIExtension_private_method__get_multiplayer_peer:

.. rst-class:: classref-method

:ref:`MultiplayerPeer<class_MultiplayerPeer>` **_get_multiplayer_peer**\ (\ ) |virtual| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__get_multiplayer_peer>`

åœ¨æ£€ç´¢åˆ° :ref:`MultiplayerAPI.multiplayer_peer<class_MultiplayerAPI_property_multiplayer_peer>` æ—¶è°ƒç”¨ã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__get_peer_ids:

.. rst-class:: classref-method

:ref:`PackedInt32Array<class_PackedInt32Array>` **_get_peer_ids**\ (\ ) |virtual| |const| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__get_peer_ids>`

:ref:`MultiplayerAPI.get_peers<class_MultiplayerAPI_method_get_peers>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__get_remote_sender_id:

.. rst-class:: classref-method

:ref:`int<class_int>` **_get_remote_sender_id**\ (\ ) |virtual| |const| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__get_remote_sender_id>`

:ref:`MultiplayerAPI.get_remote_sender_id<class_MultiplayerAPI_method_get_remote_sender_id>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__get_unique_id:

.. rst-class:: classref-method

:ref:`int<class_int>` **_get_unique_id**\ (\ ) |virtual| |const| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__get_unique_id>`

:ref:`MultiplayerAPI.get_unique_id<class_MultiplayerAPI_method_get_unique_id>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__object_configuration_add:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **_object_configuration_add**\ (\ object\: :ref:`Object<class_Object>`, configuration\: :ref:`Variant<class_Variant>`\ ) |virtual| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__object_configuration_add>`

:ref:`MultiplayerAPI.object_configuration_add<class_MultiplayerAPI_method_object_configuration_add>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__object_configuration_remove:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **_object_configuration_remove**\ (\ object\: :ref:`Object<class_Object>`, configuration\: :ref:`Variant<class_Variant>`\ ) |virtual| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__object_configuration_remove>`

:ref:`MultiplayerAPI.object_configuration_remove<class_MultiplayerAPI_method_object_configuration_remove>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__poll:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **_poll**\ (\ ) |virtual| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__poll>`

:ref:`MultiplayerAPI.poll<class_MultiplayerAPI_method_poll>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__rpc:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **_rpc**\ (\ peer\: :ref:`int<class_int>`, object\: :ref:`Object<class_Object>`, method\: :ref:`StringName<class_StringName>`, args\: :ref:`Array<class_Array>`\ ) |virtual| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__rpc>`

:ref:`MultiplayerAPI.rpc<class_MultiplayerAPI_method_rpc>` çš„å›è°ƒã€‚

.. rst-class:: classref-item-separator

----

.. _class_MultiplayerAPIExtension_private_method__set_multiplayer_peer:

.. rst-class:: classref-method

|void| **_set_multiplayer_peer**\ (\ multiplayer_peer\: :ref:`MultiplayerPeer<class_MultiplayerPeer>`\ ) |virtual| :ref:`ğŸ”—<class_MultiplayerAPIExtension_private_method__set_multiplayer_peer>`

åœ¨è®¾ç½® :ref:`MultiplayerAPI.multiplayer_peer<class_MultiplayerAPI_property_multiplayer_peer>` æ—¶è°ƒç”¨ã€‚

.. |virtual| replace:: :abbr:`virtual (æœ¬æ–¹æ³•é€šå¸¸éœ€è¦ç”¨æˆ·è¦†ç›–æ‰èƒ½ç”Ÿæ•ˆã€‚)`
.. |const| replace:: :abbr:`const (æœ¬æ–¹æ³•æ— å‰¯ä½œç”¨ï¼Œä¸ä¼šä¿®æ”¹è¯¥å®ä¾‹çš„ä»»ä½•æˆå‘˜å˜é‡ã€‚)`
.. |vararg| replace:: :abbr:`vararg (æœ¬æ–¹æ³•é™¤äº†èƒ½æ¥å—åœ¨æ­¤å¤„æè¿°çš„å‚æ•°å¤–ï¼Œè¿˜èƒ½å¤Ÿç»§ç»­æ¥å—ä»»æ„æ•°é‡çš„å‚æ•°ã€‚)`
.. |constructor| replace:: :abbr:`constructor (æœ¬æ–¹æ³•ç”¨äºæ„é€ æŸä¸ªç±»å‹ã€‚)`
.. |static| replace:: :abbr:`static (è°ƒç”¨æœ¬æ–¹æ³•æ— éœ€å®ä¾‹ï¼Œå¯ç›´æ¥ä½¿ç”¨ç±»åè¿›è¡Œè°ƒç”¨ã€‚)`
.. |operator| replace:: :abbr:`operator (æœ¬æ–¹æ³•æè¿°çš„æ˜¯ä½¿ç”¨æœ¬ç±»å‹ä½œä¸ºå·¦æ“ä½œæ•°çš„æœ‰æ•ˆè¿ç®—ç¬¦ã€‚)`
.. |bitfield| replace:: :abbr:`BitField (è¿™ä¸ªå€¼æ˜¯ç”±ä¸‹åˆ—ä½æ ‡å¿—æ„æˆä½æ©ç çš„æ•´æ•°ã€‚)`
.. |void| replace:: :abbr:`void (æ— è¿”å›å€¼ã€‚)`
